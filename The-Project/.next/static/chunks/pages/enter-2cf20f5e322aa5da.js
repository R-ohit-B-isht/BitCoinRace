(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[926],{1296:function(e,t,n){var r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,u=parseInt,c="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,a="object"==typeof self&&self&&self.Object===Object&&self,l=c||a||Function("return this")(),f=Object.prototype.toString,d=Math.max,p=Math.min,m=function(){return l.Date.now()};function x(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function h(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==f.call(e)}(e))return NaN;if(x(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=x(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var n=o.test(e);return n||s.test(e)?u(e.slice(2),n?2:8):i.test(e)?NaN:+e}e.exports=function(e,t,n){var r,i,o,s,u,c,a=0,l=!1,f=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function j(t){var n=r,o=i;return r=i=void 0,a=t,s=e.apply(o,n)}function g(e){return a=e,u=setTimeout(y,t),l?j(e):s}function b(e){var n=e-c;return void 0===c||n>=t||n<0||f&&e-a>=o}function y(){var e=m();if(b(e))return w(e);u=setTimeout(y,function(e){var n=t-(e-c);return f?p(n,o-(e-a)):n}(e))}function w(e){return u=void 0,v&&r?j(e):(r=i=void 0,s)}function k(){var e=m(),n=b(e);if(r=arguments,i=this,c=e,n){if(void 0===u)return g(c);if(f)return u=setTimeout(y,t),j(c)}return void 0===u&&(u=setTimeout(y,t)),s}return t=h(t)||0,x(n)&&(l=!!n.leading,o=(f="maxWait"in n)?d(h(n.maxWait)||0,t):o,v="trailing"in n?!!n.trailing:v),k.cancel=function(){void 0!==u&&clearTimeout(u),a=0,r=c=i=u=void 0},k.flush=function(){return void 0===u?s:w(m())},k}},5417:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/enter",function(){return n(2686)}])},7950:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(5893),i=n(9008);function o(e){var t=e.title,n=void 0===t?"Blockonomics Leaderboard":t,o=e.description,s=void 0===o?"A complete Next.js + Firebase + blockonomics bitcoin Leaderboard":o;return(0,r.jsxs)(i.default,{children:[(0,r.jsx)("title",{children:n}),(0,r.jsx)("meta",{name:"twitter:card",content:"summary"}),(0,r.jsx)("meta",{name:"twitter:site",content:"@R-ohit-B-isht"}),(0,r.jsx)("meta",{name:"twitter:title",content:n}),(0,r.jsx)("meta",{name:"twitter:description",content:s}),(0,r.jsx)("meta",{property:"og:title",content:n}),(0,r.jsx)("meta",{property:"og:description",content:s})]})}},2686:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var r=n(5666),i=n.n(r),o=n(5893),s=n(8773),u=n(9863),c=n(7950),a=n(7294),l=n(1296),f=n.n(l);function d(e,t,n,r,i,o,s){try{var u=e[o](s),c=u.value}catch(a){return void n(a)}u.done?t(c):Promise.resolve(c).then(r,i)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function s(e){d(o,r,i,s,u,"next",e)}function u(e){d(o,r,i,s,u,"throw",e)}s(void 0)}))}}function m(e){var t=(0,a.useContext)(u.S),n=t.user,r=t.username;return(0,o.jsxs)("main",{children:[(0,o.jsx)(c.Z,{title:"Enter",description:"Sign up for this amazing app!"}),n?r?(0,o.jsx)(h,{}):(0,o.jsx)(v,{}):(0,o.jsx)(x,{})]})}function x(){var e=p(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.I8.signInWithPopup(s.qV);case 2:case"end":return e.stop()}}),e)})));return(0,o.jsx)("view",{style:{display:"flex",flexDirection:"row",justifyContent:"center"},children:(0,o.jsxs)("view",{style:{display:"flex",flexDirection:"column"},children:[(0,o.jsx)("label",{style:{display:"flex",justifyContent:"center"},children:(0,o.jsx)("h1",{children:"Login:"})}),(0,o.jsxs)("button",{className:"btn-google",onClick:e,children:[(0,o.jsx)("img",{src:"/google.png",width:"30px"})," Sign in with Google"]}),(0,o.jsx)("button",{onClick:function(){return s.I8.signInAnonymously()},children:"Sign in Anonymously"})]})})}function h(){return(0,o.jsx)("button",{onClick:function(){return s.I8.signOut()},children:"Sign Out"})}function v(){var e=(0,a.useState)(""),t=e[0],n=e[1],r=(0,a.useState)(!1),c=r[0],l=r[1],d=(0,a.useState)(!1),m=d[0],x=d[1],h=(0,a.useContext)(u.S),v=h.user,g=h.username,b=p(i().mark((function e(n){var r,o,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),r=s.RZ.doc("users/".concat(v.uid)),o=s.RZ.doc("usernames/".concat(t)),(u=s.RZ.batch()).set(r,{username:t,photoURL:v.photoURL,displayName:v.displayName}),u.set(o,{uid:v.uid}),e.next=8,u.commit();case 8:case"end":return e.stop()}}),e)})));(0,a.useEffect)((function(){y(t)}),[t]);var y=(0,a.useCallback)(f()(p(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>=3)){e.next=8;break}return n=s.RZ.doc("usernames/".concat(t)),e.next=4,n.get();case 4:r=e.sent.exists,console.log("Firestore read executed!"),l(!r),x(!1);case 8:case"end":return e.stop()}}),e)}))),500),[]);return!g&&(0,o.jsxs)("section",{children:[(0,o.jsx)("h3",{children:"Choose Username"}),(0,o.jsxs)("form",{onSubmit:b,children:[(0,o.jsx)("input",{name:"username",placeholder:"myname",value:t,onChange:function(e){var t=e.target.value.toLowerCase();t.length<3&&(n(t),x(!1),l(!1)),/^(?=[a-zA-Z0-9._]{3,15}$)(?!.*[_.]{2})[^_.].*[^_.]$/.test(t)&&(n(t),x(!0),l(!1))}}),(0,o.jsx)(j,{username:t,isValid:c,loading:m}),(0,o.jsx)("button",{type:"submit",className:"btn-green",disabled:!c,children:"Choose"}),(0,o.jsx)("h3",{children:"Debug State"}),(0,o.jsxs)("div",{children:["Username: ",t,(0,o.jsx)("br",{}),"Loading: ",m.toString(),(0,o.jsx)("br",{}),"Username Valid: ",c.toString()]})]})]})}function j(e){var t=e.username,n=e.isValid;return e.loading?(0,o.jsx)("p",{children:"Checking..."}):n?(0,o.jsxs)("p",{className:"text-success",children:[t," is available!"]}):t&&!n?(0,o.jsx)("p",{className:"text-danger",children:"That username is taken!"}):(0,o.jsx)("p",{})}},9008:function(e,t,n){e.exports=n(5443)}},function(e){e.O(0,[774,888,179],(function(){return t=5417,e(e.s=t);var t}));var t=e.O();_N_E=t}]);