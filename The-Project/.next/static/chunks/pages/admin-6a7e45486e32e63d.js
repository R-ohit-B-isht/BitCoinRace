(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{5683:function(e,n,t){var o="[object Symbol]",r=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,i=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,s="\\u2700-\\u27bf",a="a-z\\xdf-\\xf6\\xf8-\\xff",u="A-Z\\xc0-\\xd6\\xd8-\\xde",c="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",l="['\u2019]",d="["+c+"]",f="[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]",m="\\d+",p="[\\u2700-\\u27bf]",h="["+a+"]",v="[^\\ud800-\\udfff"+c+m+s+a+u+"]",y="(?:\\ud83c[\\udde6-\\uddff]){2}",x="[\\ud800-\\udbff][\\udc00-\\udfff]",b="["+u+"]",g="(?:"+h+"|"+v+")",w="(?:"+b+"|"+v+")",j="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",k="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",_="(?:[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]|\\ud83c[\\udffb-\\udfff])?",E="[\\ufe0e\\ufe0f]?",A=E+_+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",y,x].join("|")+")"+E+_+")*"),T="(?:"+[p,y,x].join("|")+")"+A,O=RegExp(l,"g"),C=RegExp(f,"g"),S=RegExp([b+"?"+h+"+"+j+"(?="+[d,b,"$"].join("|")+")",w+"+"+k+"(?="+[d,b+g,"$"].join("|")+")",b+"?"+g+"+"+j,b+"+"+k,m,T].join("|"),"g"),I=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,R="object"==typeof t.g&&t.g&&t.g.Object===Object&&t.g,N="object"==typeof self&&self&&self.Object===Object&&self,P=R||N||Function("return this")();var L,U=(L={"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"ss"},function(e){return null==L?void 0:L[e]});var Z=Object.prototype.toString,M=P.Symbol,z=M?M.prototype:void 0,B=z?z.toString:void 0;function q(e){if("string"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&Z.call(e)==o}(e))return B?B.call(e):"";var n=e+"";return"0"==n&&1/e==-Infinity?"-0":n}function F(e){return null==e?"":q(e)}var D,G=(D=function(e,n,t){return e+(t?"-":"")+n.toLowerCase()},function(e){return function(e,n,t,o){var r=-1,i=e?e.length:0;for(o&&i&&(t=e[++r]);++r<i;)t=n(t,e[r],r,e);return t}(function(e,n,t){return e=F(e),void 0===(n=t?void 0:n)?function(e){return I.test(e)}(e)?function(e){return e.match(S)||[]}(e):function(e){return e.match(r)||[]}(e):e.match(n)||[]}(function(e){return(e=F(e))&&e.replace(i,U).replace(C,"")}(e).replace(O,"")),D,"")});e.exports=G},5469:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return t(5824)}])},8965:function(e,n,t){"use strict";t.d(n,{Z:function(){return a}});var o=t(5893),r=t(1664),i=t(7294),s=t(9863);function a(e){return(0,i.useContext)(s.S).username?e.children:e.fallback||(0,o.jsx)(r.default,{href:"/enter",children:"You must be signed in"})}},8762:function(e,n,t){"use strict";t.d(n,{Z:function(){return i}});var o=t(5893),r=t(1664);function i(e){var n=e.posts,t=e.admin;return n?n.map((function(e){return(0,o.jsx)(s,{post:e,admin:t},e.slug)})):null}function s(e){var n=e.post,t=e.admin,i=void 0!==t&&t,s=null===n||void 0===n?void 0:n.content.trim().split(/\s+/g).length,a=(s/100+1).toFixed(0);return(0,o.jsxs)("div",{className:"card",children:[(0,o.jsx)(r.default,{href:"/".concat(n.username),children:(0,o.jsx)("a",{children:(0,o.jsxs)("strong",{children:["By @",n.username]})})}),(0,o.jsx)(r.default,{href:"/".concat(n.username,"/").concat(n.slug),children:(0,o.jsx)("h2",{children:(0,o.jsx)("a",{children:n.title})})}),(0,o.jsxs)("footer",{children:[(0,o.jsxs)("span",{children:[s," words. ",a," min read"]}),(0,o.jsxs)("span",{className:"push-left",children:["\ud83d\udc97 ",n.heartCount||0," Hearts"]})]}),i&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.default,{href:"/admin/".concat(n.slug),children:(0,o.jsx)("h3",{children:(0,o.jsx)("button",{className:"btn-blue",children:"Edit"})})}),n.published?(0,o.jsx)("p",{className:"text-success",children:"Live"}):(0,o.jsx)("p",{className:"text-danger",children:"Unpublished"})]})]})}},5824:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return g}});var o=t(5666),r=t.n(o),i=t(5893),s=t(4850),a=t.n(s),u=t(8965),c=t(8762),l=t(9863),d=t(8773),f=t(7294),m=t(1163),p=t(6677),h=t(5683),v=t.n(h),y=t(4931);function x(e,n,t,o,r,i,s){try{var a=e[i](s),u=a.value}catch(c){return void t(c)}a.done?n(u):Promise.resolve(u).then(o,r)}function b(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=[],o=!0,r=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(o=(s=a.next()).done)&&(t.push(s.value),!n||t.length!==n);o=!0);}catch(u){r=!0,i=u}finally{try{o||null==a.return||a.return()}finally{if(r)throw i}}return t}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function g(e){return(0,i.jsx)("main",{children:(0,i.jsxs)(u.Z,{children:[(0,i.jsx)(w,{}),(0,i.jsx)(j,{})]})})}function w(){var e=d.RZ.collection("users").doc(d.I8.currentUser.uid).collection("posts").orderBy("createdAt"),n=b((0,p.Kx)(e),1)[0],t=null===n||void 0===n?void 0:n.docs.map((function(e){return e.data()}));return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h1",{children:"Manage your Posts"}),(0,i.jsx)(c.Z,{posts:t,admin:!0})]})}function j(){var e,n=(0,m.useRouter)(),t=(0,f.useContext)(l.S).username,o=(0,f.useState)(""),s=o[0],u=o[1],c=(0,f.useState)(!1),p=c[0],h=c[1],b=encodeURI(v()(s)),g=s.length>3&&s.length<100&&p,w=(e=r().mark((function e(o){var i,a,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.preventDefault(),i=d.I8.currentUser.uid,a=d.RZ.collection("users").doc(i).collection("posts").doc(b),u={title:s,slug:b,uid:i,username:t,published:!1,content:"# hello world!",createdAt:(0,d.Bt)(),updatedAt:(0,d.Bt)(),heartCount:0,amount:k},e.next=6,a.set(u);case 6:y.ZP.success("Post created!"),n.push("/admin/".concat(b));case 8:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(o,r){var i=e.apply(n,t);function s(e){x(i,o,r,s,a,"next",e)}function a(e){x(i,o,r,s,a,"throw",e)}s(void 0)}))}),j=(0,f.useState)(5),k=j[0],_=j[1],E=(0,f.useState)(""),A=E[0],T=E[1],O={displayTimer:function(e,n){var t=Math.floor(n/60),o=Math.floor(n)%60;o=o<10?"0"+o:o,document.getElementById(e).querySelector(".time_remaining").innerHTML=t+":"+o},displayError:function(e,n){var t=this,o=document.getElementById(e);o.style.marginTop="5px",o.style.padding="5px",o.style.width="fit-content",o.style.border="1px solid lightgray",o.style.borderRadius="5px",o.style.display="block",o.innerHTML="<div class='blockonomics_error'>"+n+'<div class="blockonomics_close" style="text-align:center;"><a href="#" style="cursor:pointer">Close</a></div></div>',o.querySelector(".blockonomics_close a").onclick=function(e){e.preventDefault(),o.style.display="none",t.stopTimer()}},displayMessage:function(e,n){var t=this,o=document.getElementById(e);o.style.marginTop="5px",o.style.padding="5px",o.style.width="fit-content",o.style.border="1px solid lightgray",o.style.borderRadius="5px",o.style.display="block",o.innerHTML="<div class='blockonomics_message'>"+n+'<div class="blockonomics_close" style="text-align:center;"><a href="#" style="cursor:pointer">Close</a></div></div>',o.querySelector(".blockonomics_close a").onclick=function(e){e.preventDefault(),o.style.display="none",t.stopTimer()}},generateQr:function(e,n){var t="bitcoin:"+e+"?amount="+n,o=document.getElementById("blockonomics_qrcode");new QRious({element:o,value:t,size:135})},displayCheckout:function(e,n,t,o){var r=this;r.displayMessage(e,'<div style="display:flex; align-items:center; justify-content: center;">\n              <div style="max-width: 30%; padding-right:7px;">\n                  <a href="bitcoin:'+t+"?amount="+n/1e8+'"><canvas id=\'blockonomics_qrcode\' style="max-width:100%"></canvas></a>\n              </div>\n              <div>\n                  <div>To pay, send bitcoin to this address:</div>\n                  <input type="text" value="'+t+'" readonly>\n                  <div>Amount of bitcoin (BTC) to send:</div>\n                  <input type="text" value="'+n/1e8+'" readonly>\n                  <div style="text-align:center"><small class=\'time_remaining\'></small></div>\n              </div>\n          </div>'),r.generateQr(t,n/1e8);var i=new WebSocket("wss://www.blockonomics.co/payment/"+t);i.onmessage=function(n){i.close(),window.blockonomicsPaymentCallback&&!window.blockonomicsPaymentCallback.hasRun?(window.blockonomicsPaymentCallback(JSON.parse(n.data)),window.blockonomicsPaymentCallback.hasRun=!0):(r.displayMessage(e,"Payment received!"),h(!0),(0,y.ZP)("\u2705Payment Recieved")),r.stopTimer()};var s=o;r.displayTimer(e,s),r.myTimeout=setInterval((function(){s-=1,r.displayTimer(e,s),s<=0&&(r.stopTimer(),r.displayError(e,"Expired"))}),1e3)},myTimeout:null,stopTimer:function(){clearTimeout(this.myTimeout)}},C={widget:function(e){var n=e.msg_area,t=e.uuid,o=e.email,r=e.name,i=e.address,s=e.amount,a=e.quantity,u=e.phone,c=e.custom_one,l=e.custom_two,d=e.timer;if(""!=(t=t.trim()))if(""!=(o=o.trim())){var f="https://www.blockonomics.co/api/merchant_order/"+t;s?f+="?amount="+s:a&&(f+="?quantity="+a);var m={client_challenge:run_challenge(),emailid:o};r&&(m.name=r),i&&(m.address=i),u&&(m.phone=u),c&&(m["Custom Field1"]=c),l&&(m["Custom Field2"]=l),f&&m&&function(e,n,t){var o=new XMLHttpRequest;o.onreadystatechange=function(){4===o.readyState&&t(o)},o.open("POST",e),o.responseType="json",o.send(JSON.stringify(n))}(f,m,(function(e){if(200===e.status){var t=d||600;O.displayCheckout(n,e.response.satoshi,e.response.address,t)}else try{var o=e.response.error_code,r=e.response.message;r.length>100&&(r=r.substring(0,100)),O.displayError(n,"Unable to Generate Order. Error Code : "+o+". "+r)}catch(i){O.displayError(n,"Unable to Generate Order.")}}))}else O.displayError(n,"Please enter a valid email.");else O.displayError(n,"Missing uid from configuration.")}};return function(){var e=document.createElement("script");e.src="https://www.blockonomics.co/js/client-challenge.js",document.head.appendChild(e)}(),function(){var e=document.createElement("style");e.innerText="\n  @font-face {\n  font-family: 'blockonomics-icons';\n  src:  url('/fonts/blockonomics-icons.woff?bue15') format('woff');\n  font-weight: normal;\n  font-style: normal;\n  font-display: block;\n  }\n\n  [class^=\"blockonomics-icon-\"], [class*=\" blockonomics-icon-\"] {\n  /* use !important to prevent issues with browser extensions that change fonts */\n  font-family: 'blockonomics-icons' !important;\n  speak: never;\n  font-style: normal;\n  font-weight: normal;\n  font-variant: normal;\n  text-transform: none;\n  line-height: 1;\n\n  /* Better Font Rendering =========== */\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  }\n\n  .blockonomics-icon-close:before {\n  content: \"\\e901\";\n  }\n  .blockonomics-icon-copy:before {\n  content: \"\\e900\";\n  }\n  ",document.head.appendChild(e)}(),function(){var e=document.createElement("script");e.src="https://www.blockonomics.co/js/qrious.min.js",document.head.appendChild(e)}(),window.blockonomicsAsyncInit&&!window.blockonomicsAsyncInit.hasRun&&(window.blockonomicsAsyncInit(),window.blockonomicsAsyncInit.hasRun=!0),(0,i.jsxs)("form",{onSubmit:w,children:[(0,i.jsx)("input",{value:s,onChange:function(e){return u(e.target.value)},placeholder:"My Awesome Article!",className:a().input}),(0,i.jsx)("input",{type:"email",id:"email",placeholder:"Email Address",onInput:function(e){T(e.target.value)},style:{marginTop:"10px"}}),(0,i.jsx)("input",{type:"number",id:"other_amount",placeholder:"$5 minimum",onInput:function(e){_(e.target.value)},style:{marginTop:"10px"}}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Slug:"})," ",b]}),(0,i.jsxs)("div",{className:"App",children:[(0,i.jsxs)("div",{style:{display:"flex"},children:[(0,i.jsx)("button",{id:"pay",onClick:function(e){e.preventDefault(),C.widget({msg_area:"bitcoinpay",uuid:"4039ffb8b5e24ed2",email:A,amount:k})},className:"btn-blue",children:"Pay with Bitcoin"}),(0,i.jsx)("button",{type:"submit",disabled:!g,className:"btn-green",children:"Create New Post"})]}),(0,i.jsx)("div",{id:"bitcoinpay"})]})]})}},4850:function(e){e.exports={container:"Admin_container__3gjyU",hidden:"Admin_hidden__1KXRX",controls:"Admin_controls__1pv-o",input:"Admin_input__xQFe-",checkbox:"Admin_checkbox__G0v5P"}},6677:function(e,n,t){"use strict";t.d(n,{Kx:function(){return l},ky:function(){return d},Xi:function(){return f}});var o=t(7294),r=function(){return(r=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e}).apply(this,arguments)},i=function(e,n){var t;if(e.exists)return r({},e.data(),n?((t={})[n]=e.id,t):null)},s=function(e){return{loading:void 0===e||null===e,value:e}},a=function(e){var n=e?e():void 0,t=(0,o.useReducer)((function(e,n){switch(n.type){case"error":return r({},e,{error:n.error,loading:!1,value:void 0});case"reset":return s(n.defaultValue);case"value":return r({},e,{error:void 0,loading:!1,value:n.value});default:return e}}),s(n)),i=t[0],a=t[1];return{error:i.error,loading:i.loading,reset:function(){var n=e?e():void 0;a({type:"reset",defaultValue:n})},setError:function(e){a({type:"error",error:e})},setValue:function(e){a({type:"value",value:e})},value:i.value}},u=function(e,n){var t=!e&&!n,o=!!e&&!!n&&e.isEqual(n);return t||o},c=function(e,n){return function(e,n,t){var r=(0,o.useRef)(e);return(0,o.useEffect)((function(){n(e,r.current)||(r.current=e,t&&t())})),r}(e,u,n)},l=function(e,n){var t=a(),r=t.error,i=t.loading,s=t.reset,u=t.setError,l=t.setValue,d=t.value,f=c(e,s);return(0,o.useEffect)((function(){if(f.current){var e=n&&n.snapshotListenOptions?f.current.onSnapshot(n.snapshotListenOptions,l,u):f.current.onSnapshot(l,u);return function(){e()}}l(void 0)}),[f.current]),[d,i,r]},d=function(e,n){var t=a(),r=t.error,i=t.loading,s=t.reset,u=t.setError,l=t.setValue,d=t.value,f=c(e,s);return(0,o.useEffect)((function(){if(f.current){var e=n&&n.snapshotListenOptions?f.current.onSnapshot(n.snapshotListenOptions,l,u):f.current.onSnapshot(l,u);return function(){e()}}l(void 0)}),[f.current]),[d,i,r]},f=function(e,n){var t=n?n.idField:void 0,r=n?n.snapshotListenOptions:void 0,s=d(e,{snapshotListenOptions:r}),a=s[0],u=s[1],c=s[2];return[(0,o.useMemo)((function(){return a?i(a,t):void 0}),[a,t]),u,c]}}},function(e){e.O(0,[774,888,179],(function(){return n=5469,e(e.s=n);var n}));var n=e.O();_N_E=n}]);