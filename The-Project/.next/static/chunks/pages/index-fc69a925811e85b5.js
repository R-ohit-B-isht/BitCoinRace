(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8581:function(t,n,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return e(7926)}])},8965:function(t,n,e){"use strict";e.d(n,{Z:function(){return c}});var r=e(5893),s=e(1664),i=e(7294),o=e(9863);function c(t){return(0,i.useContext)(o.S).username?t.children:t.fallback||(0,r.jsx)(s.default,{href:"/enter",children:"You must be signed in"})}},5691:function(t,n,e){"use strict";e.d(n,{Z:function(){return d}});var r=e(5666),s=e.n(r),i=e(5893),o=e(8773),c=e(6677);function a(t,n,e,r,s,i,o){try{var c=t[i](o),a=c.value}catch(u){return void e(u)}c.done?n(a):Promise.resolve(a).then(r,s)}function u(t){return function(){var n=this,e=arguments;return new Promise((function(r,s){var i=t.apply(n,e);function o(t){a(i,r,s,o,c,"next",t)}function c(t){a(i,r,s,o,c,"throw",t)}o(void 0)}))}}function l(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=[],r=!0,s=!1,i=void 0;try{for(var o,c=t[Symbol.iterator]();!(r=(o=c.next()).done)&&(e.push(o.value),!n||e.length!==n);r=!0);}catch(a){s=!0,i=a}finally{try{r||null==c.return||c.return()}finally{if(s)throw i}}return e}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function d(t){var n=t.postRef,e=n.collection("hearts").doc(o.I8.currentUser.uid),r=l((0,c.ky)(e),1)[0],a=u(s().mark((function t(){var r,i;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.I8.currentUser.uid,(i=o.RZ.batch()).update(n,{heartCount:(0,o.nP)(1)}),i.set(e,{uid:r}),t.next=6,i.commit();case 6:case"end":return t.stop()}}),t)}))),d=u(s().mark((function t(){var r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=o.RZ.batch()).update(n,{heartCount:(0,o.nP)(-1)}),r.delete(e),t.next=5,r.commit();case 5:case"end":return t.stop()}}),t)})));return(null===r||void 0===r?void 0:r.exists)?(0,i.jsx)("button",{onClick:d,children:"\ud83d\udc94 Unheart"}):(0,i.jsx)("button",{onClick:a,children:"\ud83d\udc97 Heart"})}},6494:function(t,n,e){"use strict";e.d(n,{Z:function(){return s}});var r=e(5893);function s(t){return t.show?(0,r.jsx)("div",{className:"loader"}):null}},7950:function(t,n,e){"use strict";e.d(n,{Z:function(){return i}});var r=e(5893),s=e(9008);function i(t){var n=t.title,e=void 0===n?"Blockonomics Leaderboard":n,i=t.description,o=void 0===i?"A complete Next.js + Firebase + blockonomics bitcoin Leaderboard":i;return(0,r.jsxs)(s.default,{children:[(0,r.jsx)("title",{children:e}),(0,r.jsx)("meta",{name:"twitter:card",content:"summary"}),(0,r.jsx)("meta",{name:"twitter:site",content:"@R-ohit-B-isht"}),(0,r.jsx)("meta",{name:"twitter:title",content:e}),(0,r.jsx)("meta",{name:"twitter:description",content:o}),(0,r.jsx)("meta",{property:"og:title",content:e}),(0,r.jsx)("meta",{property:"og:description",content:o})]})}},2883:function(t,n,e){"use strict";e.d(n,{Z:function(){return c}});var r=e(5893),s=e(1664),i=e(724),o=e.n(i);function c(t){var n=t.post,e="number"===typeof(null===n||void 0===n?void 0:n.createdAt)?new Date(n.createdAt):n.createdAt.toDate();return(0,r.jsxs)("div",{className:"card",style:{width:"100%"},children:[(0,r.jsx)("h1",{children:null===n||void 0===n?void 0:n.title}),(0,r.jsxs)("span",{className:"text-sm",children:["Written by"," ",(0,r.jsx)(s.default,{href:"/".concat(n.username,"/"),children:(0,r.jsxs)("a",{className:"text-info",children:["@",n.username]})})," ","on ",e.toISOString()]}),(0,r.jsx)(o(),{children:null===n||void 0===n?void 0:n.content})]})}},8762:function(t,n,e){"use strict";e.d(n,{Z:function(){return i}});var r=e(5893),s=e(1664);function i(t){var n=t.posts,e=t.admin;return n?n.map((function(t){return(0,r.jsx)(o,{post:t,admin:e},t.slug)})):null}function o(t){var n=t.post,e=t.admin,i=void 0!==e&&e,o=null===n||void 0===n?void 0:n.content.trim().split(/\s+/g).length,c=(o/100+1).toFixed(0);return(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)(s.default,{href:"/".concat(n.username),children:(0,r.jsx)("a",{children:(0,r.jsxs)("strong",{children:["By @",n.username]})})}),(0,r.jsx)(s.default,{href:"/".concat(n.username,"/").concat(n.slug),children:(0,r.jsx)("h2",{children:(0,r.jsx)("a",{children:n.title})})}),(0,r.jsxs)("footer",{children:[(0,r.jsxs)("span",{children:[o," words. ",c," min read"]}),(0,r.jsxs)("span",{className:"push-left",children:["\ud83d\udc97 ",n.heartCount||0," Hearts"]})]}),i&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.default,{href:"/admin/".concat(n.slug),children:(0,r.jsx)("h3",{children:(0,r.jsx)("button",{className:"btn-blue",children:"Edit"})})}),n.published?(0,r.jsx)("p",{className:"text-success",children:"Live"}):(0,r.jsx)("p",{className:"text-danger",children:"Unpublished"})]})]})}},7926:function(t,n,e){"use strict";e.r(n),e.d(n,{__N_SSP:function(){return b},default:function(){return g}});var r=e(5666),s=e.n(r),i=e(5893),o=(e(8762),e(7950)),c=e(6494),a=e(8773),u=e(1142),l=e.n(u),d=e(5691),h=e(2883),f=e(8965),x=e(1664),p=e(9863),m=e(6677),v=e(7294);function j(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=[],r=!0,s=!1,i=void 0;try{for(var o,c=t[Symbol.iterator]();!(r=(o=c.next()).done)&&(e.push(o.value),!n||e.length!==n);r=!0);}catch(a){s=!0,i=a}finally{try{r||null==c.return||c.return()}finally{if(s)throw i}}return e}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function w(t){var n=a.RZ.doc("users/".concat(t.post.uid,"/posts/").concat(t.post.slug)),e=j((0,m.Xi)(n),1)[0]||t.post,r=(0,v.useContext)(p.S).user;return(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:l().alone,children:[(0,i.jsx)("img",{id:"crown",src:"/crown.svg",alt:"coroa",style:{width:"3rem",height:"3rem",border:"unset",padding:"unset",animation:"crown-animation 2s cubic-bezier(0.250, 0.460, 0.450, 0.940) both"}}),(0,i.jsx)("img",{src:"/hacker.png",alt:""}),(0,i.jsx)("p",{children:"Top Post: $".concat(e.amount)}),(0,i.jsx)("span",{className:l().revenue,children:"@".concat(e.username)})]}),(0,i.jsx)(h.Z,{post:e}),(0,i.jsxs)("aside",{className:"card",style:{display:"flex",justifyContent:"space-around"},children:[(0,i.jsx)("p",{children:(0,i.jsxs)("strong",{children:[e.heartCount||0," \ud83e\udd0d"]})}),(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-evenly",alignItems:"flex-end"},children:[(0,i.jsx)(f.Z,{fallback:(0,i.jsx)(x.default,{href:"/enter",children:(0,i.jsx)("button",{children:"\ud83d\udc97 Sign Up"})}),children:(0,i.jsx)(d.Z,{postRef:n})}),(null===r||void 0===r?void 0:r.uid)===e.uid&&(0,i.jsx)(x.default,{href:"/admin/".concat(e.slug),children:(0,i.jsx)("button",{className:"btn-blue",children:"Edit Post"})})]})]})]})}function y(t,n,e,r,s,i,o){try{var c=t[i](o),a=c.value}catch(u){return void e(u)}c.done?n(a):Promise.resolve(a).then(r,s)}var b=!0;function g(t){var n,e=(0,v.useState)(t.posts),r=e[0],u=e[1],l=(0,v.useState)(!1),d=l[0],h=l[1],f=(0,v.useState)(!1),x=f[0],p=f[1],m=(n=s().mark((function t(){var n,e,i,o;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return h(!0),n=r[r.length-1],e="number"===typeof n.createdAt?(0,a.Lg)(n.createdAt):n.createdAt,i=a.RZ.collectionGroup("posts").where("published","==",!0).orderBy("createdAt","desc").startAfter(e).limit(10),t.next=6,i.get();case 6:o=t.sent.docs.map((function(t){return t.data()})),u(r.concat(o)),h(!1),o.length<10&&p(!0);case 10:case"end":return t.stop()}}),t)})),function(){var t=this,e=arguments;return new Promise((function(r,s){var i=n.apply(t,e);function o(t){y(i,r,s,o,c,"next",t)}function c(t){y(i,r,s,o,c,"throw",t)}o(void 0)}))});return(0,i.jsxs)("main",{children:[(0,i.jsx)(o.Z,{title:"Home Page",description:"Get the latest posts on our site"}),(0,i.jsx)(w,{post:r[0]}),!d&&!x&&(0,i.jsx)("button",{onClick:m,children:"Refresh"}),(0,i.jsx)(c.Z,{show:d}),x&&"Already Up-to-date"]})}},1142:function(t){t.exports={alone:"Board_alone__3PAOG",crown:"Board_crown__26c0M","crown-animation":"Board_crown-animation__1_A1j",revenue:"Board_revenue__2DAEO"}},9008:function(t,n,e){t.exports=e(5443)}},function(t){t.O(0,[774,963,888,179],(function(){return n=8581,t(t.s=n);var n}));var n=t.O();_N_E=n}]);