(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888],{6099:function(t,e,n){"use strict";var r,i,o=n(655),a=n(4589),s=n(909),u=n(4594),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),h=new a.LL("app","Firebase",c),l="@firebase/app",f="[DEFAULT]",p=((i={})[l]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),d=new u.Yd("@firebase/app"),v=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=(0,a.p$)(t),this.container=new s.H0(e.name),this._addComponent(new s.wA("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){var n;void 0===e&&(e=f),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){d.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw h.create("app-deleted",{appName:this.name_})},t}();v.prototype.name&&v.prototype.options||v.prototype.delete||console.log("dc");var g=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"===typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var s=o.name;if("string"!==typeof s||!s)throw h.create("bad-app-name",{appName:String(s)});if((0,a.r3)(e,s))throw h.create("duplicate-app",{appName:s});var u=new t(n,o,r);return e[s]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=p[t])&&void 0!==r?r:t;n&&(i+="-"+n);var a=i.match(/\s|\//),u=e.match(/\s|\//);if(a||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return a&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),a&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void d.warn(c.join(" "))}o(new s.wA(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:u.Ub,onLog:function(t,e){if(null!==t&&"function"!==typeof t)throw h.create("invalid-log-argument");(0,u.Am)(t,e)},apps:null,SDK_VERSION:"8.10.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||f,!(0,a.r3)(e,t))throw h.create("no-app",{appName:t});return e[t]}function o(o){var s=o.name;if(n.has(s))return d.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?r[s]:null;if(n.set(s,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!==typeof t[s])throw h.create("invalid-app-argument",{appName:s});return t[s]()};void 0!==o.serviceProps&&(0,a.ZB)(u,o.serviceProps),r[s]=u,t.prototype[s]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,s).apply(this,o.multipleInstances?t:[])}}for(var c=0,l=Object.keys(e);c<l.length;c++){var f=l[c];e[f]._addComponent(o)}return"PUBLIC"===o.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(v);return e.INTERNAL=(0,o.pi)((0,o.pi)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){(0,a.ZB)(e,t)},createSubscribe:a.ne,ErrorFactory:a.LL,deepExtend:a.ZB}),e}(),m=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null===e||void 0===e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if((0,a.jU)()&&void 0!==self.firebase){d.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var y=self.firebase.SDK_VERSION;y&&y.indexOf("LITE")>=0&&d.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=g.initializeApp;g.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,a.UG)()&&d.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var w=g;!function(t,e){t.INTERNAL.registerComponent(new s.wA("platform-logger",(function(t){return new m(t)}),"PRIVATE")),t.registerVersion(l,"0.6.30",e),t.registerVersion("fire-js","")}(w),e.Z=w},909:function(t,e,n){"use strict";n.d(e,{wA:function(){return o},H0:function(){return u}});var r=n(655),i=n(4589),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),a="[DEFAULT]",s=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.BH;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null===t||void 0===t?void 0:t.identifier),r=null!==(e=null===t||void 0===t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:a})}catch(f){}try{for(var i=(0,r.XA)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=(0,r.CR)(o.value,2),u=s[0],c=s[1],h=this.normalizeInstanceIdentifier(u);try{var l=this.getOrInitializeService({instanceIdentifier:h});c.resolve(l)}catch(f){}}}catch(p){e={error:p}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=a),this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return(0,r.mG)(this,void 0,void 0,(function(){var t;return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all((0,r.ev)((0,r.ev)([],(0,r.CR)(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),(0,r.CR)(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=a),this.instances.has(t)},t.prototype.getOptions=function(t){return void 0===t&&(t=a),this.instancesOptions.get(t)||{}},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.options,o=void 0===i?{}:i,a=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(a))throw Error(this.name+"("+a+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var s=this.getOrInitializeService({instanceIdentifier:a,options:o});try{for(var u=(0,r.XA)(this.instancesDeferred.entries()),c=u.next();!c.done;c=u.next()){var h=(0,r.CR)(c.value,2),l=h[0],f=h[1];a===this.normalizeInstanceIdentifier(l)&&f.resolve(s)}}catch(p){e={error:p}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return s},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i,o=this.onInitCallbacks.get(e);if(o)try{for(var a=(0,r.XA)(o),s=a.next();!s.done;s=a.next()){var u=s.value;try{u(t,e)}catch(c){}}}catch(h){n={error:h}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===a?void 0:e),options:i}),this.instances.set(n,o),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(s){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=a),this.component?this.component.multipleInstances?t:a:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}();var u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new s(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},4594:function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var i;n.d(e,{in:function(){return o},Yd:function(){return l},Ub:function(){return f},Am:function(){return p}});var o,a=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(o||(o={}));var s={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,c=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),h=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),a=c[e];if(!a)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[a].apply(console,r(["["+o+"]  "+t.name+":"],n))}},l=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=h,this._userLogHandler=null,a.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"===typeof t?s[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],t)),this._logHandler.apply(this,r([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],t)),this._logHandler.apply(this,r([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],t)),this._logHandler.apply(this,r([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],t)),this._logHandler.apply(this,r([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],t)),this._logHandler.apply(this,r([this,o.ERROR],t))},t}();function f(t){a.forEach((function(e){e.setLogLevel(t)}))}function p(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=s[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=i.map((function(t){if(null==t)return null;if("string"===typeof t)return t;if("number"===typeof t||"boolean"===typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!==r&&void 0!==r?r:e.logLevel)&&t({level:o[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=a;r<i.length;r++){n(i[r])}}},4589:function(t,e,n){"use strict";n.d(e,{BH:function(){return c},LL:function(){return I},ZR:function(){return _},r3:function(){return S},Sg:function(){return h},ne:function(){return A},p$:function(){return s},ZB:function(){return u},m9:function(){return R},z$:function(){return l},jU:function(){return d},ru:function(){return v},d:function(){return m},w1:function(){return y},uI:function(){return f},UG:function(){return p},b$:function(){return g},G6:function(){return w},Mn:function(){return b}});var r=n(655),i=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296===(64512&i)&&r+1<t.length&&56320===(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},o={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,l=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,p=63&c;u||(p=64,a||(f=64)),r.push(n[h],n[l],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(i(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var h=a<<4&240|s>>2;if(r.push(h),64!==u){var l=s<<6&192|u;r.push(l)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},a=function(t){return function(t){var e=i(t);return o.encodeByteArray(e,!0)}(t).replace(/\./g,"")};function s(t){return u(void 0,t)}function u(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=u(t[n],e[n]));return t}var c=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"===typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function h(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var s=(0,r.pi)({iss:"https://securetoken.google.com/"+n,aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[a(JSON.stringify({alg:"none",type:"JWT"})),a(JSON.stringify(s)),""].join(".")}function l(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function f(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(l())}function p(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}function d(){return"object"===typeof self&&self.self===self}function v(){var t="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof t&&void 0!==t.id}function g(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function m(){return l().indexOf("Electron/")>=0}function y(){var t=l();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function b(){return l().indexOf("MSAppHost/")>=0}function w(){return!p()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}var _=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,I.prototype.create),o}return(0,r.ZT)(e,t),e}(Error),I=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?T(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new _(i,s,r);return u},t}();function T(t,e){return t.replace(E,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var E=/\{\$([^}]+)}/g;function S(t,e){return Object.prototype.hasOwnProperty.call(t,e)}!function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"===typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=h^u&(c^h),a=1518500249):(o=u^c^h,a=1859775393):r<60?(o=u&c|h&(u|c),a=2400959708):(o=u^c^h,a=3395469782);i=(s<<5|s>>>27)+o+l+a+n[r]&4294967295;l=h,h=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"===typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t}}();function A(t,e){var n=new k(t,e);return n.subscribe.bind(n)}var k=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!==typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"===typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=N),void 0===r.error&&(r.error=N),void 0===r.complete&&(r.complete=N);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function N(){}function R(t){return t&&t._delegate?t._delegate:t}},5503:function(t,e,n){"use strict";n.d(e,{Z:function(){return r.Z}});var r=n(6099),i="8.10.1";r.Z.registerVersion("firebase",i,"app"),r.Z.SDK_VERSION=i},1780:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return n(5376)}])},9863:function(t,e,n){"use strict";n.d(e,{S:function(){return r}});var r=(0,n(7294).createContext)({user:null,username:null})},8773:function(t,e,n){"use strict";n.d(e,{mC:function(){return Tv},I8:function(){return gv},RZ:function(){return yv},Lg:function(){return wv},qV:function(){return mv},nP:function(){return _v},Bt:function(){return bv},tO:function(){return Iv}});n(5666);var r=n(5503),i=n(6099);(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var r=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g,t];for(var e=0;e<t.length;++e){var r=t[e];if(r&&r.Math==Math)return r}return globalThis}(this);function o(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function a(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:o(t)}}!function(t,n){if(n){var i=r;t=t.split(".");for(var o=0;o<t.length-1;o++){var a=t[o];a in i||(i[a]={}),i=i[a]}(n=n(o=i[t=t[t.length-1]]))!=o&&null!=n&&e(i,t,{configurable:!0,writable:!0,value:n})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function n(){this.a=null}function i(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var o=r.setTimeout;n.prototype.c=function(t){o(t,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(g){this.f(g)}}}this.a=null},n.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(n){return void this.g(n)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)s.b(this.a[t]);this.a=null}};var s=new n;return e.prototype.s=function(t){var e=this.f();t.Ra(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(g){n.reject(g)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(Un){o(Un)}}:e}var i,o,a=new e((function(t,e){i=t,o=e}));return this.Ra(r(t,i),r(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Ra=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},e.resolve=i,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=a(t),o=r.next();!o.done;o=r.next())i(o.value).Ra(e,n)}))},e.all=function(t){var n=a(t),r=n.next();return r.done?i([]):new e((function(t,e){function o(e){return function(n){a[e]=n,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,i(r.value).Ra(o(a.length-1),e),r=n.next()}while(!r.done)}))},e}));var s=s||{},u=this||self,c=/^[\w+/_-]+[=]{0,2}$/,h=null;function l(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&c.test(t)?t:""}function f(){}function p(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function d(t){var e=p(t);return"array"==e||"object"==e&&"number"==typeof t.length}function v(t){return"function"==p(t)}function m(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function y(t){return Object.prototype.hasOwnProperty.call(t,b)&&t[b]||(t[b]=++w)}var b="closure_uid_"+(1e9*Math.random()>>>0),w=0;function _(t,e,n){return t.call.apply(t.bind,arguments)}function I(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function T(t,e,n){return(T=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?_:I).apply(null,arguments)}function E(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var S=Date.now;function A(t,e){function n(){}n.prototype=e.prototype,t.bb=e.prototype,t.prototype=new n,t.prototype.constructor=t}function k(t){return t}function N(t,e,n){this.code=C+t,this.message=e||O[t]||"",this.a=n||null}function R(t){var e=t&&t.code;return e?new N(e.substring(C.length),t.message,t.serverResponse):null}A(N,Error),N.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},N.prototype.toJSON=function(){return this.w()};var D,C="auth/",O={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},x={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function P(t){for(var e in x)if(x[e].id===t)return{firebaseEndpoint:(t=x[e]).Ua,secureTokenEndpoint:t.$a,identityPlatformEndpoint:t.Xa};return null}function L(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function M(t){if(Error.captureStackTrace)Error.captureStackTrace(this,M);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function U(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");M.call(this,n+t[r])}function F(t,e){throw new U("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function j(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function V(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function q(){this.b=this.a=null}D=P("__EID__")?"__EID__":void 0,A(M,Error),M.prototype.name="CustomError",A(U,M),U.prototype.name="AssertionError",j.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var B=new j((function(){return new K}),(function(t){t.reset()}));function G(){var t=_e,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function K(){this.next=this.b=this.a=null}q.prototype.add=function(t,e){var n=B.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},K.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},K.prototype.reset=function(){this.next=this.b=this.a=null};var H=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},z=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"===typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var W=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"===typeof t?t.split(""):t,a=0;a<n;a++)if(a in o){var s=o[a];e.call(void 0,s,a,t)&&(r[i++]=s)}return r},J=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"===typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},X=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function Q(t,e){return 0<=H(t,e)}function Z(t,e){var n;return(n=0<=(e=H(t,e)))&&Array.prototype.splice.call(t,e,1),n}function Y(t,e){!function(t,e){for(var n="string"===typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&1==Array.prototype.splice.call(t,r,1).length&&0}))}function $(t){return Array.prototype.concat.apply([],arguments)}function tt(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var et,nt=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},rt=/&/g,it=/</g,ot=/>/g,at=/"/g,st=/'/g,ut=/\x00/g,ct=/[\x00&<>"']/;function ht(t,e){return-1!=t.indexOf(e)}function lt(t,e){return t<e?-1:t>e?1:0}t:{var ft=u.navigator;if(ft){var pt=ft.userAgent;if(pt){et=pt;break t}}et=""}function dt(t){return ht(et,t)}function vt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function gt(t){for(var e in t)return!1;return!0}function mt(t){var e,n={};for(e in t)n[e]=t[e];return n}var yt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function bt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<yt.length;o++)n=yt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function wt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||u).Element&&r.Location){var i=r;break t}}catch(a){}i=null}if(i&&"undefined"!=typeof i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(m(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(a){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;F("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function _t(t,e){this.a=t===St&&e||"",this.b=Et}function It(t){return t instanceof _t&&t.constructor===_t&&t.b===Et?t.a:(F("expected object of type Const, got '"+t+"'"),"type_error:Const")}_t.prototype.ta=!0,_t.prototype.sa=function(){return this.a},_t.prototype.toString=function(){return"Const{"+this.a+"}"};var Tt,Et={},St={};function At(){if(void 0===Tt){var t=null,e=u.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:k,createScript:k,createScriptURL:k})}catch(n){u.console&&u.console.error(n.message)}Tt=t}else Tt=t}return Tt}function kt(t,e){this.a=e===Ot?t:""}function Nt(t){return t instanceof kt&&t.constructor===kt?t.a:(F("expected object of type TrustedResourceUrl, got '"+t+"' of type "+p(t)),"type_error:TrustedResourceUrl")}function Rt(t,e){var n=It(t);if(!Ct.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=At();return new kt(t=e?e.createScriptURL(t):t,Ot)}(t=n.replace(Dt,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof _t?It(t):encodeURIComponent(String(t))})))}kt.prototype.ta=!0,kt.prototype.sa=function(){return this.a.toString()},kt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Dt=/%{(\w+)}/g,Ct=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Ot={};function xt(t,e){this.a=e===Vt?t:""}function Pt(t){return t instanceof xt&&t.constructor===xt?t.a:(F("expected object of type SafeUrl, got '"+t+"' of type "+p(t)),"type_error:SafeUrl")}xt.prototype.ta=!0,xt.prototype.sa=function(){return this.a.toString()},xt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Lt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Mt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Ut=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Ft(t){if(t instanceof xt)return t;if(t="object"==typeof t&&t.ta?t.sa():String(t),Ut.test(t))t=new xt(t,Vt);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Mt);t=e&&Lt.test(e[1])?new xt(t,Vt):null}return t}function jt(t){return t instanceof xt?t:(t="object"==typeof t&&t.ta?t.sa():String(t),Ut.test(t)||(t="about:invalid#zClosurez"),new xt(t,Vt))}var Vt={},qt=new xt("about:invalid#zClosurez",Vt);function Bt(t,e,n){this.a=n===Gt?t:""}Bt.prototype.ta=!0,Bt.prototype.sa=function(){return this.a.toString()},Bt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Gt={};function Kt(t,e,n,r){return t=t instanceof xt?t:jt(t),e=e||u,n=n instanceof _t?It(n):n||"",e.open(Pt(t),n,r,void 0)}function Ht(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function zt(t){return ct.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(rt,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(it,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(ot,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(at,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(st,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(ut,"&#0;"))),t}function Wt(t){return Wt[" "](t),t}Wt[" "]=f;var Jt,Xt=dt("Opera"),Qt=dt("Trident")||dt("MSIE"),Zt=dt("Edge"),Yt=Zt||Qt,$t=dt("Gecko")&&!(ht(et.toLowerCase(),"webkit")&&!dt("Edge"))&&!(dt("Trident")||dt("MSIE"))&&!dt("Edge"),te=ht(et.toLowerCase(),"webkit")&&!dt("Edge");function ee(){var t=u.document;return t?t.documentMode:void 0}t:{var ne="",re=function(){var t=et;return $t?/rv:([^\);]+)(\)|;)/.exec(t):Zt?/Edge\/([\d\.]+)/.exec(t):Qt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):te?/WebKit\/(\S+)/.exec(t):Xt?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(re&&(ne=re?re[1]:""),Qt){var ie=ee();if(null!=ie&&ie>parseFloat(ne)){Jt=String(ie);break t}}Jt=ne}var oe,ae={};function se(t){return function(t,e){var n=ae;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=nt(String(Jt)).split("."),r=nt(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=lt(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||lt(0==a[2].length,0==s[2].length)||lt(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}if(u.document&&Qt){var ue=ee();oe=ue||(parseInt(Jt,10)||void 0)}else oe=void 0;var ce=oe;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(da){}var he=!Qt||9<=Number(ce);function le(t){var e=document;return"string"===typeof t?e.getElementById(t):t}function fe(t,e){vt(e,(function(e,n){e&&"object"==typeof e&&e.ta&&(e=e.sa()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:ve.hasOwnProperty(n)?t.setAttribute(ve[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var pe,de,ve={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function ge(t,e,n){function r(n){n&&e.appendChild("string"===typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!d(o)||m(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(m(o)){var a="function"==typeof o.item||"string"==typeof o.item;break t}if(v(o)){a="function"==typeof o.item;break t}}a=!1}z(a?tt(o):o,r)}}}function me(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ye(t){u.setTimeout((function(){throw t}),0)}function be(t,e){de||function(){if(u.Promise&&u.Promise.resolve){var t=u.Promise.resolve(void 0);de=function(){t.then(Ie)}}else de=function(){var t=Ie;!v(u.setImmediate)||u.Window&&u.Window.prototype&&!dt("Edge")&&u.Window.prototype.setImmediate==u.setImmediate?(pe||(pe=function(){var t=u.MessageChannel;if("undefined"===typeof t&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!dt("Presto")&&(t=function(){var t=me(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=T((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),"undefined"!==typeof t&&!dt("Trident")&&!dt("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Hb;n.Hb=null,t()}},function(t){r.next={Hb:t},r=r.next,e.port2.postMessage(0)}}return function(t){u.setTimeout(t,0)}}()),pe(t)):u.setImmediate(t)}}(),we||(de(),we=!0),_e.add(t,e)}var we=!1,_e=new q;function Ie(){for(var t;t=G();){try{t.a.call(t.b)}catch(e){ye(e)}V(B,t)}we=!1}function Te(t,e){if(this.a=Ee,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=f)try{var n=this;t.call(e,(function(t){Ue(n,Se,t)}),(function(t){if(!(t instanceof Ke))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(Mp){}Ue(n,Ae,t)}))}catch(r){Ue(this,Ae,r)}}var Ee=0,Se=2,Ae=3;function ke(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}ke.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ne=new j((function(){return new ke}),(function(t){t.reset()}));function Re(t,e,n){var r=Ne.get();return r.g=t,r.b=e,r.f=n,r}function De(t){if(t instanceof Te)return t;var e=new Te(f);return Ue(e,Se,t),e}function Ce(t){return new Te((function(e,n){n(t)}))}function Oe(t,e,n){Fe(t,e,n,null)||be(E(e,t))}function xe(t){return new Te((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Qb:!0,value:o}:{Qb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Oe(t[o],E(i,o,!0),E(i,o,!1));else e(r)}))}function Pe(t,e){if(t.a==Ee)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,a=n.b;a&&(a.c||(r++,a.a==t&&(i=a),!(i&&1<r)));a=a.next)i||(o=a);i&&(n.a==Ee&&1==r?Pe(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Ve(n),qe(n,i,Ae,e)))}t.c=null}else Ue(t,Ae,e)}function Le(t,e){t.b||t.a!=Se&&t.a!=Ae||je(t),t.f?t.f.next=e:t.b=e,t.f=e}function Me(t,e,n,r){var i=Re(null,null,null);return i.a=new Te((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(g){o(g)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Ke?o(e):t(i)}catch(g){o(g)}}:o})),i.a.c=t,Le(t,i),i.a}function Ue(t,e,n){t.a==Ee&&(t===n&&(e=Ae,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Fe(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,je(t),e!=Ae||n instanceof Ke||function(t,e){t.g=!0,be((function(){t.g&&Ge.call(null,e)}))}(t,n)))}function Fe(t,e,n,r){if(t instanceof Te)return Le(t,Re(e||f,n||null,r)),!0;if(L(t))return t.then(e,n,r),!0;if(m(t))try{var i=t.then;if(v(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}function a(t){s||(s=!0,n.call(i,t))}var s=!1;try{e.call(t,a,o)}catch(u){o(u)}}(t,i,e,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function je(t){t.h||(t.h=!0,be(t.gc,t))}function Ve(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function qe(t,e,n,r){if(n==Ae&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Be(e,n,r);else try{e.c?e.g.call(e.f):Be(e,n,r)}catch(Mp){Ge.call(null,Mp)}V(Ne,e)}function Be(t,e,n){e==Se?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}Te.prototype.then=function(t,e,n){return Me(this,v(t)?t:null,v(e)?e:null,n)},Te.prototype.$goog_Thenable=!0,(t=Te.prototype).oa=function(t,e){return(t=Re(t,t,e)).c=!0,Le(this,t),this},t.o=function(t,e){return Me(this,null,t,e)},t.cancel=function(t){if(this.a==Ee){var e=new Ke(t);be((function(){Pe(this,e)}),this)}},t.$c=function(t){this.a=Ee,Ue(this,Se,t)},t.ad=function(t){this.a=Ee,Ue(this,Ae,t)},t.gc=function(){for(var t;t=Ve(this);)qe(this,t,this.a,this.i);this.h=!1};var Ge=ye;function Ke(t){M.call(this,t)}function He(){0!=ze&&(We[y(this)]=this),this.ya=this.ya,this.pa=this.pa}A(Ke,M),Ke.prototype.name="cancel";var ze=0,We={};function Je(t){if(!t.ya&&(t.ya=!0,t.Da(),0!=ze)){var e=y(t);if(0!=ze&&t.pa&&0<t.pa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete We[e]}}He.prototype.ya=!1,He.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var Xe=Object.freeze||function(t){return t},Qe=!Qt||9<=Number(ce),Ze=Qt&&!se("9"),Ye=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{u.addEventListener("test",f,e),u.removeEventListener("test",f,e)}catch(n){}return t}();function $e(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function tn(t,e){if($e.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if($t){t:{try{Wt(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:en[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}$e.prototype.preventDefault=function(){this.defaultPrevented=!0},A(tn,$e);var en=Xe({2:"touch",3:"pen",4:"mouse"});tn.prototype.preventDefault=function(){tn.bb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ze)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},tn.prototype.g=function(){return this.a};var nn="closure_listenable_"+(1e6*Math.random()|0),rn=0;function on(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Wa=i,this.key=++rn,this.wa=this.Qa=!1}function an(t){t.wa=!0,t.listener=null,t.proxy=null,t.src=null,t.Wa=null}function sn(t){this.src=t,this.a={},this.b=0}function un(t,e){var n=e.type;n in t.a&&Z(t.a[n],e)&&(an(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function cn(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.wa&&o.listener==e&&o.capture==!!n&&o.Wa==r)return i}return-1}sn.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=cn(t,e,r,i);return-1<a?(e=t[a],n||(e.Qa=!1)):((e=new on(e,this.src,o,!!r,i)).Qa=n,t.push(e)),e};var hn="closure_lm_"+(1e6*Math.random()|0),ln={};function fn(t,e,n,r,i){if(r&&r.once)dn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)fn(t,e[o],n,r,i);else n=Tn(n),t&&t[nn]?Sn(t,e,n,m(r)?!!r.capture:!!r,i):pn(t,e,n,!1,r,i)}function pn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=m(i)?!!i.capture:!!i,s=_n(t);if(s||(t[hn]=s=new sn(t)),!(n=s.add(e,n,r,a,o)).proxy){if(r=function(){var t=wn,e=Qe?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Ye||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(mn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}0}}function dn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)dn(t,e[o],n,r,i);else n=Tn(n),t&&t[nn]?An(t,e,n,m(r)?!!r.capture:!!r,i):pn(t,e,n,!0,r,i)}function vn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)vn(t,e[o],n,r,i);else r=m(r)?!!r.capture:!!r,n=Tn(n),t&&t[nn]?(t=t.v,(e=String(e).toString())in t.a&&(-1<(n=cn(o=t.a[e],n,r,i))&&(an(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=_n(t))&&(e=t.a[e.toString()],t=-1,e&&(t=cn(e,n,r,i)),(n=-1<t?e[t]:null)&&gn(n))}function gn(t){if("number"!==typeof t&&t&&!t.wa){var e=t.src;if(e&&e[nn])un(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(mn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=_n(e))?(un(n,t),0==n.b&&(n.src=null,e[hn]=null)):an(t)}}}function mn(t){return t in ln?ln[t]:ln[t]="on"+t}function yn(t,e,n,r){var i=!0;if((t=_n(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.wa&&(o=bn(o,r),i=i&&!1!==o)}return i}function bn(t,e){var n=t.listener,r=t.Wa||t.src;return t.Qa&&gn(t),n.call(r,e)}function wn(t,e){if(t.wa)return!0;if(!Qe){if(!e)t:{e=["window","event"];for(var n=u,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new tn(r=e,this),n=!0,!(0>r.keyCode||void 0!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(a){i=!0}(i||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=yn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=yn(r[i],t,!1,e),n=n&&o}return n}return bn(t,new tn(e,this))}function _n(t){return(t=t[hn])instanceof sn?t:null}var In="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tn(t){return v(t)?t:(t[In]||(t[In]=function(e){return t.handleEvent(e)}),t[In])}function En(){He.call(this),this.v=new sn(this),this.bc=this,this.hb=null}function Sn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function An(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function kn(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.wa&&a.capture==n){var s=a.listener,u=a.Wa||a.src;a.Qa&&un(t.v,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}function Nn(t,e,n){if(v(t))n&&(t=T(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=T(t.handleEvent,t)}return 2147483647<Number(e)?-1:u.setTimeout(t,e||0)}function Rn(t){var e=null;return new Te((function(n,r){-1==(e=Nn((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw u.clearTimeout(e),t}))}function Dn(t){if(t.X&&"function"==typeof t.X)return t.X();if("string"===typeof t)return t.split("");if(d(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Cn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.X||"function"!=typeof t.X){if(d(t)||"string"===typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function On(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof On)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function xn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Pn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Pn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Pn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}A(En,He),En.prototype[nn]=!0,En.prototype.addEventListener=function(t,e,n,r){fn(this,t,e,n,r)},En.prototype.removeEventListener=function(t,e,n,r){vn(this,t,e,n,r)},En.prototype.dispatchEvent=function(t){var e,n=this.hb;if(n)for(e=[];n;n=n.hb)e.push(n);n=this.bc;var r=t.type||t;if("string"===typeof t)t=new $e(t,n);else if(t instanceof $e)t.target=t.target||n;else{var i=t;bt(t=new $e(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.b=e[o];i=kn(a,r,!0,t)&&i}if(i=kn(a=t.b=n,r,!0,t)&&i,i=kn(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=kn(a=t.b=e[o],r,!1,t)&&i;return i},En.prototype.Da=function(){if(En.bb.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)an(n[r]);delete e.a[t],e.b--}}this.hb=null},(t=On.prototype).X=function(){xn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return xn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Pn(this.b,t)?this.b[t]:e},t.set=function(t,e){Pn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Ln=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Mn(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Mn?(this.i=void 0!==e?e:t.i,Fn(this,t.c),this.l=t.l,this.a=t.a,jn(this,t.g),this.f=t.f,Vn(this,or(t.b)),this.h=t.h):t&&(n=String(t).match(Ln))?(this.i=!!e,Fn(this,n[1]||"",!0),this.l=Hn(n[2]||""),this.a=Hn(n[3]||"",!0),jn(this,n[4]),this.f=Hn(n[5]||"",!0),Vn(this,n[6]||"",!0),this.h=Hn(n[7]||"")):(this.i=!!e,this.b=new $n(null,this.i))}function Fn(t,e,n){t.c=n?Hn(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function jn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Vn(t,e,n){e instanceof $n?(t.b=e,function(t,e){e&&!t.f&&(tr(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(nr(this,e),ir(this,n,t))}),t)),t.f=e}(t.b,t.i)):(n||(e=zn(e,Zn)),t.b=new $n(e,t.i))}function qn(t,e,n){t.b.set(e,n)}function Bn(t,e){return t.b.get(e)}function Gn(t){return t instanceof Mn?new Mn(t):new Mn(t,void 0)}function Kn(t,e,n,r){var i=new Mn(null,void 0);return t&&Fn(i,t),e&&(i.a=e),n&&jn(i,n),r&&(i.f=r),i}function Hn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function zn(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,Wn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Wn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Mn.prototype.toString=function(){var t=[],e=this.c;e&&t.push(zn(e,Jn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(zn(e,Jn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(zn(n,"/"==n.charAt(0)?Qn:Xn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",zn(n,Yn)),t.join("")},Mn.prototype.resolve=function(t){var e=new Mn(this),n=!!t.c;n?Fn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)jn(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ht(i,"./")||ht(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?Vn(e,or(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Jn=/[#\/\?@]/g,Xn=/[#\?:]/g,Qn=/[#\?]/g,Zn=/[#\?@]/g,Yn=/#/g;function $n(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function tr(t){t.a||(t.a=new On,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function er(t){var e=Cn(t);if("undefined"==typeof e)throw Error("Keys are undefined");var n=new $n(null,void 0);t=Dn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?ir(n,i,o):n.add(i,o)}return n}function nr(t,e){tr(t),e=ar(t,e),Pn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Pn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&xn(t)))}function rr(t,e){return tr(t),e=ar(t,e),Pn(t.a.b,e)}function ir(t,e,n){nr(t,e),0<n.length&&(t.c=null,t.a.set(ar(t,e),tt(n)),t.b+=n.length)}function or(t){var e=new $n;return e.c=t.c,t.a&&(e.a=new On(t.a),e.b=t.b),e}function ar(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function sr(t){var e=[];return cr(new ur,t,e),e.join("")}function ur(){}function cr(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),cr(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&("function"!=typeof(o=e[r])&&(n.push(i),fr(r,n),n.push(":"),cr(t,o,n),i=","));return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":fr(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=$n.prototype).add=function(t,e){tr(this),this.c=null,t=ar(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){tr(this),this.a.forEach((function(n,r){z(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.Y=function(){tr(this);for(var t=this.a.X(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.X=function(t){tr(this);var e=[];if("string"===typeof t)rr(this,t)&&(e=$(e,this.a.get(ar(this,t))));else{t=this.a.X();for(var n=0;n<t.length;n++)e=$(e,t[n])}return e},t.set=function(t,e){return tr(this),this.c=null,rr(this,t=ar(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.X(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.X(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var hr={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},lr=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function fr(t,e){e.push('"',t.replace(lr,(function(t){var e=hr[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),hr[t]=e),e})),'"')}function pr(){var t=xr();return Qt&&!!ce&&11==ce||/Edge\/\d+/.test(t)}function dr(){return u.window&&u.window.location.href||self&&self.location&&self.location.href||""}function vr(t,e){e=e||u.window;var n="about:blank";t&&(n=Pt(Ft(t)||qt)),e.location.href=n}function gr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<gr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function mr(t){return!!((t=(t||xr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function yr(t){t=t||u.window;try{t.close()}catch(e){}}function br(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=xr().toLowerCase(),r&&(e.target=r,ht(n,"crios/")&&(e.target="_blank")),Dr(xr())==Nr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof xt?n:Ft("undefined"!=typeof n.href?n.href:String(n))||qt,n=t.target||n.target,i=[],t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");if((dt("iPhone")&&!dt("iPod")&&!dt("iPad")||dt("iPad")||dt("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(wt(a=me(document,"A"),"HTMLAnchorElement"),e=e instanceof xt?e:jt(e),a.href=Pt(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=Kt("",r,n,a),t=Pt(e),a&&(Yt&&ht(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+zt(t)+'">',t=new Bt(t=(r=At())?r.createHTML(t):t,null,Gt),r=a.document)&&(r.write(function(t){return t instanceof Bt&&t.constructor===Bt?t.a:(F("expected object of type SafeHtml, got '"+t+"' of type "+p(t)),"type_error:SafeHtml")}(t)),r.close())):(a=Kt(e,r,n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(s){}return a}var wr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_r=/^[^@]+@[^@]+$/;function Ir(){var t=null;return new Te((function(e){"complete"==u.document.readyState?e():(t=function(){e()},dn(window,"load",t))})).o((function(e){throw vn(window,"load",t),e}))}function Tr(t){return t=t||xr(),!("file:"!==Fr()&&"ionic:"!==Fr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Er(){var t=u.window;try{return!(!t||t==t.top)}catch(e){return!1}}function Sr(){return"undefined"!==typeof u.WorkerGlobalScope&&"function"===typeof u.importScripts}function Ar(){return i.Z.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":i.Z.INTERNAL.hasOwnProperty("node")?"Node":Sr()?"Worker":"Browser"}function kr(){var t=Ar();return"ReactNative"===t||"Node"===t}var Nr="Firefox",Rr="Chrome";function Dr(t){var e=t.toLowerCase();return ht(e,"opera/")||ht(e,"opr/")||ht(e,"opios/")?"Opera":ht(e,"iemobile")?"IEMobile":ht(e,"msie")||ht(e,"trident/")?"IE":ht(e,"edge/")?"Edge":ht(e,"firefox/")?Nr:ht(e,"silk/")?"Silk":ht(e,"blackberry")?"Blackberry":ht(e,"webos")?"Webos":!ht(e,"safari/")||ht(e,"chrome/")||ht(e,"crios/")||ht(e,"android")?!ht(e,"chrome/")&&!ht(e,"crios/")||ht(e,"edge/")?ht(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Rr:"Safari"}var Cr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Or(t,e){e=e||[];var n,r=[],i={};for(n in Cr)i[Cr[n]]=!0;for(n=0;n<e.length;n++)"undefined"!==typeof i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=Ar())?r=Dr(i=xr()):"Worker"===r&&(r=Dr(i=xr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function xr(){return u.navigator&&u.navigator.userAgent||""}function Pr(t,e){t=t.split("."),e=e||u;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Lr(){try{var t=u.localStorage,e=Gr();if(t)return t.setItem(e,"1"),t.removeItem(e),!pr()||!!u.indexedDB}catch(n){return Sr()&&!!u.indexedDB}return!1}function Mr(){return(Ur()||"chrome-extension:"===Fr()||Tr())&&!kr()&&Lr()&&!Sr()}function Ur(){return"http:"===Fr()||"https:"===Fr()}function Fr(){return u.location&&u.location.protocol||null}function jr(t){return!mr(t=t||xr())&&Dr(t)!=Nr}function Vr(t){return"undefined"===typeof t?null:sr(t)}function qr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Br(t){if(null!==t)return JSON.parse(t)}function Gr(t){return t||Math.floor(1e9*Math.random()).toString()}function Kr(t){return"Safari"!=Dr(t=t||xr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Hr(){var t=u.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function zr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=xr(),e=Ar(),this.b=mr(t)||"ReactNative"===e}function Wr(){var t=u.document;return!t||"undefined"===typeof t.visibilityState||"visible"==t.visibilityState}function Jr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(n){}return null}function Xr(){return!(!Pr("fireauth.oauthhelper",u)&&!Pr("fireauth.iframe",u))}zr.prototype.get=function(){var t=u.navigator;return!t||"boolean"!==typeof t.onLine||!Ur()&&"chrome-extension:"!==Fr()&&"undefined"===typeof t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Qr,Zr={};function Yr(t){Zr[t]||(Zr[t]=!0,"undefined"!==typeof console&&"function"===typeof console.warn&&console.warn(t))}try{var $r={};Object.defineProperty($r,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty($r,"abcd",{configurable:!0,enumerable:!0,value:2}),Qr=2==$r.abcd}catch(da){Qr=!1}function ti(t,e,n){Qr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function ei(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&ti(t,n,e[n])}function ni(t){var e={};return ei(e,t),e}function ri(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)ti(e,n,ri(t[n]));return e}function ii(t){var e=t&&(t[ci]?"phone":null);if(!(e&&t&&t[ui]))throw new N("internal-error","Internal assert: invalid MultiFactorInfo object");ti(this,"uid",t[ui]),ti(this,"displayName",t[ai]||null);var n=null;t[si]&&(n=new Date(t[si]).toUTCString()),ti(this,"enrollmentTime",n),ti(this,"factorId",e)}function oi(t){try{var e=new hi(t)}catch(n){e=null}return e}ii.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ai="displayName",si="enrolledAt",ui="mfaEnrollmentId",ci="phoneInfo";function hi(t){ii.call(this,t),ti(this,"phoneNumber",t[ci])}function li(t){var e={},n=t[vi],r=t[mi],i=t[yi];if(t=oi(t[gi]),!i||i!=pi&&i!=di&&!n||i==di&&!r||i==fi&&!t)throw Error("Invalid checkActionCode response!");i==di?(e[wi]=n||null,e[Ii]=n||null,e[bi]=r):(e[wi]=r||null,e[Ii]=r||null,e[bi]=n||null),e[_i]=t||null,ti(this,Ei,i),ti(this,Ti,ri(e))}A(hi,ii),hi.prototype.w=function(){var t=hi.bb.w.call(this);return t.phoneNumber=this.phoneNumber,t};var fi="REVERT_SECOND_FACTOR_ADDITION",pi="EMAIL_SIGNIN",di="VERIFY_AND_CHANGE_EMAIL",vi="email",gi="mfaInfo",mi="newEmail",yi="requestType",bi="email",wi="fromEmail",_i="multiFactorInfo",Ii="previousEmail",Ti="data",Ei="operation";function Si(t){var e=Bn(t=Gn(t),Ai)||null,n=Bn(t,ki)||null,r=Bn(t,Di)||null;if(r=r&&Oi[r]||null,!e||!n||!r)throw new N("argument-error",Ai+", "+ki+"and "+Di+" are required in a valid action code URL.");ei(this,{apiKey:e,operation:r,code:n,continueUrl:Bn(t,Ni)||null,languageCode:Bn(t,Ri)||null,tenantId:Bn(t,Ci)||null})}var Ai="apiKey",ki="oobCode",Ni="continueUrl",Ri="languageCode",Di="mode",Ci="tenantId",Oi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:fi,signIn:pi,verifyAndChangeEmail:di,verifyEmail:"VERIFY_EMAIL"};function xi(t){try{return new Si(t)}catch(e){return null}}function Pi(t){var e=t[ji];if("undefined"===typeof e)throw new N("missing-continue-uri");if("string"!==typeof e||"string"===typeof e&&!e.length)throw new N("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Li];if(n&&"object"===typeof n){e=n[Bi];var r=n[Vi];if(n=n[qi],"string"===typeof e&&e.length){if(this.a=e,"undefined"!==typeof r&&"boolean"!==typeof r)throw new N("argument-error",Vi+" property must be a boolean when specified.");if(this.g=!!r,"undefined"!==typeof n&&("string"!==typeof n||"string"===typeof n&&!n.length))throw new N("argument-error",qi+" property must be a non empty string when specified.");this.b=n||null}else{if("undefined"!==typeof e)throw new N("argument-error",Bi+" property must be a non empty string when specified.");if("undefined"!==typeof r||"undefined"!==typeof n)throw new N("missing-android-pkg-name")}}else if("undefined"!==typeof n)throw new N("argument-error",Li+" property must be a non null object when specified.");if(this.f=null,(e=t[Fi])&&"object"===typeof e){if("string"===typeof(e=e[Gi])&&e.length)this.f=e;else if("undefined"!==typeof e)throw new N("argument-error",Gi+" property must be a non empty string when specified.")}else if("undefined"!==typeof e)throw new N("argument-error",Fi+" property must be a non null object when specified.");if("undefined"!==typeof(e=t[Ui])&&"boolean"!==typeof e)throw new N("argument-error",Ui+" property must be a boolean when specified.");if(this.c=!!e,"undefined"!==typeof(t=t[Mi])&&("string"!==typeof t||"string"===typeof t&&!t.length))throw new N("argument-error",Mi+" property must be a non empty string when specified.");this.i=t||null}var Li="android",Mi="dynamicLinkDomain",Ui="handleCodeInApp",Fi="iOS",ji="url",Vi="installApp",qi="minimumVersion",Bi="packageName",Gi="bundleId";function Ki(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Hi=null;function zi(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Hi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Hi){Hi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Hi[o]&&(Hi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,(function(t){e.push(t)})),e}function Wi(t){var e=Xi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function Ji(t){try{return new Wi(t)}catch(e){return null}}function Xi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=zi(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var a=r[e++],s=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&r[e++])-65536;t[n++]=String.fromCharCode(55296+(s>>10)),t[n++]=String.fromCharCode(56320+(1023&s))}else o=r[e++],a=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}return JSON.parse(t.join(""))}catch(g){}return null}Wi.prototype.T=function(){return this.f},Wi.prototype.l=function(){return this.c},Wi.prototype.toString=function(){return this.h};var Qi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Zi=["client_id","response_type","scope","redirect_uri","state"],Yi={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:Zi},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:Zi},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:Zi},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:Qi},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function $i(t){for(var e in Yi)if(Yi[e].fa==t)return Yi[e];return null}function to(t){var e={};e["facebook.com"]=oo,e["google.com"]=so,e["github.com"]=ao,e["twitter.com"]=uo;var n=t&&t[no];try{if(n)return e[n]?new e[n](t):new io(t);if("undefined"!==typeof t[eo])return new ro(t)}catch(r){}return null}var eo="idToken",no="providerId";function ro(t){var e=t[no];if(!e&&t[eo]){var n=Ji(t[eo]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,"undefined"!==typeof t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),ti(this,"providerId",e),ti(this,"isNewUser",n)}function io(t){ro.call(this,t),ti(this,"profile",ri((t=Br(t.rawUserInfo||"{}"))||{}))}function oo(t){if(io.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function ao(t){if(io.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");ti(this,"username",this.profile&&this.profile.login||null)}function so(t){if(io.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function uo(t){if(io.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");ti(this,"username",t.screenName||null)}function co(t){var e=Gn(t),n=Bn(e,"link"),r=Bn(Gn(n),"link");return e=Bn(e,"deep_link_id"),Bn(Gn(e),"link")||e||r||n||t}function ho(t,e){if(!t&&!e)throw new N("internal-error","Internal assert: no raw session string available");if(t&&e)throw new N("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?lo:fo}A(io,ro),A(oo,io),A(ao,io),A(so,io),A(uo,io);var lo="enroll",fo="signin";function po(){}function vo(t,e){return t.then((function(t){if(t[is]){var n=Ji(t[is]);if(!n||e!=n.i)throw new N("user-mismatch");return t}throw new N("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==C+"user-not-found"?new N("user-mismatch"):t}))}function go(t,e){if(!e)throw new N("internal-error","failed to construct a credential");this.a=e,ti(this,"providerId",t),ti(this,"signInMethod",t)}function mo(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function yo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new go(t.providerId,t.pendingToken)}catch(e){}return null}function bo(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&ti(this,"idToken",e.idToken),e.accessToken&&ti(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&ti(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new N("internal-error","failed to construct a credential");ti(this,"accessToken",e.oauthToken),ti(this,"secret",e.oauthTokenSecret)}ti(this,"providerId",t),ti(this,"signInMethod",n)}function wo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:er(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function _o(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new bo(t.providerId,e,t.signInMethod)}catch(n){}}return null}function Io(t,e){this.Qc=e||[],ei(this,{providerId:t,isOAuthProvider:!0}),this.Jb={},this.qb=($i(t)||{}).Ja||null,this.pb=null}function To(t){if("string"!==typeof t||0!=t.indexOf("saml."))throw new N("argument-error",'SAML provider IDs must be prefixed with "saml."');Io.call(this,t,[])}function Eo(t){Io.call(this,t,Zi),this.a=[]}function So(){Eo.call(this,"facebook.com")}function Ao(t){if(!t)throw new N("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return m(t)&&(e=t.accessToken),(new So).credential({accessToken:e})}function ko(){Eo.call(this,"github.com")}function No(t){if(!t)throw new N("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return m(t)&&(e=t.accessToken),(new ko).credential({accessToken:e})}function Ro(){Eo.call(this,"google.com"),this.Ca("profile")}function Do(t,e){var n=t;return m(t)&&(n=t.idToken,e=t.accessToken),(new Ro).credential({idToken:n,accessToken:e})}function Co(){Io.call(this,"twitter.com",Qi)}function Oo(t,e){var n=t;if(m(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new N("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new bo("twitter.com",n,"twitter.com")}function xo(t,e,n){this.a=t,this.f=e,ti(this,"providerId","password"),ti(this,"signInMethod",n===Lo.EMAIL_LINK_SIGN_IN_METHOD?Lo.EMAIL_LINK_SIGN_IN_METHOD:Lo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Po(t){return t&&t.email&&t.password?new xo(t.email,t.password,t.signInMethod):null}function Lo(){ei(this,{providerId:"password",isOAuthProvider:!1})}function Mo(t,e){if(!(e=Uo(e)))throw new N("argument-error","Invalid email link!");return new xo(t,e.code,Lo.EMAIL_LINK_SIGN_IN_METHOD)}function Uo(t){return(t=xi(t=co(t)))&&t.operation===pi?t:null}function Fo(t){if(!(t.fb&&t.eb||t.La&&t.ea))throw new N("internal-error");this.a=t,ti(this,"providerId","phone"),this.fa="phone",ti(this,"signInMethod","phone")}function jo(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return z(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new Fo(e)}return null}function Vo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.fb,code:t.a.eb}}function qo(t){try{this.a=t||i.Z.auth()}catch(e){throw new N("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}ei(this,{providerId:"phone",isOAuthProvider:!1})}function Bo(t,e){if(!t)throw new N("missing-verification-id");if(!e)throw new N("missing-verification-code");return new Fo({fb:t,eb:e})}function Go(t){if(t.temporaryProof&&t.phoneNumber)return new Fo({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return Do(o,n);case"facebook.com":return Ao(n);case"github.com":return No(n);case"twitter.com":return Oo(n,r);default:return n||r||o||a?a?0==e.indexOf("saml.")?new go(e,a):new bo(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new Eo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(s){return null}}function Ko(t){if(!t.isOAuthProvider)throw new N("invalid-oauth-provider")}function Ho(t,e,n,r,i,o,a){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new N("invalid-auth-event");if(this.g&&this.a)throw new N("invalid-auth-event");if(this.g&&!this.f)throw new N("invalid-auth-event")}function zo(t){return(t=t||{}).type?new Ho(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&R(t.error),t.postBody,t.tenantId):null}function Wo(){this.b=null,this.a=[]}ho.prototype.Ha=function(){return this.a?De(this.a):De(this.b)},ho.prototype.w=function(){return this.type==lo?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},po.prototype.ka=function(){},po.prototype.b=function(){},po.prototype.c=function(){},po.prototype.w=function(){},go.prototype.ka=function(t){return As(t,mo(this))},go.prototype.b=function(t,e){var n=mo(this);return n.idToken=e,ks(t,n)},go.prototype.c=function(t,e){return vo(Ns(t,mo(this)),e)},go.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},bo.prototype.ka=function(t){return As(t,wo(this))},bo.prototype.b=function(t,e){var n=wo(this);return n.idToken=e,ks(t,n)},bo.prototype.c=function(t,e){return vo(Ns(t,wo(this)),e)},bo.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},Io.prototype.Ka=function(t){return this.Jb=mt(t),this},A(To,Io),A(Eo,Io),Eo.prototype.Ca=function(t){return Q(this.a,t)||this.a.push(t),this},Eo.prototype.Rb=function(){return tt(this.a)},Eo.prototype.credential=function(t,e){var n;if(!(n=m(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new N("argument-error","credential failed: must provide the ID token and/or the access token.");return new bo(this.providerId,n,this.providerId)},A(So,Eo),ti(So,"PROVIDER_ID","facebook.com"),ti(So,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),A(ko,Eo),ti(ko,"PROVIDER_ID","github.com"),ti(ko,"GITHUB_SIGN_IN_METHOD","github.com"),A(Ro,Eo),ti(Ro,"PROVIDER_ID","google.com"),ti(Ro,"GOOGLE_SIGN_IN_METHOD","google.com"),A(Co,Io),ti(Co,"PROVIDER_ID","twitter.com"),ti(Co,"TWITTER_SIGN_IN_METHOD","twitter.com"),xo.prototype.ka=function(t){return this.signInMethod==Lo.EMAIL_LINK_SIGN_IN_METHOD?cu(t,Ms,{email:this.a,oobCode:this.f}):cu(t,iu,{email:this.a,password:this.f})},xo.prototype.b=function(t,e){return this.signInMethod==Lo.EMAIL_LINK_SIGN_IN_METHOD?cu(t,Us,{idToken:e,email:this.a,oobCode:this.f}):cu(t,Qs,{idToken:e,email:this.a,password:this.f})},xo.prototype.c=function(t,e){return vo(this.ka(t),e)},xo.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},ei(Lo,{PROVIDER_ID:"password"}),ei(Lo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),ei(Lo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Fo.prototype.ka=function(t){return t.gb(Vo(this))},Fo.prototype.b=function(t,e){var n=Vo(this);return n.idToken=e,cu(t,au,n)},Fo.prototype.c=function(t,e){var n=Vo(this);return n.operation="REAUTH",vo(t=cu(t,su,n),e)},Fo.prototype.w=function(){var t={providerId:"phone"};return this.a.fb&&(t.verificationId=this.a.fb),this.a.eb&&(t.verificationCode=this.a.eb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},qo.prototype.gb=function(t,e){var n=this.a.a;return De(e.verify()).then((function(r){if("string"!==typeof r)throw new N("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=m(t)?t.session:null,o=m(t)?t.phoneNumber:t;return(i&&i.type==lo?i.Ha().then((function(t){return function(t,e){return cu(t,Ys,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})})):i&&i.type==fo?i.Ha().then((function(e){return function(t,e){return cu(t,$s,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return cu(t,Js,e)}(n,{phoneNumber:o,recaptchaToken:r})).then((function(t){return"function"===typeof e.reset&&e.reset(),t}),(function(t){throw"function"===typeof e.reset&&e.reset(),t}));default:throw new N("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},ei(qo,{PROVIDER_ID:"phone"}),ei(qo,{PHONE_SIGN_IN_METHOD:"phone"}),Ho.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Ho.prototype.T=function(){return this.h},Ho.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Jo,Xo=null;function Qo(t){var e="unauthorized-domain",n=void 0,r=Gn(t);t=r.a,"chrome-extension"==(r=r.c)?n=Ht("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Ht("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",N.call(this,e,n)}function Zo(t,e,n){N.call(this,t,n),(t=e||{}).Kb&&ti(this,"email",t.Kb),t.ea&&ti(this,"phoneNumber",t.ea),t.credential&&ti(this,"credential",t.credential),t.$b&&ti(this,"tenantId",t.$b)}function Yo(t){if(t.code){var e=t.code||"";0==e.indexOf(C)&&(e=e.substring(C.length));var n={credential:Go(t),$b:t.tenantId};if(t.email)n.Kb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new N(e,t.message||void 0);return new Zo(e,n,t.message)}return null}function $o(){}function ta(t){return t.c||(t.c=t.b())}function ea(){}function na(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(Mp){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function ra(){}function ia(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=T(this.qc,this),this.a.onerror=T(this.Tb,this),this.a.onprogress=T(this.rc,this),this.a.ontimeout=T(this.vc,this)}function oa(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function aa(t,e,n){this.reset(t,e,n,void 0,void 0)}A(Qo,N),A(Zo,N),Zo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&bt(t,e),t},Zo.prototype.toJSON=function(){return this.w()},$o.prototype.c=null,A(ea,$o),ea.prototype.a=function(){var t=na(this);return t?new ActiveXObject(t):new XMLHttpRequest},ea.prototype.b=function(){var t={};return na(this)&&(t[0]=!0,t[1]=!0),t},Jo=new ea,A(ra,$o),ra.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new ia;throw Error("Unsupported browser")},ra.prototype.b=function(){return{}},(t=ia.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,oa(this,4)},t.Tb=function(){this.status=500,this.response=this.responseText="",oa(this,4)},t.vc=function(){this.Tb()},t.rc=function(){this.status=200,oa(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},aa.prototype.a=null;function sa(t){this.f=t,this.b=this.c=this.a=null}function ua(t,e){this.name=t,this.value=e}aa.prototype.reset=function(t,e,n,r,i){"number"==typeof i||0,r||S(),delete this.a},ua.prototype.toString=function(){return this.name};var ca=new ua("SEVERE",1e3),ha=new ua("WARNING",900),la=new ua("CONFIG",700),fa=new ua("FINE",500);function pa(t){return t.c?t.c:t.a?pa(t.a):(F("Root logger has no level set."),null)}sa.prototype.log=function(t,e,n){if(t.value>=pa(this).value)for(v(e)&&(e=e()),t=new aa(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var da,va={},ga=null;function ma(t){var e;if(ga||(ga=new sa(""),va[""]=ga,ga.c=la),!(e=va[t])){e=new sa(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=ma(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,va[t]=e}return e}function ya(t,e){t&&t.log(fa,e,void 0)}function ba(t){this.f=t}function wa(t){En.call(this),this.u=t,this.h=void 0,this.readyState=_a,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=ma("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}A(ba,$o),ba.prototype.a=function(){return new wa(this.f)},ba.prototype.b=(da={},function(){return da}),A(wa,En);var _a=0;function Ia(t){t.c.read().then(t.pc.bind(t)).catch(t.Va.bind(t))}function Ta(t){t.readyState=4,t.g=null,t.c=null,t.m=null,Ea(t)}function Ea(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function Sa(t){En.call(this),this.headers=new On,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=Aa,this.u=this.S=!1}(t=wa.prototype).open=function(t,e){if(this.readyState!=_a)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,Ea(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Va.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,Ta(this)),this.readyState=_a},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,Ea(this)),this.a&&(this.readyState=3,Ea(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):"undefined"!==typeof u.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,Ia(this)):t.text().then(this.tc.bind(this),this.Va.bind(this)))))},t.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?Ta(this):Ea(this),3==this.readyState&&Ia(this)}},t.tc=function(t){this.a&&(this.response=this.responseText=t,Ta(this))},t.sc=function(t){this.a&&(this.response=t,Ta(this))},t.Va=function(t){var e=this.i;e&&e.log(ha,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&Ta(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(ha,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(ha,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(wa.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),A(Sa,En);var Aa="";Sa.prototype.b=ma("goog.net.XhrIo");var ka=/^https?$/i,Na=["POST","PUT"];function Ra(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():Jo.a(),t.C=t.D?ta(t.D):ta(Jo),t.a.onreadystatechange=T(t.Wb,t);try{ya(t.b,Fa(t,"Opening Xhr")),t.N=!0,t.a.open(n,String(e),!0),t.N=!1}catch(a){return ya(t.b,Fa(t,"Error opening Xhr: "+a.message)),void Ca(t,a)}e=r||"";var o=new On(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(d(t)||"string"===typeof t)z(t,e,void 0);else for(var n=Cn(t),r=Dn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=Da,n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"===typeof t?t.charAt(e):t[e]}(o.Y()),r=u.FormData&&e instanceof u.FormData,!Q(Na,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{La(t),0<t.g&&(t.u=function(t){return Qt&&se(9)&&"number"===typeof t.timeout&&void 0!==t.ontimeout}(t.a),ya(t.b,Fa(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=T(t.Ma,t)):t.s=Nn(t.Ma,t.g,t)),ya(t.b,Fa(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(a){ya(t.b,Fa(t,"Send error: "+a.message)),Ca(t,a)}}function Da(t){return"content-type"==t.toLowerCase()}function Ca(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Oa(t),Pa(t)}function Oa(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function xa(t){if(t.c&&"undefined"!=typeof s)if(t.C[1]&&4==Ma(t)&&2==Ua(t))ya(t.b,Fa(t,"Local request error detected and ignored"));else if(t.i&&4==Ma(t))Nn(t.Wb,0,t);else if(t.dispatchEvent("readystatechange"),4==Ma(t)){ya(t.b,Fa(t,"Request complete")),t.c=!1;try{var e,n=Ua(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(Ln)[1]||null;if(!o&&u.self&&u.self.location){var a=u.self.location.protocol;o=a.substr(0,a.length-1)}i=!ka.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Ma(t)?t.a.statusText:""}catch(h){ya(t.b,"Can not get status: "+h.message),c=""}t.h=c+" ["+Ua(t)+"]",Oa(t)}}finally{Pa(t)}}}function Pa(t,e){if(t.a){La(t);var n=t.a,r=t.C[0]?f:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(Mp){(t=t.b)&&t.log(ca,"Problem encountered resetting onreadystatechange: "+Mp.message,void 0)}}}function La(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(u.clearTimeout(t.s),t.s=null)}function Ma(t){return t.a?t.a.readyState:0}function Ua(t){try{return 2<Ma(t)?t.a.status:-1}catch(e){return-1}}function Fa(t,e){return e+" ["+t.P+" "+t.l+" "+Ua(t)+"]"}function ja(t){var e=Qa;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Va(t,e,n){t.a=!0,t.c=n,t.f=!e,Ka(t)}function qa(t){if(t.a){if(!t.v)throw new Ha(t);t.v=!1}}function Ba(t,e,n,r){t.g.push([e,n,r]),t.a&&Ka(t)}function Ga(t){return X(t.g,(function(t){return v(t[1])}))}function Ka(t){if(t.h&&t.a&&Ga(t)){var e=t.h,n=Ja[e];n&&(u.clearTimeout(n.a),delete Ja[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],a=i[1];if(i=i[2],o=t.f?a:o)try{var s=o.call(i||t.s,e);void 0!==s&&(t.f=t.f&&(s==e||s instanceof Error),t.c=e=s),(L(e)||"function"===typeof u.Promise&&e instanceof u.Promise)&&(r=!0,t.i=!0)}catch(c){e=c,t.f=!0,Ga(t)||(n=!0)}}t.c=e,r&&(s=T(t.m,t,!0),r=T(t.m,t,!1),e instanceof ja?(Ba(e,s,r),e.C=!0):e.then(s,r)),n&&(e=new Wa(e),Ja[e.a]=e,t.h=e.a)}function Ha(){M.call(this)}function za(){M.call(this)}function Wa(t){this.a=u.setTimeout(T(this.c,this),0),this.b=t}(t=Sa.prototype).Ma=function(){"undefined"!=typeof s&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",ya(this.b,Fa(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(ya(this.b,Fa(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Pa(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Pa(this,!0)),Sa.bb.Da.call(this)},t.Wb=function(){this.ya||(this.N||this.i||this.f?xa(this):this.Jc())},t.Jc=function(){xa(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case Aa:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(ca,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return ya(this.b,"Can not get response: "+e.message),null}},ja.prototype.cancel=function(t){if(this.a)this.c instanceof ja&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new za(this),qa(this),Va(this,!1,t))}},ja.prototype.m=function(t,e){this.i=!1,Va(this,t,e)},ja.prototype.then=function(t,e,n){var r,i,o=new Te((function(t,e){r=t,i=e}));return Ba(this,r,(function(t){t instanceof za?o.cancel():i(t)})),o.then(t,e,n)},ja.prototype.$goog_Thenable=!0,A(Ha,M),Ha.prototype.message="Deferred has already fired",Ha.prototype.name="AlreadyCalledError",A(za,M),za.prototype.message="Deferred was canceled",za.prototype.name="CanceledError",Wa.prototype.c=function(){throw delete Ja[this.a],this.b};var Ja={};function Xa(t){var e={},n=e.document||document,r=Nt(t).toString(),i=me(document,"SCRIPT"),o={Xb:i,Ma:void 0},a=new ja(o),s=null,c=null!=e.timeout?e.timeout:5e3;return 0<c&&(s=window.setTimeout((function(){Za(i,!0);var t=new ts($a,"Timeout reached for loading script "+r);qa(a),Va(a,!1,t)}),c),o.Ma=s),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Za(i,e.xd||!1,s),qa(a),Va(a,!0,null))},i.onerror=function(){Za(i,!0,s);var t=new ts(Ya,"Error while loading script "+r);qa(a),Va(a,!1,t)},bt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),fe(i,o),function(t,e){wt(t,"HTMLScriptElement"),t.src=Nt(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=u?e=l(e.document):(null===h&&(h=l(u.document)),e=h),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function Qa(){if(this&&this.Xb){var t=this.Xb;t&&"SCRIPT"==t.tagName&&Za(t,!0,this.Ma)}}function Za(t,e,n){null!=n&&u.clearTimeout(n),t.onload=f,t.onerror=f,t.onreadystatechange=f,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var Ya=0,$a=1;function ts(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),M.call(this,n),this.code=t}function es(t){this.f=t}function ns(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||os,this.g=mt(t.secureTokenHeaders||as),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||ss,this.a=mt(t.firebaseHeaders||us),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==Ar(),!(n=u.XMLHttpRequest||n&&i.Z.INTERNAL.node&&i.Z.INTERNAL.node.XMLHttpRequest)&&!Sr())throw new N("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Sr()?this.f=new ba(self):kr()?this.f=new es(n):this.f=new ra,this.b=null}A(ts,M),A(es,$o),es.prototype.a=function(){return new this.f},es.prototype.b=function(){return{}};var rs,is="idToken",os=new zr(3e4,6e4),as={"Content-Type":"application/x-www-form-urlencoded"},ss=new zr(3e4,6e4),us={"Content-Type":"application/json"};function cs(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function hs(t,e){e&&(t.l=ls("https://securetoken.googleapis.com/v1/token",e),t.h=ls("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=ls("https://identitytoolkit.googleapis.com/v2/",e))}function ls(t,e){return t=Gn(t),e=Gn(e.url),t.f=t.a+t.f,Fn(t,e.c),t.a=e.a,jn(t,e.g),t.toString()}function fs(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function ps(t,e,n,r,i,o,a){(function(){var t=xr();return!((t=Dr(t)!=Rr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t)&&(!Qt||!ce||9<ce)})()||Sr()?t=T(t.u,t):(rs||(rs=new Te((function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{u[vs]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Ba(t,null,e,void 0)}(Xa(Rt(ds,{onload:vs})),(function(){e(Error("CORS_UNSUPPORTED"))}))}}(t,e)}))),t=T(t.s,t)),t(e,n,r,i,o,a)}ns.prototype.T=function(){return this.b},ns.prototype.u=function(t,e,n,r,i,o){if(Sr()&&("undefined"===typeof u.fetch||"undefined"===typeof u.Headers||"undefined"===typeof u.Request))throw new N("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new Sa(this.f);if(o){a.g=Math.max(0,o);var s=setTimeout((function(){a.dispatchEvent("timeout")}),o)}Sn(a,"complete",(function(){s&&clearTimeout(s);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return ya(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(g){t=null}e&&e(t)})),An(a,"ready",(function(){s&&clearTimeout(s),Je(this)})),An(a,"timeout",(function(){s&&clearTimeout(s),Je(this),e&&e(null)})),Ra(a,t,n,r,i)};var ds=new _t(St,"https://apis.google.com/js/client.js?onload=%{onload}"),vs="__fcb"+Math.floor(1e6*Math.random()).toString();function gs(t,e,n,r,i,o,a){var s=Gn(e+n);qn(s,"key",t.c),a&&qn(s,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&qn(s,c,i[c]);return new Te((function(e,n){ps(t,s.toString(),(function(t){t?t.error?n(lu(t,o||{})):e(t):n(new N("network-request-failed"))}),r,u?void 0:sr(qr(i)),t.a,t.v.get())}))}function ms(t){if("string"!==typeof(t=t.email)||!_r.test(t))throw new N("invalid-email")}function ys(t){"email"in t&&ms(t)}function bs(t){if(!t[is]){if(t.mfaPendingCredential)throw new N("multi-factor-auth-required",null,mt(t));throw new N("internal-error")}}function ws(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new N("internal-error")}else{if(!t.sessionInfo)throw new N("missing-verification-id");if(!t.code)throw new N("missing-verification-code")}}ns.prototype.s=function(t,e,n,r,i){var o=this;rs.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},ns.prototype.Ab=function(){return cu(this,Zs,{})},ns.prototype.Cb=function(t,e){return cu(this,Xs,{idToken:t,email:e})},ns.prototype.Db=function(t,e){return cu(this,Qs,{idToken:t,password:e})};var _s={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function Is(t){if(!t.phoneVerificationInfo)throw new N("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new N("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new N("missing-verification-code")}function Ts(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new N("internal-error")}function Es(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(rr(t=new $n(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function Ss(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Yo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Yo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Yo(t)):t.errorMessage&&(e=hu(t.errorMessage)),e)throw e;bs(t)}function As(t,e){return e.returnIdpCredential=!0,cu(t,tu,e)}function ks(t,e){return e.returnIdpCredential=!0,cu(t,nu,e)}function Ns(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,cu(t,eu,e)}function Rs(t){if(!t.oobCode)throw new N("invalid-action-code")}(t=ns.prototype).Eb=function(t,e){var n={idToken:t},r=[];return vt(_s,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),cu(this,Xs,n)},t.wb=function(t,e){return bt(t={requestType:"PASSWORD_RESET",email:t},e),cu(this,Ks,t)},t.xb=function(t,e){return bt(t={requestType:"EMAIL_SIGNIN",email:t},e),cu(this,qs,t)},t.vb=function(t,e){return bt(t={requestType:"VERIFY_EMAIL",idToken:t},e),cu(this,Bs,t)},t.Fb=function(t,e,n){return bt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),cu(this,Gs,t)},t.gb=function(t){return cu(this,ou,t)},t.ob=function(t,e){return cu(this,Ws,{oobCode:t,newPassword:e})},t.Sa=function(t){return cu(this,Cs,{oobCode:t})},t.kb=function(t){return cu(this,Ds,{oobCode:t})};var Ds={endpoint:"setAccountInfo",A:Rs,Z:"email",B:!0},Cs={endpoint:"resetPassword",A:Rs,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new N("internal-error")},B:!0},Os={endpoint:"signupNewUser",A:function(t){if(ms(t),!t.password)throw new N("weak-password")},G:bs,V:!0,B:!0},xs={endpoint:"createAuthUri",B:!0},Ps={endpoint:"deleteAccount",O:["idToken"]},Ls={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new N("internal-error")}},Ms={endpoint:"emailLinkSignin",O:["email","oobCode"],A:ms,G:bs,V:!0,B:!0},Us={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:ms,G:bs,V:!0},Fs={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:Is,G:bs,B:!0,Na:!0},js={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:Is,G:bs,B:!0,Na:!0},Vs={endpoint:"getAccountInfo"},qs={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new N("internal-error");ms(t)},Z:"email",B:!0},Bs={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new N("internal-error")},Z:"email",B:!0},Gs={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new N("internal-error")},Z:"email",B:!0},Ks={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new N("internal-error");ms(t)},Z:"email",B:!0},Hs={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},zs={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new N("internal-error")}},Ws={endpoint:"resetPassword",A:Rs,Z:"email",B:!0},Js={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Xs={endpoint:"setAccountInfo",O:["idToken"],A:ys,V:!0},Qs={endpoint:"setAccountInfo",O:["idToken"],A:function(t){if(ys(t),!t.password)throw new N("weak-password")},G:bs,V:!0},Zs={endpoint:"signupNewUser",G:bs,V:!0,B:!0},Ys={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new N("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new N("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new N("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new N("internal-error")},B:!0,Na:!0},$s={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new N("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new N("internal-error")},B:!0,Na:!0},tu={endpoint:"verifyAssertion",A:Ts,Za:Es,G:Ss,V:!0,B:!0},eu={endpoint:"verifyAssertion",A:Ts,Za:Es,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new N("user-not-found");if(t.errorMessage)throw hu(t.errorMessage);bs(t)},V:!0,B:!0},nu={endpoint:"verifyAssertion",A:function(t){if(Ts(t),!t.idToken)throw new N("internal-error")},Za:Es,G:Ss,V:!0},ru={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new N("invalid-custom-token")},G:bs,V:!0,B:!0},iu={endpoint:"verifyPassword",A:function(t){if(ms(t),!t.password)throw new N("wrong-password")},G:bs,V:!0,B:!0},ou={endpoint:"verifyPhoneNumber",A:ws,G:bs,B:!0},au={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new N("internal-error");ws(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Yo(t);bs(t)}},su={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ws,G:bs,B:!0},uu={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[is]^!!t.refreshToken)throw new N("internal-error")},B:!0,Na:!0};function cu(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(void 0===r||null===r||""===r)return!1}return!0}(n,e.O))return Ce(new N("internal-error"));var r,i=!!e.Na,o=e.Vb||"POST";return De(n).then(e.A).then((function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&"undefined"===typeof n.tenantId&&(n.tenantId=t.b),gs(t,i?t.i:t.h,e.endpoint,o,n,e.Ib,e.mb||!1)})).then((function(t){return r=t,e.Za?e.Za(n,r):r})).then(e.G).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new N("internal-error");return r[e.Z]}))}function hu(t){return lu({error:{errors:[{message:t}],code:400,message:t}})}function lu(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new N(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",bt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new N(r[i],e);return!e&&t&&(e=Vr(t)),new N("internal-error",e)}function fu(t){this.b=t,this.a=null,this.sb=function(t){return(gu||(gu=new Te((function(t,e){function n(){Hr(),Pr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Hr(),e(Error("Network Error"))},timeout:du.get()})}if(Pr("gapi.iframes.Iframe"))t();else if(Pr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();u[r]=function(){Pr("gapi.load")?n():e(Error("Network Error"))},De(Xa(r=Rt(pu,{onload:r}))).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw gu=null,t})))).then((function(){return new Te((function(e,n){Pr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Pr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),vu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var pu=new _t(St,"https://apis.google.com/js/api.js?onload=%{onload}"),du=new zr(3e4,6e4),vu=new zr(5e3,15e3),gu=null;function mu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,this.g?t=Kn((t=Gn(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):t=Kn("https",this.l,null,"/__/auth/iframe"),this.a=t,qn(this.a,"apiKey",this.h),qn(this.a,"appName",this.i),this.b=null,this.c=[]}function yu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function bu(t){try{return i.Z.app(t).auth().Ga()}catch(e){return[]}}function wu(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function _u(t){var e=dr();return function(t){return cu(t,Hs,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=Gn(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=Gn(o).a==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:wr.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new Qo(dr())}))}function Iu(t){return t.m||(t.m=Ir().then((function(){if(!t.u){var e=t.c,n=t.i,r=bu(t.b),i=new mu(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=tt(r||[]),t.u=i.toString()}t.v=new fu(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.sb.then((function(){t.a.register("authEvent",e,Pr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.v,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=zo(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",De(n)}return n.status="ERROR",De(n)}))}(t)}))),t.m}function Tu(t){return t.l||(t.C=t.c?Or(t.c,bu(t.b)):null,t.l=new ns(t.g,P(t.i),t.C),t.f&&hs(t.l,t.f)),t.l}function Eu(t,e,n,r,i,o,a,s,u,c,h,l){return(t=new yu(t,e,n,r,i,l)).l=o,t.g=a,t.i=s,t.b=mt(u||null),t.f=c,t.zb(h).toString()}function Su(t){if(this.a=t||i.Z.INTERNAL.reactNative&&i.Z.INTERNAL.reactNative.AsyncStorage,!this.a)throw new N("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function Au(t){this.b=t,this.a={},this.f=T(this.c,this)}mu.prototype.toString=function(){return this.f?qn(this.a,"v",this.f):nr(this.a.b,"v"),this.b?qn(this.a,"eid",this.b):nr(this.a.b,"eid"),this.c.length?qn(this.a,"fw",this.c.join(",")):nr(this.a.b,"fw"),this.a.toString()},yu.prototype.zb=function(t){return this.h=t,this},yu.prototype.toString=function(){if(this.v){var t=Gn(this.v.url);t=Kn(t.c,t.a,t.g,"/emulator/auth/handler")}else t=Kn("https",this.u,null,"/__/auth/handler");if(qn(t,"apiKey",this.s),qn(t,"appName",this.c),qn(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=i.Z.app(this.c).auth().la()}catch(u){n=null}for(var r in e.pb=n,qn(t,"providerId",this.a.providerId),e=qr((n=this.a).Jb))e[r]=e[r].toString();r=n.Qc,e=mt(e);for(var o=0;o<r.length;o++){var a=r[o];a in e&&delete e[a]}n.qb&&n.pb&&!e[n.qb]&&(e[n.qb]=n.pb),gt(e)||qn(t,"customParameters",Vr(e))}if("function"===typeof this.a.Rb&&((n=this.a.Rb()).length&&qn(t,"scopes",n.join(","))),this.l?qn(t,"redirectUrl",this.l):nr(t.b,"redirectUrl"),this.g?qn(t,"eventId",this.g):nr(t.b,"eventId"),this.i?qn(t,"v",this.i):nr(t.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Bn(t,s)&&qn(t,s,this.b[s]);return this.h?qn(t,"tid",this.h):nr(t.b,"tid"),this.f?qn(t,"eid",this.f):nr(t.b,"eid"),(s=bu(this.c)).length&&qn(t,"fw",s.join(",")),t.toString()},(t=wu.prototype).Pb=function(t,e,n){var r=new N("popup-closed-by-user"),i=new N("web-storage-unsupported"),o=this,a=!1;return this.ma().then((function(){(function(t){var e={type:"webStorageSupport"};return Iu(t).then((function(){return function(t,e){return t.sb.then((function(){return new Te((function(n){t.a.send(e.type,e,n,Pr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.v,e)})).then((function(t){if(t&&t.length&&"undefined"!==typeof t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&yr(t),e(i),a=!0)}))})).o((function(){})).then((function(){if(!a)return function(t){return new Te((function(e){return function n(){Rn(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!a)return Rn(n).then((function(){e(r)}))}))},t.Yb=function(){var t=xr();return!jr(t)&&!Kr(t)},t.Ub=function(){return!1},t.Nb=function(t,e,n,r,i,o,a,s){if(!t)return Ce(new N("popup-blocked"));if(a&&!jr())return this.ma().o((function(e){yr(t),i(e)})),r(),De();this.a||(this.a=_u(Tu(this)));var u=this;return this.a.then((function(){var e=u.ma().o((function(e){throw yr(t),i(e),e}));return r(),e})).then((function(){(Ko(n),a)||vr(Eu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,s,u.f),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Ob=function(t,e,n,r){this.a||(this.a=_u(Tu(this)));var i=this;return this.a.then((function(){Ko(e),vr(Eu(i.s,i.g,i.b,t,e,dr(),n,i.c,void 0,i.i,r,i.f))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.ma=function(){var t=this;return Iu(this).then((function(){return t.v.sb})).o((function(){throw t.a=null,new N("network-request-failed")}))},t.ac=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Ta=function(t){Y(this.h,(function(e){return e==t}))},(t=Su.prototype).get=function(t){return De(this.a.getItem(t)).then((function(t){return t&&Br(t)}))},t.set=function(t,e){return De(this.a.setItem(t,Vr(e)))},t.U=function(t){return De(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var ku,Nu=[];function Ru(t,e,n){gt(t.a)&&t.b.addEventListener("message",t.f),"undefined"===typeof t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Du(t){this.a=t}function Cu(t){this.c=t,this.b=!1,this.a=[]}function Ou(t,e,n,r){var i,o,a,s,u=n||{},c=null;if(t.b)return Ce(Error("connection_unavailable"));var h=r?800:50,l="undefined"!==typeof MessageChannel?new MessageChannel:null;return new Te((function(n,r){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),h),c={messageChannel:l,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(s),"undefined"!==typeof t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))}},t.a.push(c),l.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[l.port2])):r(Error("connection_unavailable"))})).then((function(e){return xu(t,c),e})).o((function(e){throw xu(t,c),e}))}function xu(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),Y(t.a,(function(t){return t==e}))}}function Pu(){if(!Fu())throw new N("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=u.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;Sr()&&self?(this.v=function(){var t=Sr()?self:null;if(z(Nu,(function(n){n.b==t&&(e=n)})),!e){var e=new Au(t);Nu.push(e)}return e}(),Ru(this.v,"keyChanged",(function(e,n){return Gu(t).then((function(e){return 0<e.length&&z(t.a,(function(t){t(e)})),{keyProcessed:Q(e,n.key)}}))})),Ru(this.v,"ping",(function(){return De(["keyChanged"])}))):function(){var t=u.navigator;return t&&t.serviceWorker?De().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):De(null)}().then((function(e){(t.h=e)&&(t.g=new Cu(new Du(e)),Ou(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&Q(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function Lu(t){return new Te((function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(e){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){n(e)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new Te((function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return Lu(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function Mu(t){return t.i||(t.i=Lu(t)),t.i}function Uu(t,e){var n=0;return new Te((function r(i,o){Mu(t).then(e).then(i).o((function(e){if(!(3<++n))return Mu(t).then((function(e){return e.close(),t.i=void 0,r(i,o)})).o((function(t){o(t)}));o(e)}))}))}function Fu(){try{return!!u.indexedDB}catch(da){return!1}}function ju(t){return t.objectStore("firebaseLocalStorage")}function Vu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function qu(t){return new Te((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Bu(t,e){return t.g&&t.h&&function(){var t=u.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Ou(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):De()}function Gu(t){return Mu(t).then((function(t){var e=ju(Vu(t,!1));return e.getAll?qu(e.getAll()):new Te((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=gr(t.c,n),t.c=n}return r}))}function Ku(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Hu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=De().then((function(){if(Fu()){var t=Gr(),r="__sak"+t;return ku||(ku=new Pu),(n=ku).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){z(e.a,(function(e){e(t)}))})),t}))}function zu(){this.a={},this.type="inMemory"}function Wu(){if(!function(){var t="Node"==Ar();if(!(t=Ju()||t&&i.Z.INTERNAL.node&&i.Z.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==Ar())throw new N("internal-error","The LocalStorage compatibility library was not found.");throw new N("web-storage-unsupported")}this.a=Ju()||i.Z.INTERNAL.node.localStorage,this.type="localStorage"}function Ju(){try{var t=u.localStorage,e=Gr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Xu(){this.type="nullStorage"}function Qu(){if(!function(){var t="Node"==Ar();if(!(t=Zu()||t&&i.Z.INTERNAL.node&&i.Z.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==Ar())throw new N("internal-error","The SessionStorage compatibility library was not found.");throw new N("web-storage-unsupported")}this.a=Zu()||i.Z.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Zu(){try{var t=u.sessionStorage,e=Gr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Yu(){var t={};t.Browser=ec,t.Node=nc,t.ReactNative=rc,t.Worker=ic,this.a=t[Ar()]}Au.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];z(r,(function(e){i.push(De().then((function(){return e(t.origin,t.data.data)})))})),xe(i).then((function(r){var i=[];z(r,(function(t){i.push({fulfilled:t.Qb,value:t.value,reason:t.reason?t.reason.message:void 0})})),z(i,(function(t){for(var e in t)"undefined"===typeof t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},Du.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Cu.prototype.close=function(){for(;0<this.a.length;)xu(this,this.a[0]);this.b=!0},(t=Pu.prototype).set=function(t,e){var n=this,r=!1;return Uu(this,(function(e){return qu((e=ju(Vu(e,!0))).get(t))})).then((function(i){return Uu(n,(function(o){if(o=ju(Vu(o,!0)),i)return i.value=e,qu(o.put(i));n.b++,r=!0;var a={};return a.fbase_key=t,a.value=e,qu(o.add(a))}))})).then((function(){return n.c[t]=e,Bu(n,t)})).oa((function(){r&&n.b--}))},t.get=function(t){return Uu(this,(function(e){return qu(ju(Vu(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.U=function(t){var e=this,n=!1;return Uu(this,(function(r){return n=!0,e.b++,qu(ju(Vu(r,!0)).delete(t))})).then((function(){return delete e.c[t],Bu(e,t)})).oa((function(){n&&e.b--}))},t.ca=function(t){0==this.a.length&&function(t){function e(){t.f=setTimeout((function(){t.l=Gu(t).then((function(e){0<e.length&&z(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}Ku(t),e()}(this),this.a.push(t)},t.ia=function(t){Y(this.a,(function(e){return e==t})),0==this.a.length&&Ku(this)},(t=Hu.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.U=function(t){return this.b.then((function(e){return e.U(t)}))},t.ca=function(t){this.a.push(t)},t.ia=function(t){Y(this.a,(function(e){return e==t}))},(t=zu.prototype).get=function(t){return De(this.a[t])},t.set=function(t,e){return this.a[t]=e,De()},t.U=function(t){return delete this.a[t],De()},t.ca=function(){},t.ia=function(){},(t=Wu.prototype).get=function(t){var e=this;return De().then((function(){return Br(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return De().then((function(){var r=Vr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return De().then((function(){e.a.removeItem(t)}))},t.ca=function(t){u.window&&fn(u.window,"storage",t)},t.ia=function(t){u.window&&vn(u.window,"storage",t)},(t=Xu.prototype).get=function(){return De(null)},t.set=function(){return De()},t.U=function(){return De()},t.ca=function(){},t.ia=function(){},(t=Qu.prototype).get=function(t){var e=this;return De().then((function(){return Br(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return De().then((function(){var r=Vr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return De().then((function(){e.a.removeItem(t)}))},t.ca=function(){},t.ia=function(){};var $u,tc,ec={F:Wu,cb:Qu},nc={F:Wu,cb:Qu},rc={F:Su,cb:Xu},ic={F:Wu,cb:Xu},oc={rd:"local",NONE:"none",td:"session"};function ac(){var t=!(Kr(xr())||!Er()),e=jr(),n=Lr();this.m=t,this.h=e,this.l=n,this.a={},$u||($u=new Yu),t=$u;try{this.g=!pr()&&Xr()||!u.indexedDB?new t.a.F:new Hu(Sr()?new zu:new t.a.F)}catch(r){this.g=new zu,this.h=!0}try{this.i=new t.a.cb}catch(r){this.i=new zu}this.v=new zu,this.f=T(this.Zb,this),this.b={}}function sc(){return tc||(tc=new ac),tc}function uc(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function cc(t,e){return"firebase:"+t.name+(e?":"+e:"")}function hc(t,e,n){return n=cc(e,n),"local"==e.F&&(t.b[n]=null),uc(t,e.F).U(n)}function lc(t){t.c&&(clearInterval(t.c),t.c=null)}function fc(t){this.a=t,this.b=sc()}(t=ac.prototype).get=function(t,e){return uc(this,t.F).get(cc(t,e))},t.set=function(t,e,n){var r=cc(t,n),i=this,o=uc(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=cc(t,e),this.l&&(this.b[t]=u.localStorage.getItem(t)),gt(this.a)&&(uc(this,"local").ca(this.f),this.h||(pr()||!Xr())&&u.indexedDB||!this.l||function(t){lc(t),t.c=setInterval((function(){for(var e in t.a){var n=u.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new tn({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Zb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=cc(t,e),this.a[t]&&(Y(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),gt(this.a)&&(uc(this,"local").ia(this.f),lc(this))},t.Zb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];"undefined"===typeof r&&(r=null);var i=u.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.nb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if("undefined"!==typeof t.a.a?uc(this,"local").ia(this.f):lc(this),this.m)if(n=u.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?u.localStorage.setItem(e,r):u.localStorage.removeItem(e);else if(this.b[e]===r&&"undefined"===typeof t.a.a)return;var o=this;n=function(){"undefined"===typeof t.a.a&&o.b[e]===u.localStorage.getItem(e)||(o.b[e]=u.localStorage.getItem(e),o.nb(e))},Qt&&ce&&10==ce&&u.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else z(t,T(this.nb,this))},t.nb=function(t){this.a[t]&&z(this.a[t],(function(t){t()}))};var pc,dc={name:"authEvent",F:"local"};function vc(){this.a=sc()}function gc(t,e){this.b=mc,this.f=u.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=u.Int32Array?new Int32Array(64):Array(64),void 0===pc&&(pc=u.Int32Array?new Int32Array(Ec):Ec),this.reset()}A(gc,(function(){this.b=-1}));for(var mc=64,yc=mc-1,bc=[],wc=0;wc<yc;wc++)bc[wc]=0;var _c=$(128,bc);function Ic(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&h^~c&l)+(0|pc[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function Tc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"===typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(Ic(t),i=0);else{if(!d(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(Ic(t),i=0)}}t.c=i,t.g+=n}gc.prototype.reset=function(){this.g=this.c=0,this.a=u.Int32Array?new Int32Array(this.h):tt(this.h)};var Ec=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Sc(){gc.call(this,8,Ac)}A(Sc,gc);var Ac=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function kc(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new vc,this.g=new fc(this.h),this.f=null,this.b=[],this.a=this.c=null}function Nc(t){return new N("invalid-cordova-configuration",t)}function Rc(t){var e=new Sc;Tc(e,t),t=[];var n=8*e.g;56>e.c?Tc(e,_c,56-e.c):Tc(e,_c,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(Ic(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return J(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}function Dc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(r){}}function Cc(t){return t.f||(t.f=t.ma().then((function(){return new Te((function(e){t.Ea((function n(r){return e(r),t.Ta(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),Oc(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=co(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"===typeof(o=Br(Bn(o=Gn(i),"firebaseError")||null))?R(o):null)?new Ho(r.c,r.b,null,null,o,null,r.T()):new Ho(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}Dc(t,i)}))}var n=new Ho("unknown",null,null,null,new N("no-auth-event")),r=!1,i=Rn(500).then((function(){return Oc(t).then((function(){r||Dc(t,n)}))})),o=u.handleOpenURL;u.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Pr("BuildInfo.packageName",u).toLowerCase()+"://")&&e({url:t}),"function"===typeof o)try{o(t)}catch(n){console.error(n)}},Xo||(Xo=new Wo),function(t){var e=Xo;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"===typeof(t=Pr("universalLinks.subscribe",u))&&t(null,e.b))}(e)}(t)}))}))),t.f}function Oc(t){var e=null;return function(t){return t.b.get(dc,t.a).then((function(t){return zo(t)}))}(t.g).then((function(n){return e=n,hc((n=t.g).b,dc,n.a)})).then((function(){return e}))}function xc(t){this.a=t,this.b=sc()}(t=kc.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(Tr(void 0)?Ir().then((function(){return new Te((function(t,e){var n=u.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):Ce(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!==typeof Pr("universalLinks.subscribe",u))throw Nc("cordova-universal-links-plugin-fix is not installed");if("undefined"===typeof Pr("BuildInfo.packageName",u))throw Nc("cordova-plugin-buildinfo is not installed");if("function"!==typeof Pr("cordova.plugins.browsertab.openUrl",u))throw Nc("cordova-plugin-browsertab is not installed");if("function"!==typeof Pr("cordova.InAppBrowser.open",u))throw Nc("cordova-plugin-inappbrowser is not installed")}),(function(){throw new N("cordova-not-ready")}))},t.Pb=function(t,e){return e(new N("operation-not-supported-in-this-environment")),De()},t.Nb=function(){return Ce(new N("operation-not-supported-in-this-environment"))},t.ac=function(){return!1},t.Yb=function(){return!0},t.Ub=function(){return!0},t.Ob=function(t,e,n,r){if(this.c)return Ce(new N("redirect-operation-pending"));var i=this,o=u.document,a=null,s=null,c=null,h=null;return this.c=De().then((function(){return Ko(e),Cc(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new Ho(e,r,null,o,new N("no-auth-event"),null,i),s=Pr("BuildInfo.packageName",u);if("string"!==typeof s)throw new N("invalid-cordova-configuration");var c=Pr("BuildInfo.displayName",u),h={};if(xr().toLowerCase().match(/iphone|ipad|ipod/))h.ibi=s;else{if(!xr().toLowerCase().match(/android/))return Ce(new N("operation-not-supported-in-this-environment"));h.apn=s}c&&(h.appDisplayName=c),o=Rc(o),h.sessionId=o;var l=Eu(t.v,t.i,t.l,e,n,null,r,t.m,h,t.u,i,t.s);return t.ma().then((function(){var e=t.h;return t.C.a.set(dc,a.w(),e)})).then((function(){var e=Pr("cordova.plugins.browsertab.isAvailable",u);if("function"!==typeof e)throw new N("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!==typeof(n=Pr("cordova.plugins.browsertab.openUrl",u)))throw new N("invalid-cordova-configuration");n(l)}else{if("function"!==typeof(n=Pr("cordova.InAppBrowser.open",u)))throw new N("invalid-cordova-configuration");e=xr(),t.a=n(l,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new Te((function(t,e){s=function(){var e=Pr("cordova.plugins.browsertab.close",u);return t(),"function"===typeof e&&e(),i.a&&"function"===typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(s),c=function(){a||(a=Rn(2e3).then((function(){e(new N("redirect-cancelled-by-user"))})))},h=function(){Wr()&&c()},o.addEventListener("resume",c,!1),xr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",h,!1)})).o((function(t){return Oc(i).then((function(){throw t}))}))})).oa((function(){c&&o.removeEventListener("resume",c,!1),h&&o.removeEventListener("visibilitychange",h,!1),a&&a.cancel(),s&&i.Ta(s),i.c=null}))},t.Ea=function(t){this.b.push(t),Cc(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Ho("unknown",null,null,null,new N("no-auth-event")),t(e))}))},t.Ta=function(t){Y(this.b,(function(e){return e==t}))};var Pc={name:"pendingRedirect",F:"session"};function Lc(t){return hc(t.b,Pc,t.a)}function Mc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=T(this.s,this),this.b=new Zc,this.C=new nh,this.g=new xc(Xc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Uc(this.D,this.v,this.m,D,this.J)}function Uc(t,e,n,r,o){var a=i.Z.SDK_VERSION||null;return Tr()?new kc(t,e,n,a,r,o):new wu(t,e,n,a,r,o)}function Fc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o((function(n){throw t.a==e&&t.reset(),n}))}function jc(t){t.a.Yb()&&Fc(t).o((function(e){var n=new Ho("unknown",null,null,null,new N("operation-not-supported-in-this-environment"));Hc(e)&&t.s(n)})),t.a.Ub()||Yc(t.b)}function Vc(t,e){Q(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Pc,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?Lc(t.g).then((function(){Fc(t).o((function(e){var n=new Ho("unknown",null,null,null,new N("operation-not-supported-in-this-environment"));Hc(e)&&t.s(n)}))})):jc(t)})).o((function(){jc(t)}))}function qc(t,e){Y(t.h,(function(t){return t==e}))}Mc.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=Uc(this.D,this.v,this.m,null,this.J),this.i={}},Mc.prototype.s=function(t){if(!t)throw new N("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Gb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=Date.now())),e=!0;break}}return Yc(this.b),e};var Bc=new zr(2e3,1e4),Gc=new zr(3e4,6e4);function Kc(t,e,n,r,i,o,a){return t.a.Nb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,a)}function Hc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function zc(t,e,n,r,i){var o;return function(t){return t.b.set(Pc,"pending",t.a)}(t.g).then((function(){return t.a.Ob(e,n,r,i).o((function(e){if(Hc(e))throw new N("operation-not-supported-in-this-environment");return o=e,Lc(t.g).then((function(){throw o}))})).then((function(){return t.a.ac()?new Te((function(){})):Lc(t.g).then((function(){return t.ra()})).then((function(){})).o((function(){}))}))}))}function Wc(t,e,n,r,i){return t.a.Pb(r,(function(t){e.na(n,null,t,i)}),Bc.get())}Mc.prototype.ra=function(){return this.b.ra()};var Jc={};function Xc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Qc(t,e,n,r){var i=Xc(e,n,r);return Jc[i]||(Jc[i]=new Mc(t,e,n,r)),Jc[i]}function Zc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Yc(t){t.g||(t.g=!0,eh(t,!1,null,null))}function $c(t){t.g&&!t.i&&eh(t,!1,null,null)}function th(t,e){if(t.b=function(){return De(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function eh(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Ce(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):th(t,n):th(t,{user:null}),t.f=[],t.c=[]}function nh(){}function rh(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(t){this.jb=t},enumerable:!1})}function ih(t,e){this.a=e,ti(this,"verificationId",t)}function oh(t,e,n,r){return new qo(t).gb(e,n).then((function(t){return new ih(t,r)}))}function ah(t){var e=Xi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new N("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");ei(this,{token:t,expirationTime:Jr(1e3*e.exp),authTime:Jr(1e3*e.auth_time),issuedAtTime:Jr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function sh(t,e,n){var r=e&&e[ch];if(!r)throw new N("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=mt(e),this.g=n,this.c=new ho(null,r),this.b=[];var i=this;z(e[uh]||[],(function(t){(t=oi(t))&&i.b.push(t)})),ti(this,"auth",this.a),ti(this,"session",this.c),ti(this,"hints",this.b)}Zc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Zc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(eh(this,!0,null,t.a),De()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,a=e.T(),s=!!e.c.match(/Redirect$/);n(r,i,a,o).then((function(e){eh(t,s,e,null)})).o((function(e){eh(t,s,null,e)}))}(this,t,e):Ce(new N("invalid-auth-event")):(eh(this,!1,null,null),De())}else Ce(new N("invalid-auth-event"))},Zc.prototype.ra=function(){var t=this;return new Te((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new N("timeout");t.a&&t.a.cancel(),t.a=Rn(Gc.get()).then((function(){t.b||(t.g=!0,eh(t,!0,null,e))}))}(t))}))},nh.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),De()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then((function(t){e.na(r,t,null,n)})).o((function(t){e.na(r,null,t,n)}))}(t,e):Ce(new N("invalid-auth-event"))}else Ce(new N("invalid-auth-event"))},ih.prototype.confirm=function(t){return t=Bo(this.verificationId,t),this.a(t)};var uh="mfaInfo",ch="mfaPendingCredential";function hh(t,e,n,r){N.call(this,"multi-factor-auth-required",r,e),this.b=new sh(t,e,n),ti(this,"resolver",this.b)}function lh(t,e,n){if(t&&m(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new hh(e,t.serverResponse,n,t.message)}catch(r){}return null}function fh(){}function ph(t){ti(this,"factorId",t.fa),this.a=t}function dh(t){if(ph.call(this,t),this.a.fa!=qo.PROVIDER_ID)throw new N("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function vh(t,e){for(var n in $e.call(this,t),e)this[n]=e[n]}function gh(t,e){this.a=t,this.b=[],this.c=T(this.yc,this),fn(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&z(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[ui]=t.uid),t.displayName&&(r[ai]=t.displayName),t.enrollmentTime&&(r[si]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[ci]=t.phoneNumber);try{e=new hi(r)}catch(i){}t=e}else t=null;t&&n.push(t)})),mh(this,n)}function mh(t,e){t.b=e,ti(t,"enrolledFactors",e)}function yh(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function bh(t,e){t.stop(),t.b=Rn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then((function(){return function(){var t=u.document,e=null;return Wr()||!t?De():new Te((function(n){e=function(){Wr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return t.h()})).then((function(){bh(t,!0)})).o((function(e){t.i(e)&&bh(t,!1)}))}function wh(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function _h(t,e){"undefined"===typeof e&&(t.b?e=(e=t.b).a-e.g:e=0),t.c=Date.now()+1e3*e}function Ih(t,e){t.b=Ji(e[is]||""),t.a=e.refreshToken,_h(t,"undefined"!==typeof(e=e.expiresIn)?Number(e):void 0)}function Th(t,e){return function(t,e){return new Te((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?ps(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(lu(t)):t.access_token&&t.refresh_token?n(t):r(new N("internal-error")):r(new N("network-request-failed"))}),"POST",er(e).toString(),t.g,t.m.get()):r(new N("internal-error"))}))}(t.f,e).then((function(e){return t.b=Ji(e.access_token),t.a=e.refresh_token,_h(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}function Eh(t,e){this.a=t||null,this.b=e||null,ei(this,{lastSignInTime:Jr(e||null),creationTime:Jr(t||null)})}function Sh(t,e,n,r,i,o){ei(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function Ah(t,e,n){this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r=i.Z.SDK_VERSION?Or(i.Z.SDK_VERSION):null;this.a=new ns(this.l,P(D),r),(this.u=t.emulatorConfig||null)&&hs(this.a,this.u),this.h=new wh(this.a),Lh(this,e[is]),Ih(this.h,e),ti(this,"refreshToken",this.h.a),Fh(this,n||{}),En.call(this),this.P=!1,this.s&&Mr()&&(this.b=Qc(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=function(t){return new yh((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.h.c-Date.now()-3e5;return 0<e?e:0}))}(this),this.ba=T(this.ib,this);var o=this;this.za=null,this.Pa=function(t){o.xa(t.h)},this.qa=null,this.Ba=function(t){kh(o,t.c)},this.$=null,this.aa=[],this.Oa=function(t){Dh(o,t.f)},this.ja=null,this.S=new gh(this,n),ti(this,"multiFactor",this.S)}function kh(t,e){t.u=e,hs(t.a,e),t.b&&(e=t.b,t.b=Qc(t.s,t.l,t.m,t.u),t.P&&(qc(e,t),Vc(t.b,t)))}function Nh(t,e){t.qa&&vn(t.qa,"languageCodeChanged",t.Pa),(t.qa=e)&&fn(e,"languageCodeChanged",t.Pa)}function Rh(t,e){t.$&&vn(t.$,"emulatorConfigChanged",t.Ba),(t.$=e)&&fn(e,"emulatorConfigChanged",t.Ba)}function Dh(t,e){t.aa=e,fs(t.a,i.Z.SDK_VERSION?Or(i.Z.SDK_VERSION,t.aa):null)}function Ch(t,e){t.ja&&vn(t.ja,"frameworkChanged",t.Oa),(t.ja=e)&&fn(e,"frameworkChanged",t.Oa)}function Oh(t){try{return i.Z.app(t.m).auth()}catch(e){throw new N("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function xh(t){t.J||t.D.b||(t.D.start(),vn(t,"tokenChanged",t.ba),fn(t,"tokenChanged",t.ba))}function Ph(t){vn(t,"tokenChanged",t.ba),t.D.stop()}function Lh(t,e){t.Aa=e,ti(t,"_lat",e)}function Mh(t){for(var e=[],n=0;n<t.W.length;n++)e.push(t.W[n](t));return xe(e).then((function(){return t}))}function Uh(t){t.b&&!t.P&&(t.P=!0,Vc(t.b,t))}function Fh(t,e){ei(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new Eh(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function jh(){}function Vh(t){return De().then((function(){if(t.J)throw new N("app-deleted")}))}function qh(t){return J(t.providerData,(function(t){return t.providerId}))}function Bh(t,e){e&&(Gh(t,e.providerId),t.providerData.push(e))}function Gh(t,e){Y(t.providerData,(function(t){return t.providerId==e}))}function Kh(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&ti(t,e,n)}function Hh(t,e){t!=e&&(ei(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?ti(t,"metadata",function(t){return new Eh(t.a,t.b)}(e.metadata)):ti(t,"metadata",new Eh),z(e.providerData,(function(e){Bh(t,e)})),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.h,e.h),ti(t,"refreshToken",t.h.a),mh(t.S,e.S.b))}function zh(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return cu(t.a,Vs,{idToken:e}).then(T(t.Kc,t))}(t,e).then((function(){return n||Kh(t,"isAnonymous",!1),e}))}))}function Wh(t,e){e[is]&&t.Aa!=e[is]&&(Ih(t.h,e),t.dispatchEvent(new vh("tokenChanged")),Lh(t,e[is]),Kh(t,"refreshToken",t.h.a))}function Jh(t,e){return zh(t).then((function(){if(Q(qh(t),e))return Mh(t).then((function(){throw new N("provider-already-linked")}))}))}function Xh(t,e,n){return ni({user:t,credential:Go(e),additionalUserInfo:e=to(e),operationType:n})}function Qh(t,e){return Wh(t,e),t.reload().then((function(){return t}))}function Zh(t,e,n,r,o){if(!Mr())return Ce(new N("operation-not-supported-in-this-environment"));if(t.i&&!o)return Ce(t.i);var a=$i(n.providerId),s=Gr(t.uid+":::"),u=null;(!jr()||Er())&&t.s&&n.isOAuthProvider&&(u=Eu(t.s,t.l,t.m,e,n,null,s,i.Z.SDK_VERSION||null,null,null,t.tenantId,t.u));var c=br(u,a&&a.va,a&&a.ua);return r=r().then((function(){if($h(t),!o)return t.I().then((function(){}))})).then((function(){return Kc(t.b,c,e,n,s,!!u,t.tenantId)})).then((function(){return new Te((function(n,r){t.na(e,null,new N("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=s,t.c=Wc(t.b,t,e,c,s)}))})).then((function(t){return c&&yr(c),t?ni(t):null})).o((function(t){throw c&&yr(c),t})),tl(t,r,o)}function Yh(t,e,n,r,i){if(!Mr())return Ce(new N("operation-not-supported-in-this-environment"));if(t.i&&!i)return Ce(t.i);var o=null,a=Gr(t.uid+":::");return r=r().then((function(){if($h(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=a,Mh(t)})).then((function(e){return t.ha&&(e=(e=t.ha).b.set(rl,t.w(),e.a)),e})).then((function(){return zc(t.b,e,n,a,t.tenantId)})).o((function(e){if(o=e,t.ha)return il(t.ha);throw o})).then((function(){if(o)throw o})),tl(t,r,i)}function $h(t){if(!t.b||!t.P){if(t.b&&!t.P)throw new N("internal-error");throw new N("auth-domain-config-required")}}function tl(t,e,n){var r=function(t,e,n){return t.i&&!n?(e.cancel(),Ce(t.i)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.i||t.dispatchEvent(new vh("userInvalidated")),t.i=e),e}))}(t,e,n);return t.N.push(r),r.oa((function(){Z(t.N,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=lh(e.w(),Oh(t),T(t.jc,t))),n||e}))}function el(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[is]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new Ah(e,n,t);return t.providerData&&z(t.providerData,(function(t){t&&Bh(i,ni(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function nl(t){this.a=t,this.b=sc()}sh.prototype.Rc=function(t){var e=this;return t.tb(this.a.a,this.c).then((function(t){var n=mt(e.f);return delete n[uh],delete n[ch],bt(n,t),e.g(n)}))},A(hh,N),fh.prototype.tb=function(t,e,n){return e.type==lo?function(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},"undefined"!==typeof r&&(n.displayName=r),bt(n,{phoneVerificationInfo:Vo(t.a)}),cu(e,Fs,n)}))}(this,t,e,n):function(t,e,n){return n.Ha().then((function(n){return bt(n={mfaPendingCredential:n},{phoneVerificationInfo:Vo(t.a)}),cu(e,js,n)}))}(this,t,e)},A(ph,fh),A(dh,ph),A(vh,$e),(t=gh.prototype).yc=function(t){mh(this,function(t){var e=[];return z(t.mfaInfo||[],(function(t){(t=oi(t))&&e.push(t)})),e}(t.hd))},t.Sb=function(){return this.a.I().then((function(t){return new ho(t,null)}))},t.fc=function(t,e){var n=this,r=this.a.a;return this.Sb().then((function(n){return t.tb(r,n,e)})).then((function(t){return Wh(n.a,t),n.a.reload()}))},t.bd=function(t){var e=this,n="string"===typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return cu(r,uu,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=W(e.b,(function(t){return t.uid!=n}));return mh(e,r),Wh(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.w=function(){return{multiFactor:{enrolledFactors:J(this.b,(function(t){return t.w()}))}}},yh.prototype.start=function(){this.a=this.c,bh(this,!0)},yh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},wh.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},wh.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Ce(new N("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?Th(this,{grant_type:"refresh_token",refresh_token:this.a}):De(null):De({accessToken:this.b.toString(),refreshToken:this.a})},Eh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},A(Ah,En),Ah.prototype.xa=function(t){this.za=t,cs(this.a,t)},Ah.prototype.la=function(){return this.za},Ah.prototype.Ga=function(){return tt(this.aa)},Ah.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())},ti(Ah.prototype,"providerId","firebase"),(t=Ah.prototype).reload=function(){var t=this;return tl(this,Vh(this).then((function(){return zh(t).then((function(){return Mh(t)})).then(jh)})))},t.oc=function(t){return this.I(t).then((function(t){return new ah(t)}))},t.I=function(t){var e=this;return tl(this,Vh(this).then((function(){return e.h.getToken(t)})).then((function(t){if(!t)throw new N("internal-error");return t.accessToken!=e.Aa&&(Lh(e,t.accessToken),e.dispatchEvent(new vh("tokenChanged"))),Kh(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new N("internal-error");Fh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?J(t,(function(t){return new Sh(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)Bh(this,e[n]);Kh(this,"isAnonymous",!(this.email&&t.passwordHash)&&!(this.providerData&&this.providerData.length)),this.dispatchEvent(new vh("userReloaded",{hd:t}))},t.Lc=function(t){return Yr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(t)},t.ub=function(t){var e=this,n=null;return tl(this,t.c(this.a,this.uid).then((function(t){return Wh(e,t),n=Xh(e,t,"reauthenticate"),e.i=null,e.reload()})).then((function(){return n})),!0)},t.Cc=function(t){return Yr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(t)},t.rb=function(t){var e=this,n=null;return tl(this,Jh(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=Xh(e,t,"link"),Qh(e,t)})).then((function(){return n})))},t.Dc=function(t,e){var n=this;return tl(this,Jh(this,"phone").then((function(){return oh(Oh(n),t,e,T(n.rb,n))})))},t.Mc=function(t,e){var n=this;return tl(this,De().then((function(){return oh(Oh(n),t,e,T(n.ub,n))})),!0)},t.Cb=function(t){var e=this;return tl(this,this.I().then((function(n){return e.a.Cb(n,t)})).then((function(t){return Wh(e,t),e.reload()})))},t.ed=function(t){var e=this;return tl(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return Wh(e,t),e.reload()})))},t.Db=function(t){var e=this;return tl(this,this.I().then((function(n){return e.a.Db(n,t)})).then((function(t){return Wh(e,t),e.reload()})))},t.Eb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Vh(this);var e=this;return tl(this,this.I().then((function(n){return e.a.Eb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return Wh(e,t),Kh(e,"displayName",t.displayName||null),Kh(e,"photoURL",t.photoUrl||null),z(e.providerData,(function(t){"password"===t.providerId&&(ti(t,"displayName",e.displayName),ti(t,"photoURL",e.photoURL))})),Mh(e)})).then(jh))},t.cd=function(t){var e=this;return tl(this,zh(this).then((function(n){return Q(qh(e),t)?function(t,e,n){return cu(t,Ls,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return z(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),z(qh(e),(function(t){n[t]||Gh(e,t)})),n[qo.PROVIDER_ID]||ti(e,"phoneNumber",null),Mh(e)})):Mh(e).then((function(){throw new N("no-such-provider")}))})))},t.delete=function(){var t=this;return tl(this,this.I().then((function(e){return cu(t.a,Ps,{idToken:e})})).then((function(){t.dispatchEvent(new vh("userDeleted"))}))).then((function(){for(var e=0;e<t.N.length;e++)t.N[e].cancel("app-deleted");Nh(t,null),Rh(t,null),Ch(t,null),t.N=[],t.J=!0,Ph(t),ti(t,"refreshToken",null),t.b&&qc(t.b,t)}))},t.Gb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?T(this.Lb,this):"reauthViaPopup"==t&&e==(this.g||null)?T(this.Mb,this):"linkViaRedirect"==t&&(this.ga||null)==e?T(this.Lb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?T(this.Mb,this):null},t.Ec=function(t){var e=this;return Zh(this,"linkViaPopup",t,(function(){return Jh(e,t.providerId).then((function(){return Mh(e)}))}),!1)},t.Nc=function(t){return Zh(this,"reauthViaPopup",t,(function(){return De()}),!0)},t.Fc=function(t){var e=this;return Yh(this,"linkViaRedirect",t,(function(){return Jh(e,t.providerId)}),!1)},t.Oc=function(t){return Yh(this,"reauthViaRedirect",t,(function(){return De()}),!0)},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return tl(this,this.I().then((function(n){return ks(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=Xh(i,t,"link"),Qh(i,t)})).then((function(){return o})))},t.Mb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return tl(this,De().then((function(){return vo(Ns(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=Xh(i,t,"reauthenticate"),Wh(i,t),i.i=null,i.reload()})).then((function(){return o})),!0)},t.vb=function(t){var e=this,n=null;return tl(this,this.I().then((function(e){return n=e,"undefined"===typeof t||gt(t)?{}:Ki(new Pi(t))})).then((function(t){return e.a.vb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Fb=function(t,e){var n=this,r=null;return tl(this,this.I().then((function(t){return r=t,"undefined"===typeof e||gt(e)?{}:Ki(new Pi(e))})).then((function(e){return n.a.Fb(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.jc=function(t){var e=null,n=this;return tl(this,t=vo(De(t),n.uid).then((function(t){return e=Xh(n,t,"reauthenticate"),Wh(n,t),n.i=null,n.reload()})).then((function(){return e})),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&bt(t,this.metadata.w()),z(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),bt(t,this.S.w()),t};var rl={name:"redirectUser",F:"session"};function il(t){return hc(t.b,rl,t.a)}function ol(t){this.a=t,this.b=sc(),this.c=null,this.f=function(t){var e=ul("local"),n=ul("session"),r=ul("none");return function(t,e,n){var r=cc(e,n),i=uc(t,e.F);return t.get(e,n).then((function(o){var a=null;try{a=Br(u.localStorage.getItem(r))}catch(s){}if(a&&!o)return u.localStorage.removeItem(r),t.set(e,a,n);a&&o&&"localStorage"!=i.type&&u.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(sl,t.a).then((function(t){return t?ul(t):e}))}))}))})).then((function(e){return t.c=e,al(t,e.F)})).o((function(){t.c||(t.c=e)}))}(this),this.b.addListener(ul("local"),this.a,T(this.g,this))}function al(t,e){var n,r=[];for(n in oc)oc[n]!==e&&r.push(hc(t.b,ul(oc[n]),t.a));return r.push(hc(t.b,sl,t.a)),function(t){return new Te((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},a=function(t){n(t)},s=0;s<t.length;s++)Oe(t[s],E(o,s),a);else e(i)}))}(r)}ol.prototype.g=function(){var t=this,e=ul("local");fl(this,(function(){return De().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return al(t,"local").then((function(){t.c=e}))}))}))};var sl={name:"persistence",F:"session"};function ul(t){return{name:"authUser",F:t}}function cl(t,e){return fl(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function hl(t){return fl(t,(function(){return hc(t.b,t.c,t.a)}))}function ll(t,e,n){return fl(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),el(t||{})}))}))}function fl(t,e){return t.f=t.f.then(e,e),t.f}function pl(t){if(this.l=!1,ti(this,"settings",new rh),ti(this,"app",t),!Il(this).options||!Il(this).options.apiKey)throw new N("invalid-api-key");t=i.Z.SDK_VERSION?Or(i.Z.SDK_VERSION):null,this.a=new ns(Il(this).options&&Il(this).options.apiKey,P(D),t),this.P=[],this.s=[],this.N=[],this.Pa=i.Z.INTERNAL.createSubscribe(T(this.zc,this)),this.W=void 0,this.ib=i.Z.INTERNAL.createSubscribe(T(this.Ac,this)),wl(this,null),this.i=new ol(Il(this).options.apiKey+":"+Il(this).name),this.D=new nl(Il(this).options.apiKey+":"+Il(this).name),this.$=Al(this,function(t){var e=Il(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(rl,t.a).then((function(t){return t&&e&&(t.authDomain=e),el(t||{})}))}(t.D,Il(t).options.authDomain).then((function(e){return(t.m=e)&&(e.ha=t.D),il(t.D)}));return Al(t,e)}(t).then((function(){return ll(t.i,e,t.R)})).then((function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then((function(){return cl(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:hl(t.i)}))):null})).then((function(e){wl(t,e||null)}));return Al(t,n)}(this)),this.h=Al(this,function(t){return t.$.then((function(){return yl(t)})).o((function(){})).then((function(){if(!t.l)return t.ja()})).o((function(){})).then((function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(ul("local"),e.a,t.ja)}}))}(this)),this.ba=!1,this.ja=T(this.Zc,this),this.Ba=T(this.da,this),this.qa=T(this.mc,this),this.za=T(this.wc,this),this.Aa=T(this.xc,this),this.b=null,function(t){var e=Il(t).options.authDomain,n=Il(t).options.apiKey;e&&Mr()&&(t.Oa=t.$.then((function(){if(!t.l){if(t.b=Qc(e,n,Il(t).name,t.R),Vc(t.b,t),Tl(t)&&Uh(Tl(t)),t.m){Uh(t.m);var r=t.m;r.xa(t.la()),Nh(r,t),Dh(r=t.m,t.J),Ch(r,t),kh(r=t.m,t.R),Rh(r,t),t.m=null}return t.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=T(this.delete,this),this.INTERNAL.logFramework=T(this.Gc,this),this.u=0,En.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.xa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.zb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.R){var t=Gn(this.R.url);t=ni({protocol:t.c,host:t.a,port:t.g,options:ni({disableWarnings:this.R.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.R=null}function dl(t){$e.call(this,"languageCodeChanged"),this.h=t}function vl(t){$e.call(this,"emulatorConfigChanged"),this.c=t}function gl(t){$e.call(this,"frameworkChanged"),this.f=t}function ml(t){return t.Oa||Ce(new N("auth-domain-config-required"))}function yl(t){if(!Mr())return Ce(new N("operation-not-supported-in-this-environment"));var e=ml(t).then((function(){return t.b.ra()})).then((function(t){return t?ni(t):null}));return Al(t,e)}function bl(t,e){var n={};return n.apiKey=Il(t).options.apiKey,n.authDomain=Il(t).options.authDomain,n.appName=Il(t).name,t.R&&(n.emulatorConfig=t.R),t.$.then((function(){return function(t,e,n,r){var i=new Ah(t,e);return n&&(i.ha=n),r&&Dh(i,r),i.reload().then((function(){return i}))}(n,e,t.D,t.Ga())})).then((function(e){return Tl(t)&&e.uid==Tl(t).uid?(Hh(Tl(t),e),t.da(e)):(wl(t,e),Uh(e),t.da(e))})).then((function(){Sl(t)}))}function wl(t,e){Tl(t)&&(function(t,e){Y(t.W,(function(t){return t==e}))}(Tl(t),t.Ba),vn(Tl(t),"tokenChanged",t.qa),vn(Tl(t),"userDeleted",t.za),vn(Tl(t),"userInvalidated",t.Aa),Ph(Tl(t))),e&&(e.W.push(t.Ba),fn(e,"tokenChanged",t.qa),fn(e,"userDeleted",t.za),fn(e,"userInvalidated",t.Aa),0<t.u&&xh(e)),ti(t,"currentUser",e),e&&(e.xa(t.la()),Nh(e,t),Dh(e,t.J),Ch(e,t),kh(e,t.R),Rh(e,t))}function _l(t,e){var n=null,r=null;return Al(t,e.then((function(e){return n=Go(e),r=to(e),bl(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=lh(e.w(),t,T(t.kc,t))),n||e})).then((function(){return ni({user:Tl(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function Il(t){return t.app}function Tl(t){return t.currentUser}function El(t){return Tl(t)&&Tl(t)._lat||null}function Sl(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](El(t));if(t.W!==t.getUid()&&t.N.length)for(t.W=t.getUid(),e=0;e<t.N.length;e++)t.N[e]&&t.N[e](El(t))}}function Al(t,e){return t.P.push(e),e.oa((function(){Z(t.P,e)})),e}function kl(){}function Nl(){this.a={},this.b=1e12}ol.prototype.yb=function(t){var e=null,n=this;return function(t){var e=new N("invalid-persistence-type"),n=new N("unsupported-persistence-type");t:{for(r in oc)if(oc[r]==t){var r=!0;break t}r=!1}if(!r||"string"!==typeof t)throw e;switch(Ar()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Fu()&&"none"!==t)throw n;break;default:if(!Lr()&&"none"!==t)throw n}}(t),fl(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,al(n,t)})).then((function(){if(n.c=ul(t),e)return n.b.set(n.c,e,n.a)})):De()}))},A(pl,En),A(dl,$e),A(vl,$e),A(gl,$e),(t=pl.prototype).yb=function(t){return Al(this,t=this.i.yb(t))},t.xa=function(t){this.aa===t||this.l||(this.aa=t,cs(this.a,this.aa),this.dispatchEvent(new dl(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=u.navigator;this.xa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.R){if(!/^https?:\/\//.test(t))throw new N("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),u.document&&!t&&Ir().then((function(){var t=u.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#b50000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),u.document.body.appendChild(t)}))})(e=!!e&&!!e.disableWarnings),this.R={url:t,ec:e},this.settings.jb=!0,hs(this.a,this.R),this.dispatchEvent(new vl(this.R))}},t.Gc=function(t){this.J.push(t),fs(this.a,i.Z.SDK_VERSION?Or(i.Z.SDK_VERSION,this.J):null),this.dispatchEvent(new gl(this.J))},t.Ga=function(){return tt(this.J)},t.zb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:Il(this).options.apiKey,authDomain:Il(this).options.authDomain,appName:Il(this).name,currentUser:Tl(this)&&Tl(this).w()}},t.Gb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?T(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return _l(i,As(i.a,o))}))},t.Xc=function(t){if(!Mr())return Ce(new N("operation-not-supported-in-this-environment"));var e=this,n=$i(t.providerId),r=Gr(),o=null;(!jr()||Er())&&Il(this).options.authDomain&&t.isOAuthProvider&&(o=Eu(Il(this).options.authDomain,Il(this).options.apiKey,Il(this).name,"signInViaPopup",t,null,r,i.Z.SDK_VERSION||null,null,null,this.T(),this.R));var a=br(o,n&&n.va,n&&n.ua);return Al(this,n=ml(this).then((function(n){return Kc(n,a,"signInViaPopup",t,r,!!o,e.T())})).then((function(){return new Te((function(t,n){e.na("signInViaPopup",null,new N("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=r,e.c=Wc(e.b,e,"signInViaPopup",a,r)}))})).then((function(t){return a&&yr(a),t?ni(t):null})).o((function(t){throw a&&yr(a),t})))},t.Yc=function(t){if(!Mr())return Ce(new N("operation-not-supported-in-this-environment"));var e=this;return Al(this,ml(this).then((function(){return function(t){return fl(t,(function(){return t.b.set(sl,t.c.F,t.a)}))}(e.i)})).then((function(){return zc(e.b,"signInViaRedirect",t,void 0,e.T())})))},t.ra=function(){var t=this;return yl(this).then((function(e){return t.b&&$c(t.b.b),e})).o((function(e){throw t.b&&$c(t.b.b),e}))},t.dd=function(t){if(!t)return Ce(new N("null-user"));if(this.S!=t.tenantId)return Ce(new N("tenant-id-mismatch"));var e=this,n={};n.apiKey=Il(this).options.apiKey,n.authDomain=Il(this).options.authDomain,n.appName=Il(this).name;var r=function(t,e,n,r){var i=t.h,o={};return o[is]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new Ah(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&Dh(e,r),Hh(e,t),e}(t,n,e.D,e.Ga());return Al(this,this.h.then((function(){if(Il(e).options.apiKey!=t.l)return r.reload()})).then((function(){return Tl(e)&&t.uid==Tl(e).uid?(Hh(Tl(e),t),e.da(t)):(wl(e,r),Uh(r),e.da(r))})).then((function(){Sl(e)})))},t.Bb=function(){var t=this;return Al(this,this.h.then((function(){return t.b&&$c(t.b.b),Tl(t)?(wl(t,null),hl(t.i).then((function(){Sl(t)}))):De()})))},t.Zc=function(){var t=this;return ll(this.i,Il(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=Tl(t)&&e){n=Tl(t).uid;var r=e.uid;n=void 0!==n&&null!==n&&""!==n&&void 0!==r&&null!==r&&""!==r&&n==r}if(n)return Hh(Tl(t),e),Tl(t).I();(Tl(t)||e)&&(wl(t,e),e&&(Uh(e),e.ha=t.D),t.b&&Vc(t.b,t),Sl(t))}}))},t.da=function(t){return cl(this.i,t)},t.mc=function(){Sl(this),this.da(Tl(this))},t.wc=function(){this.Bb()},t.xc=function(){this.Bb()},t.kc=function(t){var e=this;return this.h.then((function(){return _l(e,De(t))}))},t.zc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(Tl(e))}))},t.Ac=function(t){var e=this;!function(t,e){t.N.push(e),Al(t,t.h.then((function(){!t.l&&Q(t.N,e)&&t.W!==t.getUid()&&(t.W=t.getUid(),e(El(t)))})))}(this,(function(){t.next(Tl(e))}))},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"===typeof t?t(Tl(r)):"function"===typeof t.next&&t.next(Tl(r))})),this.Pa(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.W=r.getUid(),"function"===typeof t?t(Tl(r)):"function"===typeof t.next&&t.next(Tl(r))})),this.ib(t,e,n)},t.nc=function(t){var e=this;return Al(this,this.h.then((function(){return Tl(e)?Tl(e).I(t).then((function(t){return{accessToken:t}})):null})))},t.Tc=function(t){var e=this;return this.h.then((function(){return _l(e,cu(e.a,ru,{token:t}))})).then((function(t){var n=t.user;return Kh(n,"isAnonymous",!1),e.da(n),t}))},t.Uc=function(t,e){var n=this;return this.h.then((function(){return _l(n,cu(n.a,iu,{email:t,password:e}))}))},t.dc=function(t,e){var n=this;return this.h.then((function(){return _l(n,cu(n.a,Os,{email:t,password:e}))}))},t.ab=function(t){var e=this;return this.h.then((function(){return _l(e,t.ka(e.a))}))},t.Sc=function(t){return Yr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(t)},t.Ab=function(){var t=this;return this.h.then((function(){var e=Tl(t);if(e&&e.isAnonymous){var n=ni({providerId:null,isNewUser:!1});return ni({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return _l(t,t.a.Ab()).then((function(e){var n=e.user;return Kh(n,"isAnonymous",!0),t.da(n),e}))}))},t.getUid=function(){return Tl(this)&&Tl(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&Tl(this)&&xh(Tl(this))},t.Pc=function(t){var e=this;z(this.s,(function(n){n==t&&e.u--})),0>this.u&&(this.u=0),0==this.u&&Tl(this)&&Ph(Tl(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),Al(this,this.h.then((function(){e.l||Q(e.s,t)&&t(El(e))})))},t.removeAuthTokenListener=function(t){Y(this.s,(function(e){return e==t}))},t.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel("app-deleted");return this.P=[],this.i&&(t=this.i).b.removeListener(ul("local"),t.a,this.ja),this.b&&(qc(this.b,this),$c(this.b.b)),Promise.resolve()},t.hc=function(t){return Al(this,function(t,e){return cu(t,xs,{identifier:e,continueUri:Ur()?dr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,t))},t.Bc=function(t){return!!Uo(t)},t.xb=function(t,e){var n=this;return Al(this,De().then((function(){var t=new Pi(e);if(!t.c)throw new N("argument-error",Ui+" must be true when sending sign in link to email");return Ki(t)})).then((function(e){return n.a.xb(t,e)})).then((function(){})))},t.jd=function(t){return this.Sa(t).then((function(t){return t.data.email}))},t.ob=function(t,e){return Al(this,this.a.ob(t,e).then((function(){})))},t.Sa=function(t){return Al(this,this.a.Sa(t).then((function(t){return new li(t)})))},t.kb=function(t){return Al(this,this.a.kb(t).then((function(){})))},t.wb=function(t,e){var n=this;return Al(this,De().then((function(){return"undefined"===typeof e||gt(e)?{}:Ki(new Pi(e))})).then((function(e){return n.a.wb(t,e)})).then((function(){})))},t.Wc=function(t,e){return Al(this,oh(this,t,e,T(this.ab,this)))},t.Vc=function(t,e){var n=this;return Al(this,De().then((function(){var r=e||dr(),i=Mo(t,r);if(!(r=Uo(r)))throw new N("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new N("tenant-id-mismatch");return n.ab(i)})))},kl.prototype.render=function(){},kl.prototype.reset=function(){},kl.prototype.getResponse=function(){},kl.prototype.execute=function(){};var Rl=null;function Dl(t,e){return(e=Cl(e))&&t.a[e]||null}function Cl(t){return(t="undefined"===typeof t?1e12:t)?t.toString():null}function Ol(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=le(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():fn(this.f,"click",this.i)}function xl(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function Pl(){}function Ll(){}Nl.prototype.render=function(t,e){return this.a[this.b.toString()]=new Ol(t,e),this.b++},Nl.prototype.reset=function(t){var e=Dl(this,t);t=Cl(t),e&&t&&(e.delete(),delete this.a[t])},Nl.prototype.getResponse=function(t){return(t=Dl(this,t))?t.getResponse():null},Nl.prototype.execute=function(t){(t=Dl(this,t))&&t.execute()},Ol.prototype.getResponse=function(){return xl(this),this.b},Ol.prototype.execute=function(){xl(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(r){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(r){}t.h&&t.execute()}),6e4)}),500))},Ol.prototype.delete=function(){xl(this),this.g=!0,clearTimeout(this.a),this.a=null,vn(this.f,"click",this.i)},ti(Pl,"FACTOR_ID","phone"),Ll.prototype.g=function(){return Rl||(Rl=new Nl),De(Rl)},Ll.prototype.c=function(){};var Ml=null;function Ul(){this.b=u.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Fl=new _t(St,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),jl=new zr(3e4,6e4);Ul.prototype.g=function(t){var e=this;return new Te((function(n,r){var i=setTimeout((function(){r(new N("network-request-failed"))}),jl.get());!u.grecaptcha||t!==e.f&&!e.b?(u[e.a]=function(){if(u.grecaptcha){e.f=t;var o=u.grecaptcha.render;u.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(u.grecaptcha)}else clearTimeout(i),r(new N("internal-error"));delete u[e.a]},De(Xa(Rt(Fl,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new N("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(u.grecaptcha))}))},Ul.prototype.c=function(){this.b--};var Vl=null;function ql(t,e,n,r,i,o,a){if(ti(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=e,this.g=null,a?(Ml||(Ml=new Ll),a=Ml):(Vl||(Vl=new Ul),a=Vl),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Kl])throw new N("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Hl],!u.document)throw new N("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!le(e)||!this.i&&le(e).hasChildNodes())throw new N("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new ns(t,o||null,i||null),this.u=r||function(){return null};var s=this;this.l=[];var c=this.a[Bl];this.a[Bl]=function(t){if(zl(s,t),"function"===typeof c)c(t);else if("string"===typeof c){var e=Pr(c,u);"function"===typeof e&&e(t)}};var h=this.a[Gl];this.a[Gl]=function(){if(zl(s,null),"function"===typeof h)h();else if("string"===typeof h){var t=Pr(h,u);"function"===typeof t&&t()}}}var Bl="callback",Gl="expired-callback",Kl="sitekey",Hl="size";function zl(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(r){}}function Wl(t,e){return t.h.push(e),e.oa((function(){Z(t.h,e)})),e}function Jl(t){if(t.J)throw new N("internal-error","RecaptchaVerifier instance has been destroyed.")}function Xl(t,e,n){var r=!1;try{this.b=n||i.Z.app()}catch(s){throw new N("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new N("invalid-api-key");n=this.b.options.apiKey;var o=this,a=null;try{a=this.b.auth().Ga()}catch(s){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(s){}a=i.Z.SDK_VERSION?Or(i.Z.SDK_VERSION,a):null,ql.call(this,n,t,e,(function(){try{var t=o.b.auth().la()}catch(e){t=null}return t}),a,P(D),r)}function Ql(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new N("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Zl.length)throw new N("internal-error","Argument validator received an unsupported number of arguments.");n=Zl[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new N("argument-error",t+" failed: "+r)}(t=ql.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=Wl(this,De().then((function(){if(Ur()&&!Sr())return Ir();throw new N("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.u())})).then((function(e){return t.g=e,cu(t.s,zs,{})})).then((function(e){t.a[Kl]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},t.render=function(){Jl(this);var t=this;return Wl(this,this.Ia().then((function(){if(null===t.c){var e=t.v;if(!t.i){var n=le(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!he&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',zt(a.name),'"'),a.type){o.push(' type="',zt(a.type),'"');var s={};bt(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=me(i,o),a&&("string"===typeof a?o.className=a:Array.isArray(a)?o.className=a.join(" "):fe(o,a)),2<r.length&&ge(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){Jl(this);var t=this;return Wl(this,this.render().then((function(e){return new Te((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){Y(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){Jl(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Jl(this),this.J=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=le(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},A(Xl,ql);var Zl="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Yl(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"===typeof t}}}function $l(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"===typeof t}}}function tf(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:m}}function ef(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"===typeof t}}}function nf(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function rf(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ka||!n)}}}function of(t,e){return m(t)&&"string"===typeof t.type&&t.type===e&&"function"===typeof t.Ha}function af(t){return m(t)&&"string"===typeof t.uid}function sf(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function uf(t,e){for(var n in e){var r=e[n].name;t[r]=lf(r,t[n],e[n].j)}}function cf(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:E((function(t){return this[t]}),n),set:E((function(t,e,n,r){Ql(t,[n],[r],!0),this[e]=r}),r,n,e[n].lb),enumerable:!0})}}function hf(t,e,n,r){t[e]=lf(e,n,r)}function lf(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Ql(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}uf(pl.prototype,{kb:{name:"applyActionCode",j:[Yl("code")]},Sa:{name:"checkActionCode",j:[Yl("code")]},ob:{name:"confirmPasswordReset",j:[Yl("code"),Yl("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Yl("email"),Yl("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Yl("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Yl("emailLink")]},Hc:{name:"onAuthStateChanged",j:[sf(tf(),ef(),"nextOrObserver"),ef("opt_error",!0),ef("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[sf(tf(),ef(),"nextOrObserver"),ef("opt_error",!0),ef("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[Yl("email"),sf(tf("opt_actionCodeSettings",!0),nf(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[Yl("email"),tf("actionCodeSettings")]},yb:{name:"setPersistence",j:[Yl("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[rf()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[rf()]},Tc:{name:"signInWithCustomToken",j:[Yl("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Yl("email"),Yl("password")]},Vc:{name:"signInWithEmailLink",j:[Yl("email"),Yl("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Yl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!==typeof t.type||"function"!==typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[sf({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof Ah)}},nf(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Yl(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Yl("url"),tf("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Yl("code")]}}),cf(pl.prototype,{lc:{name:"languageCode",lb:sf(Yl(),nf(),"languageCode")},ti:{name:"tenantId",lb:sf(Yl(),nf(),"tenantId")}}),pl.Persistence=oc,pl.Persistence.LOCAL="local",pl.Persistence.SESSION="session",pl.Persistence.NONE="none",uf(Ah.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[$l("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[$l("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[rf()]},rb:{name:"linkWithCredential",j:[rf()]},Dc:{name:"linkWithPhoneNumber",j:[Yl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!==typeof t.type||"function"!==typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[rf()]},ub:{name:"reauthenticateWithCredential",j:[rf()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Yl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!==typeof t.type||"function"!==typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[sf(tf("opt_actionCodeSettings",!0),nf(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Yl(null,!0)]},cd:{name:"unlink",j:[Yl("provider")]},Cb:{name:"updateEmail",j:[Yl("email")]},Db:{name:"updatePassword",j:[Yl("password")]},ed:{name:"updatePhoneNumber",j:[rf("phone")]},Eb:{name:"updateProfile",j:[tf("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[Yl("email"),sf(tf("opt_actionCodeSettings",!0),nf(null,!0),"opt_actionCodeSettings",!0)]}}),uf(Nl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),uf(kl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),uf(Te.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),cf(rh.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:$l("appVerificationDisabledForTesting")}}),uf(ih.prototype,{confirm:{name:"confirm",j:[Yl("verificationCode")]}}),hf(po,"fromJSON",(function(t){t="string"===typeof t?JSON.parse(t):t;for(var e,n=[_o,Po,jo,yo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[sf(Yl(),tf(),"json")]),hf(Lo,"credential",(function(t,e){return new xo(t,e)}),[Yl("email"),Yl("password")]),uf(xo.prototype,{w:{name:"toJSON",j:[Yl(null,!0)]}}),uf(So.prototype,{Ca:{name:"addScope",j:[Yl("scope")]},Ka:{name:"setCustomParameters",j:[tf("customOAuthParameters")]}}),hf(So,"credential",Ao,[sf(Yl(),tf(),"token")]),hf(Lo,"credentialWithLink",Mo,[Yl("email"),Yl("emailLink")]),uf(ko.prototype,{Ca:{name:"addScope",j:[Yl("scope")]},Ka:{name:"setCustomParameters",j:[tf("customOAuthParameters")]}}),hf(ko,"credential",No,[sf(Yl(),tf(),"token")]),uf(Ro.prototype,{Ca:{name:"addScope",j:[Yl("scope")]},Ka:{name:"setCustomParameters",j:[tf("customOAuthParameters")]}}),hf(Ro,"credential",Do,[sf(Yl(),sf(tf(),nf()),"idToken"),sf(Yl(),nf(),"accessToken",!0)]),uf(Co.prototype,{Ka:{name:"setCustomParameters",j:[tf("customOAuthParameters")]}}),hf(Co,"credential",Oo,[sf(Yl(),tf(),"token"),Yl("secret",!0)]),uf(Eo.prototype,{Ca:{name:"addScope",j:[Yl("scope")]},credential:{name:"credential",j:[sf(Yl(),sf(tf(),nf()),"optionsOrIdToken"),sf(Yl(),nf(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[tf("customOAuthParameters")]}}),uf(bo.prototype,{w:{name:"toJSON",j:[Yl(null,!0)]}}),uf(go.prototype,{w:{name:"toJSON",j:[Yl(null,!0)]}}),hf(qo,"credential",Bo,[Yl("verificationId"),Yl("verificationCode")]),uf(qo.prototype,{gb:{name:"verifyPhoneNumber",j:[sf(Yl(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?of(t.session,lo)&&"string"===typeof t.phoneNumber:t.session&&t.multiFactorHint?of(t.session,fo)&&af(t.multiFactorHint):t.session&&t.multiFactorUid?of(t.session,fo)&&"string"===typeof t.multiFactorUid:!!t.phoneNumber&&"string"===typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!==typeof t.type||"function"!==typeof t.verify)}}]}}),uf(Fo.prototype,{w:{name:"toJSON",j:[Yl(null,!0)]}}),uf(N.prototype,{toJSON:{name:"toJSON",j:[Yl(null,!0)]}}),uf(Zo.prototype,{toJSON:{name:"toJSON",j:[Yl(null,!0)]}}),uf(Qo.prototype,{toJSON:{name:"toJSON",j:[Yl(null,!0)]}}),uf(hh.prototype,{toJSON:{name:"toJSON",j:[Yl(null,!0)]}}),uf(sh.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}}]}}),uf(gh.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}},Yl("displayName",!0)]},bd:{name:"unenroll",j:[sf({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:af},Yl(),"multiFactorInfoIdentifier")]}}),uf(Xl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),hf(Si,"parseLink",xi,[Yl("link")]),hf(Pl,"assertion",(function(t){return new dh(t)}),[rf("phone")]),function(){if("undefined"===typeof i.Z||!i.Z.INTERNAL||!i.Z.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:pi,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:fi,VERIFY_AND_CHANGE_EMAIL:di,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:pl,AuthCredential:po,Error:N};hf(t,"EmailAuthProvider",Lo,[]),hf(t,"FacebookAuthProvider",So,[]),hf(t,"GithubAuthProvider",ko,[]),hf(t,"GoogleAuthProvider",Ro,[]),hf(t,"TwitterAuthProvider",Co,[]),hf(t,"OAuthProvider",Eo,[Yl("providerId")]),hf(t,"SAMLAuthProvider",To,[Yl("providerId")]),hf(t,"PhoneAuthProvider",qo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof pl)}}]),hf(t,"RecaptchaVerifier",Xl,[sf(Yl(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),tf("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof i.Z.app.App)}}]),hf(t,"ActionCodeURL",Si,[]),hf(t,"PhoneMultiFactorGenerator",Pl,[]),i.Z.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new pl(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(t){t.getProvider("auth-internal").initialize()}}),i.Z.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:T((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:T(t.nc,t),addAuthTokenListener:T(t.cc,t),removeAuthTokenListener:T(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),i.Z.registerVersion("@firebase/auth","0.16.8"),i.Z.INTERNAL.extendNamespace({User:Ah})}()}).apply("undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var o=n(655),a=n(4589),s=n(4594),u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function c(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var h,l="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},f=f||{},p=l||self;function d(){}function v(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function g(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var m="closure_uid_"+(1e9*Math.random()>>>0),y=0;function b(t,e,n){return t.call.apply(t.bind,arguments)}function w(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function _(t,e,n){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?b:w).apply(null,arguments)}function I(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function T(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function E(){this.s=this.s,this.o=this.o}var S={};E.prototype.s=!1,E.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,m)&&t[m]||(t[m]=++y)}(this);delete S[t]}},E.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var A=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},k=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"===typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function N(t){return Array.prototype.concat.apply([],arguments)}function R(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function D(t){return/^[\s\xa0]*$/.test(t)}var C,O=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function x(t,e){return-1!=t.indexOf(e)}function P(t,e){return t<e?-1:t>e?1:0}t:{var L=p.navigator;if(L){var M=L.userAgent;if(M){C=M;break t}}C=""}function U(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function F(t){var e={};for(var n in t)e[n]=t[n];return e}var j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<j.length;o++)n=j[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function q(t){return q[" "](t),t}q[" "]=d;var B,G=x(C,"Opera"),K=x(C,"Trident")||x(C,"MSIE"),H=x(C,"Edge"),z=H||K,W=x(C,"Gecko")&&!(x(C.toLowerCase(),"webkit")&&!x(C,"Edge"))&&!(x(C,"Trident")||x(C,"MSIE"))&&!x(C,"Edge"),J=x(C.toLowerCase(),"webkit")&&!x(C,"Edge");function X(){var t=p.document;return t?t.documentMode:void 0}t:{var Q="",Z=function(){var t=C;return W?/rv:([^\);]+)(\)|;)/.exec(t):H?/Edge\/([\d\.]+)/.exec(t):K?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):J?/WebKit\/(\S+)/.exec(t):G?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(Z&&(Q=Z?Z[1]:""),K){var Y=X();if(null!=Y&&Y>parseFloat(Q)){B=String(Y);break t}}B=Q}var $,tt={};function et(){return function(t){var e=tt;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}((function(){for(var t=0,e=O(String(B)).split("."),n=O("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",a=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;t=P(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||P(0==o[2].length,0==a[2].length)||P(o[2],a[2]),o=o[3],a=a[3]}while(0==t)}return 0<=t}))}if(p.document&&K){var nt=X();$=nt||(parseInt(B,10)||void 0)}else $=void 0;var rt=$,it=function(){if(!p.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{p.addEventListener("test",d,e),p.removeEventListener("test",d,e)}catch(n){}return t}();function ot(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function at(t,e){if(ot.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(W){t:{try{q(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:st[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&at.Z.h.call(this)}}ot.prototype.h=function(){this.defaultPrevented=!0},T(at,ot);var st={2:"touch",3:"pen",4:"mouse"};at.prototype.h=function(){at.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ut="closure_listenable_"+(1e6*Math.random()|0),ct=0;function ht(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++ct,this.ca=this.fa=!1}function lt(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function ft(t){this.src=t,this.g={},this.h=0}function pt(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=A(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(lt(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function dt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}ft.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var a=dt(t,e,r,i);return-1<a?(e=t[a],n||(e.fa=!1)):((e=new ht(e,this.src,o,!!r,i)).fa=n,t.push(e)),e};var vt="closure_lm_"+(1e6*Math.random()|0),gt={};function mt(t,e,n,r,i){if(r&&r.once)return bt(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)mt(t,e[o],n,r,i);return null}return n=At(n),t&&t[ut]?t.N(e,n,g(r)?!!r.capture:!!r,i):yt(t,e,n,!1,r,i)}function yt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=g(i)?!!i.capture:!!i,s=Et(t);if(s||(t[vt]=s=new ft(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){function t(n){return e.call(t.src,t.listener,n)}var e=Tt;return t}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)it||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(It(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function bt(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)bt(t,e[o],n,r,i);return null}return n=At(n),t&&t[ut]?t.O(e,n,g(r)?!!r.capture:!!r,i):yt(t,e,n,!0,r,i)}function wt(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)wt(t,e[o],n,r,i);else r=g(r)?!!r.capture:!!r,n=At(n),t&&t[ut]?(t=t.i,(e=String(e).toString())in t.g&&(-1<(n=dt(o=t.g[e],n,r,i))&&(lt(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--)))):t&&(t=Et(t))&&(e=t.g[e.toString()],t=-1,e&&(t=dt(e,n,r,i)),(n=-1<t?e[t]:null)&&_t(n))}function _t(t){if("number"!==typeof t&&t&&!t.ca){var e=t.src;if(e&&e[ut])pt(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(It(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Et(e))?(pt(n,t),0==n.h&&(n.src=null,e[vt]=null)):lt(t)}}}function It(t){return t in gt?gt[t]:gt[t]="on"+t}function Tt(t,e){if(t.ca)t=!0;else{e=new at(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&_t(t),t=n.call(r,e)}return t}function Et(t){return(t=t[vt])instanceof ft?t:null}var St="__closure_events_fn_"+(1e9*Math.random()>>>0);function At(t){return"function"===typeof t?t:(t[St]||(t[St]=function(e){return t.handleEvent(e)}),t[St])}function kt(){E.call(this),this.i=new ft(this),this.P=this,this.I=null}function Nt(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"===typeof e)e=new ot(e,t);else if(e instanceof ot)e.target=e.target||t;else{var i=e;V(e=new ot(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=e.g=n[o];i=Rt(a,r,!0,e)&&i}if(i=Rt(a=e.g=t,r,!0,e)&&i,i=Rt(a,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Rt(a=e.g=n[o],r,!1,e)&&i}function Rt(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.ca&&a.capture==n){var s=a.listener,u=a.ia||a.src;a.fa&&pt(t.i,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}T(kt,E),kt.prototype[ut]=!0,kt.prototype.removeEventListener=function(t,e,n,r){wt(this,t,e,n,r)},kt.prototype.M=function(){if(kt.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)lt(n[r]);delete e.g[t],e.h--}}this.I=null},kt.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},kt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var Dt=p.JSON.stringify;function Ct(){var t=jt,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Ot,xt=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=Pt.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),Pt=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t},t}())((function(){return new Lt}),(function(t){return t.reset()})),Lt=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function Mt(t){p.setTimeout((function(){throw t}),0)}function Ut(t,e){Ot||function(){var t=p.Promise.resolve(void 0);Ot=function(){t.then(Vt)}}(),Ft||(Ot(),Ft=!0),jt.add(t,e)}var Ft=!1,jt=new xt;function Vt(){for(var t;t=Ct();){try{t.h.call(t.g)}catch(n){Mt(n)}var e=Pt;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Ft=!1}function qt(t,e){kt.call(this),this.h=t||1,this.g=e||p,this.j=_(this.kb,this),this.l=Date.now()}function Bt(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function Gt(t,e,n){if("function"===typeof t)n&&(t=_(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=_(t.handleEvent,t)}return 2147483647<Number(e)?-1:p.setTimeout(t,e||0)}function Kt(t){t.g=Gt((function(){t.g=null,t.i&&(t.i=!1,Kt(t))}),t.j);var e=t.h;t.h=null,t.m.apply(null,e)}T(qt,kt),(h=qt.prototype).da=!1,h.S=null,h.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Nt(this,"tick"),this.da&&(Bt(this),this.start()))}},h.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},h.M=function(){qt.Z.M.call(this),Bt(this),delete this.g};var Ht=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:Kt(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(E);function zt(t){E.call(this),this.h=t,this.g={}}T(zt,E);var Wt=[];function Jt(t,e,n,r){Array.isArray(n)||(n&&(Wt[0]=n.toString()),n=Wt);for(var i=0;i<n.length;i++){var o=mt(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function Xt(t){U(t.g,(function(t,e){this.g.hasOwnProperty(e)&&_t(t)}),t),t.g={}}function Qt(){this.g=!0}function Zt(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return Dt(n)}catch(s){return e}}(t,n)+(r?" "+r:"")}))}zt.prototype.M=function(){zt.Z.M.call(this),Xt(this)},zt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Qt.prototype.Aa=function(){this.g=!1},Qt.prototype.info=function(){};var Yt={},$t=null;function te(){return $t=$t||new kt}function ee(t){ot.call(this,Yt.Ma,t)}function ne(t){var e=te();Nt(e,new ee(e,t))}function re(t,e){ot.call(this,Yt.STAT_EVENT,t),this.stat=e}function ie(t){var e=te();Nt(e,new re(e,t))}function oe(t,e){ot.call(this,Yt.Na,t),this.size=e}function ae(t,e){if("function"!==typeof t)throw Error("Fn must not be null and must be a function");return p.setTimeout((function(){t()}),e)}Yt.Ma="serverreachability",T(ee,ot),Yt.STAT_EVENT="statevent",T(re,ot),Yt.Na="timingevent",T(oe,ot);var se={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},ue={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ce(){}function he(t){return t.h||(t.h=t.i())}function le(){}ce.prototype.h=null;var fe,pe={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function de(){ot.call(this,"d")}function ve(){ot.call(this,"c")}function ge(){}function me(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new zt(this),this.P=be,t=z?125:void 0,this.W=new qt(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new ye}function ye(){this.i=null,this.g="",this.h=!1}T(de,ot),T(ve,ot),T(ge,ce),ge.prototype.g=function(){return new XMLHttpRequest},ge.prototype.i=function(){return{}},fe=new ge;var be=45e3,we={},_e={};function Ie(t,e,n){t.K=1,t.v=He(je(e)),t.s=n,t.U=!0,Te(t,null)}function Te(t,e){t.F=Date.now(),ke(t),t.A=je(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),on(n.h,"t",r),t.C=0,n=t.l.H,t.h=new ye,t.g=sr(t.l,n?e:null,!t.s),0<t.O&&(t.L=new Ht(_(t.Ia,t,t.g),t.O)),Jt(t.V,t.g,"readystatechange",t.gb),e=t.H?F(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),ne(1),function(t,e,n,r,i,o){t.info((function(){if(t.g)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var h=c[0];c=c[1];var l=h.split("_");a=2<=l.length&&"type"==l[1]?a+(h+"=")+c+"&":a+(h+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+a}))}(t.j,t.u,t.A,t.m,t.X,t.s)}function Ee(t){return!!t.g&&("GET"==t.u&&2!=t.K&&t.l.Ba)}function Se(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=Ae(t,n))==_e){4==e&&(t.o=4,ie(14),i=!1),Zt(t.j,t.m,null,"[Incomplete Response]");break}if(r==we){t.o=4,ie(15),Zt(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}Zt(t.j,t.m,r,null),Oe(t,r)}Ee(t)&&r!=_e&&r!=we&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,ie(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),$n(e),e.L=!0,ie(11))):(Zt(t.j,t.m,n,"[Invalid Chunked Response]"),Ce(t),De(t))}function Ae(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?_e:(n=Number(e.substring(n,r)),isNaN(n)?we:(r+=1)+n>e.length?_e:(e=e.substr(r,n),t.C=r+n,e))}function ke(t){t.Y=Date.now()+t.P,Ne(t,t.P)}function Ne(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=ae(_(t.eb,t),e)}function Re(t){t.B&&(p.clearTimeout(t.B),t.B=null)}function De(t){0==t.l.G||t.I||nr(t.l,t)}function Ce(t){Re(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,Bt(t.W),Xt(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Oe(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||pn(n.i,t)))if(n.I=t.N,!t.J&&pn(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(o){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;er(n),Kn(n)}Yn(n),ie(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=ae(_(n.ab,n),6e3));if(1>=fn(n.i)&&n.ka){try{n.ka()}catch(o){}n.ka=void 0}}else ir(n,11)}else if((t.J||n.g==t)&&er(n),!D(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var a=o[3];null!=a&&(n.ma=a,n.h.info("VER="+n.ma));var s=o[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var h=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var l=r.i;!l.g&&(x(h,"spdy")||x(h,"quic")||x(h,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(dn(l,l.h),l.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,Ke(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var p=t;if((r=n).oa=ar(r,r.H?r.la:null,r.W),p.J){vn(r.i,p);var d=p,v=r.K;v&&d.setTimeout(v),d.B&&(Re(d),ke(d)),r.g=p}else Zn(r);0<n.l.length&&Wn(n)}else"stop"!=o[0]&&"close"!=o[0]||ir(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?ir(n,7):Gn(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}ne(4)}catch(o){}}function xe(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(v(t)||"string"===typeof t)k(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(v(t)||"string"===typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"===typeof t)return t.split("");if(v(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Pe(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Pe)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Le(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];Me(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)Me(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function Me(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(h=me.prototype).setTimeout=function(t){this.P=t},h.gb=function(t){t=t.target;var e=this.L;e&&3==Fn(t)?e.l():this.Ia(t)},h.Ia=function(t){try{if(t==this.g)t:{var e=Fn(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||z||this.g&&(this.h.h||this.g.ga()||jn(this.g)))){this.I||4!=e||7==n||ne(8==n||0>=r?3:2),Re(this);var i=this.g.ba();this.N=i;e:if(Ee(this)){var o=jn(this.g);t="";var a=o.length,s=4==Fn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ce(this),De(this);var u="";break e}this.h.i=new p.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:s&&n==a-1});o.splice(0,a),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,o,a){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+a}))}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,h=this.g;if((c=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(c)){var l=c;break e}}l=null}if(!(i=l)){this.i=!1,this.o=3,ie(12),Ce(this),De(this);break t}Zt(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Oe(this,i)}this.U?(Se(this,e,u),z&&this.i&&3==e&&(Jt(this.V,this.W,"tick",this.fb),this.W.start())):(Zt(this.j,this.m,u,null),Oe(this,u)),4==e&&Ce(this),this.i&&!this.I&&(4==e?nr(this.l,this):(this.i=!1,ke(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,ie(12)):(this.o=0,ie(13)),Ce(this),De(this)}}}catch(e){}},h.fb=function(){if(this.g){var t=Fn(this.g),e=this.g.ga();this.C<e.length&&(Re(this),Se(this,t,e),this.i&&4!=t&&ke(this))}},h.cancel=function(){this.I=!0,Ce(this)},h.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(ne(3),ie(17)),Ce(this),this.o=2,De(this)):Ne(this,this.Y-t)},(h=Pe.prototype).R=function(){Le(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},h.T=function(){return Le(this),this.g.concat()},h.get=function(t,e){return Me(this.h,t)?this.h[t]:e},h.set=function(t,e){Me(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},h.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Ue=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Fe(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof Fe){this.g=void 0!==e?e:t.g,Ve(this,t.j),this.s=t.s,qe(this,t.i),Be(this,t.m),this.l=t.l,e=t.h;var n=new tn;n.i=e.i,e.g&&(n.g=new Pe(e.g),n.h=e.h),Ge(this,n),this.o=t.o}else t&&(n=String(t).match(Ue))?(this.g=!!e,Ve(this,n[1]||"",!0),this.s=ze(n[2]||""),qe(this,n[3]||"",!0),Be(this,n[4]),this.l=ze(n[5]||"",!0),Ge(this,n[6]||"",!0),this.o=ze(n[7]||"")):(this.g=!!e,this.h=new tn(null,this.g))}function je(t){return new Fe(t)}function Ve(t,e,n){t.j=n?ze(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function qe(t,e,n){t.i=n?ze(e,!0):e}function Be(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Ge(t,e,n){e instanceof tn?(t.h=e,function(t,e){e&&!t.j&&(en(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(nn(this,e),on(this,n,t))}),t)),t.j=e}(t.h,t.g)):(n||(e=We(e,Ye)),t.h=new tn(e,t.g))}function Ke(t,e,n){t.h.set(e,n)}function He(t){return Ke(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function ze(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function We(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,Je),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Je(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Fe.prototype.toString=function(){var t=[],e=this.j;e&&t.push(We(e,Xe,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(We(e,Xe,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(We(n,"/"==n.charAt(0)?Ze:Qe,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",We(n,$e)),t.join("")};var Xe=/[#\/\?@]/g,Qe=/[#\?:]/g,Ze=/[#\?]/g,Ye=/[#\?@]/g,$e=/#/g;function tn(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function en(t){t.g||(t.g=new Pe,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function nn(t,e){en(t),e=an(t,e),Me(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,Me((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&Le(t)))}function rn(t,e){return en(t),e=an(t,e),Me(t.g.h,e)}function on(t,e,n){nn(t,e),0<n.length&&(t.i=null,t.g.set(an(t,e),R(n)),t.h+=n.length)}function an(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(h=tn.prototype).add=function(t,e){en(this),this.i=null,t=an(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},h.forEach=function(t,e){en(this),this.g.forEach((function(n,r){k(n,(function(n){t.call(e,n,r,this)}),this)}),this)},h.T=function(){en(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},h.R=function(t){en(this);var e=[];if("string"===typeof t)rn(this,t)&&(e=N(e,this.g.get(an(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=N(e,t[n])}return e},h.set=function(t,e){return en(this),this.i=null,rn(this,t=an(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},h.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},h.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.i=t.join("&")};var sn=function(t,e){this.h=t,this.g=e};function un(t){this.l=t||hn,p.PerformanceNavigationTiming?t=0<(t=p.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(p.g&&p.g.Ea&&p.g.Ea()&&p.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var cn,hn=10;function ln(t){return!!t.h||!!t.g&&t.g.size>=t.j}function fn(t){return t.h?1:t.g?t.g.size:0}function pn(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function dn(t,e){t.g?t.g.add(e):t.h=e}function vn(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function gn(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=c(t.g.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r.concat(a.D)}}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return R(t.i)}function mn(){}function yn(){this.g=new mn}function bn(t,e,n){var r=n||"";try{xe(t,(function(t,n){var i=t;g(t)&&(i=Dt(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(Mp){throw e.push(r+"type="+encodeURIComponent("_badmap")),Mp}}function wn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}function _n(t){this.l=t.$b||null,this.j=t.ib||!1}function In(t,e){kt.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Tn,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}un.prototype.cancel=function(){var t,e;if(this.i=gn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=c(this.g.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},mn.prototype.stringify=function(t){return p.JSON.stringify(t,void 0)},mn.prototype.parse=function(t){return p.JSON.parse(t,void 0)},T(_n,ce),_n.prototype.g=function(){return new In(this.l,this.j)},_n.prototype.i=(cn={},function(){return cn}),T(In,kt);var Tn=0;function En(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function Sn(t){t.readyState=4,t.l=null,t.j=null,t.A=null,An(t)}function An(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(h=In.prototype).open=function(t,e){if(this.readyState!=Tn)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,An(this)},h.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||p).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},h.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Sn(this)),this.readyState=Tn},h.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,An(this)),this.g&&(this.readyState=3,An(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof p.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;En(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},h.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Sn(this):An(this),3==this.readyState&&En(this)}},h.Ua=function(t){this.g&&(this.response=this.responseText=t,Sn(this))},h.Ta=function(t){this.g&&(this.response=t,Sn(this))},h.ha=function(){this.g&&Sn(this)},h.setRequestHeader=function(t,e){this.v.append(t,e)},h.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},h.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(In.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var kn=p.JSON.parse;function Nn(t){kt.call(this),this.headers=new Pe,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Rn,this.K=this.L=!1}T(Nn,kt);var Rn="",Dn=/^https?$/i,Cn=["POST","PUT"];function On(t){return"content-type"==t.toLowerCase()}function xn(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Pn(t),Mn(t)}function Pn(t){t.D||(t.D=!0,Nt(t,"complete"),Nt(t,"error"))}function Ln(t){if(t.h&&"undefined"!=typeof f&&(!t.C[1]||4!=Fn(t)||2!=t.ba()))if(t.v&&4==Fn(t))Gt(t.Fa,0,t);else if(Nt(t,"readystatechange"),4==Fn(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.H).match(Ue)[1]||null;if(!o&&p.self&&p.self.location){var a=p.self.location.protocol;o=a.substr(0,a.length-1)}i=!Dn.test(o?o.toLowerCase():"")}e=i}if(e)Nt(t,"complete"),Nt(t,"success");else{t.m=6;try{var s=2<Fn(t)?t.g.statusText:""}catch(u){s=""}t.j=s+" ["+t.ba()+"]",Pn(t)}}finally{Mn(t)}}}function Mn(t,e){if(t.g){Un(t);var n=t.g,r=t.C[0]?d:null;t.g=null,t.C=null,e||Nt(t,"ready");try{n.onreadystatechange=r}catch(Mp){}}}function Un(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(p.clearTimeout(t.A),t.A=null)}function Fn(t){return t.g?t.g.readyState:0}function jn(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case Rn:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Vn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return U(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"===typeof t?null!=n&&encodeURIComponent(String(n)):Ke(t,e,n))}function qn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Bn(t){this.za=0,this.l=[],this.h=new Qt,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=qn("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=qn("baseRetryDelayMs",5e3,t),this.$a=qn("retryDelaySeedMs",1e4,t),this.Ya=qn("forwardChannelMaxRetries",2,t),this.ra=qn("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new un(t&&t.concurrentRequestLimit),this.Ca=new yn,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function Gn(t){if(Hn(t),3==t.G){var e=t.V++,n=je(t.F);Ke(n,"SID",t.J),Ke(n,"RID",e),Ke(n,"TYPE","terminate"),Xn(t,n),(e=new me(t,t.h,e,void 0)).K=2,e.v=He(je(n)),n=!1,p.navigator&&p.navigator.sendBeacon&&(n=p.navigator.sendBeacon(e.v.toString(),"")),!n&&p.Image&&((new Image).src=e.v,n=!0),n||(e.g=sr(e.l,null),e.g.ea(e.v)),e.F=Date.now(),ke(e)}or(t)}function Kn(t){t.g&&($n(t),t.g.cancel(),t.g=null)}function Hn(t){Kn(t),t.u&&(p.clearTimeout(t.u),t.u=null),er(t),t.i.cancel(),t.m&&("number"===typeof t.m&&p.clearTimeout(t.m),t.m=null)}function zn(t,e){t.l.push(new sn(t.Za++,e)),3==t.G&&Wn(t)}function Wn(t){ln(t.i)||t.m||(t.m=!0,Ut(t.Ha,t),t.C=0)}function Jn(t,e){var n;n=e?e.m:t.V++;var r=je(t.F);Ke(r,"SID",t.J),Ke(r,"RID",n),Ke(r,"AID",t.U),Xn(t,r),t.o&&t.s&&Vn(r,t.o,t.s),n=new me(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=Qn(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),dn(t.i,n),Ie(n,r,e)}function Xn(t,e){t.j&&xe({},(function(t,n){Ke(e,n,t)}))}function Qn(t,e,n){n=Math.min(t.l.length,n);var r=t.j?_(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].h,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].h,h=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),s=!1;else try{bn(h,a,"req"+c+"_")}catch(Gr){r&&r(h)}}if(s){r=a.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function Zn(t){t.g||t.u||(t.Y=1,Ut(t.Ga,t),t.A=0)}function Yn(t){return!(t.g||t.u||3<=t.A)&&(t.Y++,t.u=ae(_(t.Ga,t),rr(t,t.A)),t.A++,!0)}function $n(t){null!=t.B&&(p.clearTimeout(t.B),t.B=null)}function tr(t){t.g=new me(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=je(t.oa);Ke(e,"RID","rpc"),Ke(e,"SID",t.J),Ke(e,"CI",t.N?"0":"1"),Ke(e,"AID",t.U),Xn(t,e),Ke(e,"TYPE","xmlhttp"),t.o&&t.s&&Vn(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=He(je(e)),n.s=null,n.U=!0,Te(n,t)}function er(t){null!=t.v&&(p.clearTimeout(t.v),t.v=null)}function nr(t,e){var n=null;if(t.g==e){er(t),$n(t),t.g=null;var r=2}else{if(!pn(t.i,e))return;n=e.D,vn(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;Nt(r=te(),new oe(r,n,e,i)),Wn(t)}else Zn(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(fn(t.i)>=t.i.j-(t.m?1:0))&&(t.m?(t.l=e.D.concat(t.l),!0):!(1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya))&&(t.m=ae(_(t.Ha,t,e),rr(t,t.C)),t.C++,!0))}(t,e)||2==r&&Yn(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:ir(t,5);break;case 4:ir(t,10);break;case 3:ir(t,6);break;default:ir(t,2)}}function rr(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function ir(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=_(t.jb,t);n||(n=new Fe("//www.google.com/images/cleardot.gif"),p.location&&"http"==p.location.protocol||Ve(n,"https"),He(n)),function(t,e){var n=new Qt;if(p.Image){var r=new Image;r.onload=I(wn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=I(wn,n,r,"TestLoadImage: error",!1,e),r.onabort=I(wn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=I(wn,n,r,"TestLoadImage: timeout",!1,e),p.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else ie(2);t.G=0,t.j&&t.j.va(e),or(t),Hn(t)}function or(t){t.G=0,t.I=-1,t.j&&(0==gn(t.i).length&&0==t.l.length||(t.i.i.length=0,R(t.l),t.l.length=0),t.j.ua())}function ar(t,e,n){var r=function(t){return t instanceof Fe?je(t):new Fe(t,void 0)}(n);if(""!=r.i)e&&qe(r,e+"."+r.i),Be(r,r.m);else{var i=p.location;r=function(t,e,n,r){var i=new Fe(null,void 0);return t&&Ve(i,t),e&&qe(i,e),n&&Be(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&U(t.aa,(function(t,e){Ke(r,e,t)})),e=t.D,n=t.sa,e&&n&&Ke(r,e,n),Ke(r,"VER",t.ma),Xn(t,r),r}function sr(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ba&&!t.qa?new Nn(new _n({ib:!0})):new Nn(t.qa)).L=t.H,e}function ur(){}function cr(){if(K&&!(10<=Number(rt)))throw Error("Environmental error: no available transport.")}function hr(t,e){kt.call(this),this.g=new Bn(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!D(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!D(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new pr(this)}function lr(t){de.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function fr(){ve.call(this),this.status=1}function pr(t){this.g=t}(h=Nn.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():fe.g(),this.C=this.u?he(this.u):he(fe),this.g.onreadystatechange=_(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(o){return void xn(this,o)}t=n||"";var i=new Pe(this.headers);r&&xe(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=On,n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"===typeof t?t.charAt(e):t[e]}(i.T()),n=p.FormData&&t instanceof p.FormData,!(0<=A(Cn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Un(this),0<this.B&&((this.K=function(t){return K&&et()&&"number"===typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=_(this.pa,this)):this.A=Gt(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){xn(this,o)}},h.pa=function(){"undefined"!=typeof f&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Nt(this,"timeout"),this.abort(8))},h.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Nt(this,"complete"),Nt(this,"abort"),Mn(this))},h.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Mn(this,!0)),Nn.Z.M.call(this)},h.Fa=function(){this.s||(this.F||this.v||this.l?Ln(this):this.cb())},h.cb=function(){Ln(this)},h.ba=function(){try{return 2<Fn(this)?this.g.status:-1}catch(cn){return-1}},h.ga=function(){try{return this.g?this.g.responseText:""}catch(cn){return""}},h.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),kn(e)}},h.Da=function(){return this.m},h.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(h=Bn.prototype).ma=8,h.G=1,h.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(e){}},h.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new me(this,this.h,t,void 0),n=this.s;if(this.P&&(n?V(n=F(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"===typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=Qn(this,e,r),Ke(i=je(this.F),"RID",t),Ke(i,"CVER",22),this.D&&Ke(i,"X-HTTP-Session-Id",this.D),Xn(this,i),this.o&&n&&Vn(i,this.o,n),dn(this.i,e),this.Ra&&Ke(i,"TYPE","init"),this.ja?(Ke(i,"$req",r),Ke(i,"SID","null"),e.$=!0,Ie(e,i,null)):Ie(e,i,r),this.G=2}}else 3==this.G&&(t?Jn(this,t):0==this.l.length||ln(this.i)||Jn(this))},h.Ga=function(){if(this.u=null,tr(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=ae(_(this.bb,this),t)}},h.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ie(10),Kn(this),tr(this))},h.ab=function(){null!=this.v&&(this.v=null,Kn(this),Yn(this),ie(19))},h.jb=function(t){t?(this.h.info("Successfully pinged google.com"),ie(2)):(this.h.info("Failed to ping google.com"),ie(1))},(h=ur.prototype).xa=function(){},h.wa=function(){},h.va=function(){},h.ua=function(){},h.Oa=function(){},cr.prototype.g=function(t,e){return new hr(t,e)},T(hr,kt),hr.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),Ut(_(t.hb,t,e))),ie(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=ar(t,null,t.W),Wn(t)},hr.prototype.close=function(){Gn(this.g)},hr.prototype.u=function(t){if("string"===typeof t){var e={};e.__data__=t,zn(this.g,e)}else this.v?((e={}).__data__=Dt(t),zn(this.g,e)):zn(this.g,t)},hr.prototype.M=function(){this.g.j=null,delete this.j,Gn(this.g),delete this.g,hr.Z.M.call(this)},T(lr,de),T(fr,ve),T(pr,ur),pr.prototype.xa=function(){Nt(this.g,"a")},pr.prototype.wa=function(t){Nt(this.g,new lr(t))},pr.prototype.va=function(t){Nt(this.g,new fr(t))},pr.prototype.ua=function(){Nt(this.g,"b")},cr.prototype.createWebChannel=cr.prototype.g,hr.prototype.send=hr.prototype.u,hr.prototype.open=hr.prototype.m,hr.prototype.close=hr.prototype.close,se.NO_ERROR=0,se.TIMEOUT=8,se.HTTP_ERROR=6,ue.COMPLETE="complete",le.EventType=pe,pe.OPEN="a",pe.CLOSE="b",pe.ERROR="c",pe.MESSAGE="d",kt.prototype.listen=kt.prototype.N,Nn.prototype.listenOnce=Nn.prototype.O,Nn.prototype.getLastError=Nn.prototype.La,Nn.prototype.getLastErrorCode=Nn.prototype.Da,Nn.prototype.getStatus=Nn.prototype.ba,Nn.prototype.getResponseJson=Nn.prototype.Qa,Nn.prototype.getResponseText=Nn.prototype.ga,Nn.prototype.send=Nn.prototype.ea;var dr=function(){return new cr},vr=function(){return te()},gr=se,mr=ue,yr=Yt,br={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},wr=_n,_r=le,Ir=Nn,Tr=n(4155),Er=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Er.o=-1;var Sr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ar=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return(0,o.ZT)(e,t),e}(Error),kr=new s.Yd("@firebase/firestore");function Nr(){return kr.logLevel}function Rr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(kr.logLevel<=s.in.DEBUG){var r=e.map(Or);kr.debug.apply(kr,(0,o.ev)(["Firestore (8.10.1): "+t],r))}}function Dr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(kr.logLevel<=s.in.ERROR){var r=e.map(Or);kr.error.apply(kr,(0,o.ev)(["Firestore (8.10.1): "+t],r))}}function Cr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(kr.logLevel<=s.in.WARN){var r=e.map(Or);kr.warn.apply(kr,(0,o.ev)(["Firestore (8.10.1): "+t],r))}}function Or(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function xr(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.10.1) INTERNAL ASSERTION FAILED: "+t;throw Dr(e),new Error(e)}function Pr(t,e){t||xr()}function Lr(t,e){return t}function Mr(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Ur=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Mr(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Fr(t,e){return t<e?-1:t>e?1:0}function jr(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Vr(t){return t+"\0"}var qr=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ar(Sr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ar(Sr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Ar(Sr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ar(Sr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Fr(this.nanoseconds,t.nanoseconds):Fr(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Br=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new qr(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function Gr(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Kr(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Hr(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var zr=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&xr(),void 0===n?n=t.length-e:n>t.length-e&&xr(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Wr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,o.ZT)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var a=o[i];if(a.indexOf("//")>=0)throw new Ar(Sr.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");r.push.apply(r,a.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(zr),Jr=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Xr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,o.ZT)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return Jr.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Ar(Sr.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new Ar(Sr.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Ar(Sr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new Ar(Sr.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(zr),Qr=function(){function t(t){this.fields=t,t.sort(Xr.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return jr(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Zr=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Fr(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();Zr.EMPTY_BYTE_STRING=new Zr("");var Yr=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $r(t){if(Pr(!!t),"string"==typeof t){var e=0,n=Yr.exec(t);if(Pr(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ti(t.seconds),nanos:ti(t.nanos)}}function ti(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function ei(t){return"string"==typeof t?Zr.fromBase64String(t):Zr.fromUint8Array(t)}function ni(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ri(t){var e=t.mapValue.fields.__previous_value__;return ni(e)?ri(e):e}function ii(t){var e=$r(t.mapValue.fields.__local_write_time__.timestampValue);return new qr(e.seconds,e.nanos)}function oi(t){return null==t}function ai(t){return 0===t&&1/t==-1/0}function si(t){return"number"==typeof t&&Number.isInteger(t)&&!ai(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var ui=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(Wr.fromString(e))},t.fromName=function(e){return new t(Wr.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Wr.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Wr.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Wr(e.slice()))},t}();function ci(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ni(t)?4:10:xr()}function hi(t,e){var n=ci(t);if(n!==ci(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ii(t).isEqual(ii(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=$r(t.timestampValue),r=$r(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return ei(t.bytesValue).isEqual(ei(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return ti(t.geoPointValue.latitude)===ti(e.geoPointValue.latitude)&&ti(t.geoPointValue.longitude)===ti(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return ti(t.integerValue)===ti(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=ti(t.doubleValue),r=ti(e.doubleValue);return n===r?ai(n)===ai(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return jr(t.arrayValue.values||[],e.arrayValue.values||[],hi);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Gr(n)!==Gr(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!hi(n[i],r[i])))return!1;return!0}(t,e);default:return xr()}}function li(t,e){return void 0!==(t.values||[]).find((function(t){return hi(t,e)}))}function fi(t,e){var n=ci(t),r=ci(e);if(n!==r)return Fr(n,r);switch(n){case 0:return 0;case 1:return Fr(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=ti(t.integerValue||t.doubleValue),r=ti(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return pi(t.timestampValue,e.timestampValue);case 4:return pi(ii(t),ii(e));case 5:return Fr(t.stringValue,e.stringValue);case 6:return function(t,e){var n=ei(t),r=ei(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Fr(n[i],r[i]);if(0!==o)return o}return Fr(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Fr(ti(t.latitude),ti(e.latitude));return 0!==n?n:Fr(ti(t.longitude),ti(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=fi(n[i],r[i]);if(o)return o}return Fr(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=Fr(r[a],o[a]);if(0!==s)return s;var u=fi(n[r[a]],i[o[a]]);if(0!==u)return u}return Fr(r.length,o.length)}(t.mapValue,e.mapValue);default:throw xr()}}function pi(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Fr(t,e);var n=$r(t),r=$r(e),i=Fr(n.seconds,r.seconds);return 0!==i?i:Fr(n.nanos,r.nanos)}function di(t){return vi(t)}function vi(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=$r(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?ei(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,ui.fromName(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=vi(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+vi(t.fields[o])}return e+"}"}(t.mapValue):xr();var e,n}function gi(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function mi(t){return!!t&&"integerValue"in t}function yi(t){return!!t&&"arrayValue"in t}function bi(t){return!!t&&"nullValue"in t}function wi(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function _i(t){return!!t&&"mapValue"in t}function Ii(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return Kr(t.mapValue.fields,(function(t,n){return e.mapValue.fields[t]=Ii(n)})),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Ii(t.arrayValue.values[r]);return n}return Object.assign({},t)}var Ti=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!_i(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ii(e)},t.prototype.setAll=function(t){var e=this,n=Xr.emptyPath(),r={},i=[];t.forEach((function(t,o){if(!n.isImmediateParentOf(o)){var a=e.getFieldsMap(n);e.applyChanges(a,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=Ii(t):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());_i(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return hi(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];_i(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){Kr(e,(function(e,n){return t[e]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete t[o]}},t.prototype.clone=function(){return new t(Ii(this.value))},t}();function Ei(t){var e=[];return Kr(t.fields,(function(t,n){var r=new Xr([t]);if(_i(n)){var i=Ei(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,a=i;o<a.length;o++){var s=a[o];e.push(r.child(s))}}else e.push(r)})),new Qr(e)}var Si=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,Br.min(),Ti.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Ti.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Ti.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Ti.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Ti.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Ai=function(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};function ki(t,e,n,r,i,o,a){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new Ai(t,e,n,r,i,o,a)}function Ni(t){var e=Lr(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.canonicalString()+t.op.toString()+di(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.canonicalString()+t.dir}(t)})).join(","),oi(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=qi(e.startAt)),e.endAt&&(n+="|ub:",n+=qi(e.endAt)),e.h=n}return e.h}function Ri(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Gi(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!hi(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Hi(t.startAt,e.startAt)&&Hi(t.endAt,e.endAt)}function Di(t){return ui.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Ci=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return(0,o.ZT)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Oi(t,n,r):"array-contains"===n?new Mi(t,r):"in"===n?new Ui(t,r):"not-in"===n?new Fi(t,r):"array-contains-any"===n?new ji(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new xi(t,n):new Pi(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(fi(e,this.value)):null!==e&&ci(this.value)===ci(e)&&this.m(fi(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return xr()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Oi=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=ui.fromName(r.referenceValue),i}return(0,o.ZT)(e,t),e.prototype.matches=function(t){var e=ui.comparator(t.key,this.key);return this.m(e)},e}(Ci),xi=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Li("in",n),r}return(0,o.ZT)(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Ci),Pi=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Li("not-in",n),r}return(0,o.ZT)(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Ci);function Li(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return ui.fromName(t.referenceValue)}))}var Mi=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return(0,o.ZT)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return yi(e)&&li(e.arrayValue,this.value)},e}(Ci),Ui=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return(0,o.ZT)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&li(this.value.arrayValue,e)},e}(Ci),Fi=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return(0,o.ZT)(e,t),e.prototype.matches=function(t){if(li(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!li(this.value.arrayValue,e)},e}(Ci),ji=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return(0,o.ZT)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!yi(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return li(e.value.arrayValue,t)}))},e}(Ci),Vi=function(t,e){this.position=t,this.before=e};function qi(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return di(t)})).join(",")}var Bi=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Gi(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Ki(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],a=t.position[i];if(r=o.field.isKeyField()?ui.comparator(ui.fromName(a.referenceValue),n.key):fi(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Hi(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!hi(t.position[n],e.position[n]))return!1;return!0}var zi=function(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null,this.startAt,this.endAt};function Wi(t,e,n,r,i,o,a,s){return new zi(t,e,n,r,i,o,a,s)}function Ji(t){return new zi(t)}function Xi(t){return!oi(t.limit)&&"F"===t.limitType}function Qi(t){return!oi(t.limit)&&"L"===t.limitType}function Zi(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Yi(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function $i(t){return null!==t.collectionGroup}function to(t){var e=Lr(t);if(null===e.p){e.p=[];var n=Yi(e),r=Zi(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Bi(n)),e.p.push(new Bi(Xr.keyField(),"asc"));else{for(var i=!1,o=0,a=e.explicitOrderBy;o<a.length;o++){var s=a[o];e.p.push(s),s.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Bi(Xr.keyField(),u))}}}return e.p}function eo(t){var e=Lr(t);if(!e.T)if("F"===e.limitType)e.T=ki(e.path,e.collectionGroup,to(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=to(e);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new Bi(o.field,a))}var s=e.endAt?new Vi(e.endAt.position,!e.endAt.before):null,u=e.startAt?new Vi(e.startAt.position,!e.startAt.before):null;e.T=ki(e.path,e.collectionGroup,n,e.filters,e.limit,s,u)}return e.T}function no(t,e,n){return new zi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ro(t,e){return Ri(eo(t),eo(e))&&t.limitType===e.limitType}function io(t){return Ni(eo(t))+"|lt:"+t.limitType}function oo(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+di(e.value);var e})).join(", ")+"]"),oi(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+qi(t.startAt)),t.endAt&&(e+=", endAt: "+qi(t.endAt)),"Target("+e+")"}(eo(t))+"; limitType="+t.limitType+")"}function ao(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):ui.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Ki(t.startAt,to(t),e))&&(!t.endAt||!Ki(t.endAt,to(t),e))}(t,e)}function so(t){return function(e,n){for(var r=!1,i=0,o=to(t);i<o.length;i++){var a=o[i],s=uo(a,e,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}function uo(t,e,n){var r=t.field.isKeyField()?ui.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?fi(r,i):xr()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return xr()}}function co(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ai(e)?"-0":e}}function ho(t){return{integerValue:""+t}}function lo(t,e){return si(e)?ho(e):co(t,e)}var fo=function(){this._=void 0};function po(t,e,n){return t instanceof mo?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof yo?bo(t,e):t instanceof wo?_o(t,e):function(t,e){var n=go(t,e),r=To(n)+To(t.A);return mi(n)&&mi(t.A)?ho(r):co(t.R,r)}(t,e)}function vo(t,e,n){return t instanceof yo?bo(t,e):t instanceof wo?_o(t,e):n}function go(t,e){return t instanceof Io?mi(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var mo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,o.ZT)(e,t),e}(fo),yo=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,o.ZT)(e,t),e}(fo);function bo(t,e){for(var n=Eo(e),r=function(t){n.some((function(e){return hi(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var wo=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,o.ZT)(e,t),e}(fo);function _o(t,e){for(var n=Eo(e),r=function(t){n=n.filter((function(e){return!hi(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Io=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return(0,o.ZT)(e,t),e}(fo);function To(t){return ti(t.integerValue||t.doubleValue)}function Eo(t){return yi(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var So=function(t,e){this.field=t,this.transform=e},Ao=function(t,e){this.version=t,this.transformResults=e},ko=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function No(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Ro=function(){};function Do(t,e,n){t instanceof Lo?function(t,e,n){var r=t.value.clone(),i=Fo(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Mo?function(t,e,n){if(No(t.precondition,e)){var r=Fo(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Uo(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Co(t,e,n){t instanceof Lo?function(t,e,n){if(No(t.precondition,e)){var r=t.value.clone(),i=jo(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Po(e),r).setHasLocalMutations()}}(t,e,n):t instanceof Mo?function(t,e,n){if(No(t.precondition,e)){var r=jo(t.fieldTransforms,n,e),i=e.data;i.setAll(Uo(t)),i.setAll(r),e.convertToFoundDocument(Po(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){No(t.precondition,e)&&e.convertToNoDocument(Br.min())}(t,e)}function Oo(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],a=e.data.field(o.field),s=go(o.transform,a||null);null!=s&&(null==n&&(n=Ti.empty()),n.set(o.field,s))}return n||null}function xo(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&jr(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof yo&&e instanceof yo||t instanceof wo&&e instanceof wo?jr(t.elements,e.elements,hi):t instanceof Io&&e instanceof Io?hi(t.A,e.A):t instanceof mo&&e instanceof mo}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Po(t){return t.isFoundDocument()?t.version:Br.min()}var Lo=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return(0,o.ZT)(e,t),e}(Ro),Mo=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var a=this;return(a=t.call(this)||this).key=e,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return(0,o.ZT)(e,t),e}(Ro);function Uo(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function Fo(t,e,n){var r=new Map;Pr(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],a=o.transform,s=e.data.field(o.field);r.set(o.field,vo(a,s,n[i]))}return r}function jo(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var a=o[i],s=a.transform,u=n.data.field(a.field);r.set(a.field,po(s,u,e))}return r}var Vo,qo,Bo=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return(0,o.ZT)(e,t),e}(Ro),Go=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return(0,o.ZT)(e,t),e}(Ro),Ko=function(t){this.count=t};function Ho(t){switch(t){case Sr.OK:return xr();case Sr.CANCELLED:case Sr.UNKNOWN:case Sr.DEADLINE_EXCEEDED:case Sr.RESOURCE_EXHAUSTED:case Sr.INTERNAL:case Sr.UNAVAILABLE:case Sr.UNAUTHENTICATED:return!1;case Sr.INVALID_ARGUMENT:case Sr.NOT_FOUND:case Sr.ALREADY_EXISTS:case Sr.PERMISSION_DENIED:case Sr.FAILED_PRECONDITION:case Sr.ABORTED:case Sr.OUT_OF_RANGE:case Sr.UNIMPLEMENTED:case Sr.DATA_LOSS:return!0;default:return xr()}}function zo(t){if(void 0===t)return Dr("GRPC error has no .code"),Sr.UNKNOWN;switch(t){case Vo.OK:return Sr.OK;case Vo.CANCELLED:return Sr.CANCELLED;case Vo.UNKNOWN:return Sr.UNKNOWN;case Vo.DEADLINE_EXCEEDED:return Sr.DEADLINE_EXCEEDED;case Vo.RESOURCE_EXHAUSTED:return Sr.RESOURCE_EXHAUSTED;case Vo.INTERNAL:return Sr.INTERNAL;case Vo.UNAVAILABLE:return Sr.UNAVAILABLE;case Vo.UNAUTHENTICATED:return Sr.UNAUTHENTICATED;case Vo.INVALID_ARGUMENT:return Sr.INVALID_ARGUMENT;case Vo.NOT_FOUND:return Sr.NOT_FOUND;case Vo.ALREADY_EXISTS:return Sr.ALREADY_EXISTS;case Vo.PERMISSION_DENIED:return Sr.PERMISSION_DENIED;case Vo.FAILED_PRECONDITION:return Sr.FAILED_PRECONDITION;case Vo.ABORTED:return Sr.ABORTED;case Vo.OUT_OF_RANGE:return Sr.OUT_OF_RANGE;case Vo.UNIMPLEMENTED:return Sr.UNIMPLEMENTED;case Vo.DATA_LOSS:return Sr.DATA_LOSS;default:return xr()}}(qo=Vo||(Vo={}))[qo.OK=0]="OK",qo[qo.CANCELLED=1]="CANCELLED",qo[qo.UNKNOWN=2]="UNKNOWN",qo[qo.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qo[qo.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qo[qo.NOT_FOUND=5]="NOT_FOUND",qo[qo.ALREADY_EXISTS=6]="ALREADY_EXISTS",qo[qo.PERMISSION_DENIED=7]="PERMISSION_DENIED",qo[qo.UNAUTHENTICATED=16]="UNAUTHENTICATED",qo[qo.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qo[qo.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qo[qo.ABORTED=10]="ABORTED",qo[qo.OUT_OF_RANGE=11]="OUT_OF_RANGE",qo[qo.UNIMPLEMENTED=12]="UNIMPLEMENTED",qo[qo.INTERNAL=13]="INTERNAL",qo[qo.UNAVAILABLE=14]="UNAVAILABLE",qo[qo.DATA_LOSS=15]="DATA_LOSS";var Wo=function(){function t(t,e){this.comparator=t,this.root=e||Xo.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Xo.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xo.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Jo(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Jo(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Jo(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Jo(this.root,t,this.comparator,!0)},t}(),Jo=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Xo=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw xr();if(this.right.isRed())throw xr();var t=this.left.check();if(t!==this.right.check())throw xr();return t+(this.isRed()?0:1)},t}();Xo.EMPTY=null,Xo.RED=!0,Xo.BLACK=!1,Xo.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw xr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw xr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw xr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw xr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw xr()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Xo(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var Qo=function(){function t(t){this.comparator=t,this.data=new Wo(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Zo(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Zo(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Zo=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Yo=new Wo(ui.comparator);function $o(){return Yo}var ta=new Wo(ui.comparator);function ea(){return ta}var na=new Wo(ui.comparator);function ra(){return na}var ia=new Qo(ui.comparator);function oa(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=ia,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var aa=new Qo(Fr);function sa(){return aa}var ua=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,ca.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Br.min(),r,sa(),$o(),oa())},t}(),ca=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(Zr.EMPTY_BYTE_STRING,n,oa(),oa(),oa())},t}(),ha=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},la=function(t,e){this.targetId=t,this.V=e},fa=function(t,e,n,r){void 0===n&&(n=Zr.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},pa=function(){function t(){this.S=0,this.D=ga(),this.C=Zr.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"F",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.k=!0,this.C=t)},t.prototype.M=function(){var t=oa(),e=oa(),n=oa();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:xr()}})),new ca(this.C,this.N,t,e,n)},t.prototype.L=function(){this.k=!1,this.D=ga()},t.prototype.B=function(t,e){this.k=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.k=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.k=!0,this.N=!0},t}(),da=function(){function t(t){this.W=t,this.G=new Map,this.H=$o(),this.J=va(),this.Y=new Qo(Fr)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.F||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.F||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:xr()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(Di(i))if(0===n){var o=new ui(i.path);this.tt(e,o,Si.newNoDocument(o,Br.min()))}else Pr(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&Di(o.target)){var a=new ui(o.target.path);null!==e.H.get(a)||e.at(i,a)||e.tt(i,a,Si.newNoDocument(a,t))}r.$&&(n.set(i,r.M()),r.L())}}));var r=oa();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new ua(t,n,this.Y,this.H,r);return this.H=$o(),this.J=va(),this.Y=new Qo(Fr),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new pa,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Qo(Fr),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Rr("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.F?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new pa),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function va(){return new Wo(ui.comparator)}function ga(){return new Wo(ui.comparator)}var ma={asc:"ASCENDING",desc:"DESCENDING"},ya={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ba=function(t,e){this.databaseId=t,this.I=e};function wa(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function _a(t,e){return t.I?e.toBase64():e.toUint8Array()}function Ia(t,e){return wa(t,e.toTimestamp())}function Ta(t){return Pr(!!t),Br.fromTimestamp(function(t){var e=$r(t);return new qr(e.seconds,e.nanos)}(t))}function Ea(t,e){return function(t){return new Wr(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Sa(t){var e=Wr.fromString(t);return Pr(Xa(e)),e}function Aa(t,e){return Ea(t.databaseId,e.path)}function ka(t,e){var n=Sa(e);if(n.get(1)!==t.databaseId.projectId)throw new Ar(Sr.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ar(Sr.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ui(Ca(n))}function Na(t,e){return Ea(t.databaseId,e)}function Ra(t){var e=Sa(t);return 4===e.length?Wr.emptyPath():Ca(e)}function Da(t){return new Wr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Ca(t){return Pr(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Oa(t,e,n){return{name:Aa(t,e),fields:n.value.mapValue.fields}}function xa(t,e,n){var r=ka(t,e.name),i=Ta(e.updateTime),o=new Ti({mapValue:{fields:e.fields}}),a=Si.newFoundDocument(r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Pa(t,e){var n;if(e instanceof Lo)n={update:Oa(t,e.key,e.value)};else if(e instanceof Bo)n={delete:Aa(t,e.key)};else if(e instanceof Mo)n={update:Oa(t,e.key,e.data),updateMask:Ja(e.fieldMask)};else{if(!(e instanceof Go))return xr();n={verify:Aa(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof mo)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof yo)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof wo)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Io)return{fieldPath:e.field.canonicalString(),increment:n.A};throw xr()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Ia(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:xr()}(t,e.precondition)),n}function La(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?ko.updateTime(Ta(t.updateTime)):void 0!==t.exists?ko.exists(t.exists):ko.none()}(e.currentDocument):ko.none(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)Pr("REQUEST_TIME"===e.setToServerValue),n=new mo;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new yo(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new wo(i)}else"increment"in e?n=new Io(t,e.increment):xr();var o=Xr.fromServerFormat(e.fieldPath);return new So(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=ka(t,e.update.name),o=new Ti({mapValue:{fields:e.update.fields}});if(e.updateMask){var a=function(t){var e=t.fieldPaths||[];return new Qr(e.map((function(t){return Xr.fromServerFormat(t)})))}(e.updateMask);return new Mo(i,o,a,n,r)}return new Lo(i,o,n,r)}if(e.delete){var s=ka(t,e.delete);return new Bo(s,n)}if(e.verify){var u=ka(t,e.verify);return new Go(u,n)}return xr()}function Ma(t,e){return{documents:[Na(t,e.path)]}}function Ua(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Na(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Na(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(wi(t.value))return{unaryFilter:{field:Ka(t.field),op:"IS_NAN"}};if(bi(t.value))return{unaryFilter:{field:Ka(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(wi(t.value))return{unaryFilter:{field:Ka(t.field),op:"IS_NOT_NAN"}};if(bi(t.value))return{unaryFilter:{field:Ka(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ka(t.field),op:Ga(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Ka(t.field),direction:Ba(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(t,e){return t.I||oi(e)?e:{value:e}}(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=Va(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Va(e.endAt)),n}function Fa(t){var e=Ra(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Pr(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=ja(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(t){return function(t){return new Bi(Ha(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return oi(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=qa(n.startAt));var h=null;return n.endAt&&(h=qa(n.endAt)),Wi(e,i,s,a,u,"F",c,h)}function ja(t){return t?void 0!==t.unaryFilter?[Wa(t)]:void 0!==t.fieldFilter?[za(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return ja(t)})).reduce((function(t,e){return t.concat(e)})):xr():[]}function Va(t){return{before:t.before,values:t.position}}function qa(t){var e=!!t.before,n=t.values||[];return new Vi(n,e)}function Ba(t){return ma[t]}function Ga(t){return ya[t]}function Ka(t){return{fieldPath:t.canonicalString()}}function Ha(t){return Xr.fromServerFormat(t.fieldPath)}function za(t){return Ci.create(Ha(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return xr()}}(t.fieldFilter.op),t.fieldFilter.value)}function Wa(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Ha(t.unaryFilter.field);return Ci.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Ha(t.unaryFilter.field);return Ci.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Ha(t.unaryFilter.field);return Ci.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Ha(t.unaryFilter.field);return Ci.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return xr()}}function Ja(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function Xa(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Qa(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Ya(e)),e=Za(t.get(n),e);return Ya(e)}function Za(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Ya(t){return t+"\x01\x01"}function $a(t){var e=t.length;if(Pr(e>=2),2===e)return Pr("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Wr.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("\x01",o);switch((a<0||a>n)&&xr(),t.charAt(a+1)){case"\x01":var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=t.substring(o,a),i+="\0";break;case"\x11":i+=t.substring(o,a+1);break;default:xr()}o=a+2}return new Wr(r)}var ts=function(t,e){this.seconds=t,this.nanoseconds=e},es=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};es.store="owner",es.key="owner";var ns=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};ns.store="mutationQueues",ns.keyPath="userId";var rs=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};rs.store="mutations",rs.keyPath="batchId",rs.userMutationsIndex="userMutationsIndex",rs.userMutationsKeyPath=["userId","batchId"];var is=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Qa(e)]},t.key=function(t,e,n){return[t,Qa(e),n]},t}();is.store="documentMutations",is.PLACEHOLDER=new is;var os=function(t,e){this.path=t,this.readTime=e},as=function(t,e){this.path=t,this.version=e},ss=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};ss.store="remoteDocuments",ss.readTimeIndex="readTimeIndex",ss.readTimeIndexPath="readTime",ss.collectionReadTimeIndex="collectionReadTimeIndex",ss.collectionReadTimeIndexPath=["parentPath","readTime"];var us=function(t){this.byteSize=t};us.store="remoteDocumentGlobal",us.key="remoteDocumentGlobalKey";var cs=function(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};cs.store="targets",cs.keyPath="targetId",cs.queryTargetsIndexName="queryTargetsIndex",cs.queryTargetsKeyPath=["canonicalId","targetId"];var hs=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};hs.store="targetDocuments",hs.keyPath=["targetId","path"],hs.documentTargetsIndex="documentTargetsIndex",hs.documentTargetsKeyPath=["path","targetId"];var ls=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};ls.key="targetGlobalKey",ls.store="targetGlobal";var fs=function(t,e){this.collectionId=t,this.parent=e};fs.store="collectionParents",fs.keyPath=["collectionId","parent"];var ps=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};ps.store="clientMetadata",ps.keyPath="clientId";var ds=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};ds.store="bundles",ds.keyPath="bundleId";var vs=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};vs.store="namedQueries",vs.keyPath="name";var gs=(0,o.ev)((0,o.ev)([],(0,o.ev)((0,o.ev)([],(0,o.ev)((0,o.ev)([],(0,o.ev)((0,o.ev)([],[ns.store,rs.store,is.store,ss.store,cs.store,es.store,ls.store,hs.store]),[ps.store])),[us.store])),[fs.store])),[ds.store,vs.store]),ms="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ys=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),bs=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},ws=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&xr(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),_s=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new bs,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Es(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Rs(e.target.error);n.ft.reject(new Es(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Es(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Rr("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new As(e)},t}(),Is=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t((0,a.z$)())&&Dr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Rr("SimpleDb","Removing database:",t),ks(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=(0,a.z$)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof Tr&&"YES"===(null===(t=Tr.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return(0,o.mG)(this,void 0,void 0,(function(){var e,n=this;return(0,o.Jh)(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(Rr("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Es(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Ar(Sr.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new Es(t,n))},i.onupgradeneeded=function(t){Rr("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){Rr("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return(0,o.mG)(this,void 0,void 0,(function(){var i,a,s,u,c;return(0,o.Jh)(this,(function(h){switch(h.label){case 0:i="readonly"===e,a=0,s=function(){var e,s,c,h,l;return(0,o.Jh)(this,(function(o){switch(o.label){case 0:++a,o.label=1;case 1:return o.trys.push([1,4,,5]),[4,u.At(t)];case 2:return u.db=o.sent(),e=_s.open(u.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),ws.reject(t)})).toPromise(),c={},s.catch((function(){})),[4,e.dt];case 3:return[2,(c.value=(o.sent(),s),c)];case 4:return h=o.sent(),l="FirebaseError"!==h.name&&a<3,Rr("SimpleDb","Transaction failed with error:",h.message,"Retrying:",l),u.close(),l?[3,5]:[2,{value:Promise.reject(h)}];case 5:return[2]}}))},u=this,h.label=1;case 1:return[5,s()];case 2:if("object"==typeof(c=h.sent()))return[2,c.value];h.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Ts=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return ks(this.Pt.delete())},t}(),Es=function(t){function e(e,n){var r=this;return(r=t.call(this,Sr.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return(0,o.ZT)(e,t),e}(Ar);function Ss(t){return"IndexedDbTransactionError"===t.name}var As=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Rr("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Rr("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),ks(n)},t.prototype.add=function(t){return Rr("SimpleDb","ADD",this.store.name,t,t),ks(this.store.add(t))},t.prototype.get=function(t){var e=this;return ks(this.store.get(t)).next((function(n){return void 0===n&&(n=null),Rr("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return Rr("SimpleDb","DELETE",this.store.name,t),ks(this.store.delete(t))},t.prototype.count=function(){return Rr("SimpleDb","COUNT",this.store.name),ks(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.kt=function(t,e){Rr("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Ft=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new ws((function(n,r){e.onerror=function(t){var e=Rs(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new ws((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Ts(i),a=e(i.primaryKey,i.value,o);if(a instanceof ws){var s=a.catch((function(t){return o.done(),ws.reject(t)}));n.push(s)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return ws.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Ft?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function ks(t){return new ws((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=Rs(t.target.error);n(e)}}))}var Ns=!1;function Rs(t){var e=Is._t((0,a.z$)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Ar("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Ns||(Ns=!0,setTimeout((function(){throw r}),0)),r}}return t}var Ds=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return(0,o.ZT)(e,t),e}(ys);function Cs(t,e){var n=Lr(t);return Is.It(n.Mt,e)}var Os=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Do(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&Co(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&Co(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Br.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),oa())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&jr(this.mutations,t.mutations,(function(t,e){return xo(t,e)}))&&jr(this.baseMutations,t.baseMutations,(function(t,e){return xo(t,e)}))},t}(),xs=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Pr(e.mutations.length===r.length);for(var i=ra(),o=e.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new t(e,n,r,i)},t}(),Ps=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=Br.min()),void 0===o&&(o=Br.min()),void 0===a&&(a=Zr.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Ls=function(t){this.Lt=t};function Ms(t,e){if(e.document)return xa(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=ui.fromSegments(e.noDocument.path),r=qs(e.noDocument.readTime),i=Si.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=ui.fromSegments(e.unknownDocument.path);return r=qs(e.unknownDocument.version),Si.newUnknownDocument(o,r)}return xr()}function Us(t,e,n){var r=Fs(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:Aa(t,e.key),fields:e.data.value.mapValue.fields,updateTime:wa(t,e.version.toTimestamp())}}(t.Lt,e),a=e.hasCommittedMutations;return new ss(null,null,o,a,r,i)}if(e.isNoDocument()){var s=e.key.path.toArray(),u=Vs(e.version);return a=e.hasCommittedMutations,new ss(null,new os(s,u),null,a,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),h=Vs(e.version);return new ss(new as(c,h),null,null,!0,r,i)}return xr()}function Fs(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function js(t){var e=new qr(t[0],t[1]);return Br.fromTimestamp(e)}function Vs(t){var e=t.toTimestamp();return new ts(e.seconds,e.nanoseconds)}function qs(t){var e=new qr(t.seconds,t.nanoseconds);return Br.fromTimestamp(e)}function Bs(t,e){for(var n=(e.baseMutations||[]).map((function(e){return La(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var a=e.mutations.map((function(e){return La(t.Lt,e)})),s=qr.fromMillis(e.localWriteTimeMs);return new Os(e.batchId,s,n,a)}function Gs(t){var e,n,r=qs(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?qs(t.lastLimboFreeSnapshotVersion):Br.min();return void 0!==t.query.documents?(Pr(1===(n=t.query).documents.length),e=eo(Ji(Ra(n.documents[0])))):e=function(t){return eo(Fa(t))}(t.query),new Ps(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Zr.fromBase64String(t.resumeToken))}function Ks(t,e){var n,r=Vs(e.snapshotVersion),i=Vs(e.lastLimboFreeSnapshotVersion);n=Di(e.target)?Ma(t.Lt,e.target):Ua(t.Lt,e.target);var o=e.resumeToken.toBase64();return new cs(e.targetId,Ni(e.target),r,o,e.sequenceNumber,i,n)}function Hs(t){var e=Fa({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?no(e,e.limit,"L"):e}var zs=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return Ws(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:qs(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return Ws(t).put({bundleId:(n=e).id,createTime:Vs(Ta(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Js(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:Hs(e.bundledQuery),readTime:qs(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return Js(t).put(function(t){return{name:t.name,readTime:Vs(Ta(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Ws(t){return Cs(t,ds.store)}function Js(t){return Cs(t,vs.store)}var Xs=function(){function t(){this.Bt=new Qs}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),ws.resolve()},t.prototype.getCollectionParents=function(t,e){return ws.resolve(this.Bt.getEntries(e))},t}(),Qs=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Qo(Wr.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Qo(Wr.comparator)).toArray()},t}(),Zs=function(){function t(){this.qt=new Qs}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:Qa(i)};return Ys(t).put(o)}return ws.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Vr(e),""],!1,!0);return Ys(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push($a(o.parent))}return n}))},t}();function Ys(t){return Cs(t,fs.store)}var $s={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},tu=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function eu(t,e,n){var r=t.store(rs.store),i=t.store(is.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.$t({range:a},(function(t,e,n){return s++,n.delete()}));o.push(u.next((function(){Pr(1===s)})));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],p=is.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return ws.waitFor(o).next((function(){return c}))}function nu(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw xr();e=t.noDocument}return JSON.stringify(e).length}tu.DEFAULT_COLLECTION_PERCENTILE=10,tu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tu.DEFAULT=new tu(41943040,tu.DEFAULT_COLLECTION_PERCENTILE,tu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tu.DISABLED=new tu(-1,0,0);var ru=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return Pr(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ou(t).$t({index:rs.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=au(t),a=ou(t);return a.add({}).next((function(s){Pr("number"==typeof s);for(var u=new Os(s,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return Pa(t.Lt,e)})),i=n.mutations.map((function(e){return Pa(t.Lt,e)}));return new rs(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),h=[],l=new Qo((function(t,e){return Fr(t.canonicalString(),e.canonicalString())})),f=0,p=r;f<p.length;f++){var d=p[f],v=is.key(i.userId,d.key.path,s);l=l.add(d.key.path.popLast()),h.push(a.put(c)),h.push(o.put(v,is.PLACEHOLDER))}return l.forEach((function(e){h.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Kt[s]=u.keys()})),ws.waitFor(h).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return ou(t).get(e).next((function(t){return t?(Pr(t.userId===n.userId),Bs(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?ws.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return ou(t).$t({index:rs.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(Pr(e.batchId>=r),o=Bs(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return ou(t).$t({index:rs.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ou(t).Nt(rs.userMutationsIndex,n).next((function(t){return t.map((function(t){return Bs(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=is.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return au(t).$t({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],h=$a(u);if(s===n.userId&&e.path.isEqual(h))return ou(t).get(c).next((function(t){if(!t)throw xr();Pr(t.userId===n.userId),o.push(Bs(n.R,t))}));a.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Qo(Fr),i=[];return e.forEach((function(e){var o=is.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=au(t).$t({range:a},(function(t,i,o){var a=t[0],s=t[1],u=t[2],c=$a(s);a===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),ws.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=is.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new Qo(Fr);return au(t).$t({range:a},(function(t,e,o){var a=t[0],u=t[1],c=t[2],h=$a(u);a===n.userId&&r.isPrefixOf(h)?h.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.Wt(t,s)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(ou(t).get(e).next((function(t){if(null===t)throw xr();Pr(t.userId===n.userId),r.push(Bs(n.R,t))})))})),ws.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return eu(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),ws.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return ws.resolve();var r=IDBKeyRange.lowerBound(is.prefixForUser(e.userId)),i=[];return au(t).$t({range:r},(function(t,n,r){if(t[0]===e.userId){var o=$a(t[1]);i.push(o)}else r.done()})).next((function(){Pr(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return iu(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return su(t).get(this.userId).next((function(t){return t||new ns(e.userId,-1,"")}))},t}();function iu(t,e,n){var r=is.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return au(t).$t({range:o,Ft:!0},(function(t,n,r){var o=t[0],s=t[1];t[2],o===e&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function ou(t){return Cs(t,rs.store)}function au(t){return Cs(t,is.store)}function su(t){return Cs(t,ns.store)}var uu=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),cu=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new uu(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return Br.fromTimestamp(new qr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return hu(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return Pr(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return hu(t).$t((function(a,s){var u=Gs(s);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return ws.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return hu(t).$t((function(t,n){var r=Gs(n);e(r)}))},t.prototype.Xt=function(t){return lu(t).get(ls.key).next((function(t){return Pr(null!==t),t}))},t.prototype.Zt=function(t,e){return lu(t).put(ls.key,e)},t.prototype.te=function(t,e){return hu(t).put(Ks(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=Ni(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return hu(t).$t({range:r,index:cs.queryTargetsIndexName},(function(t,n,r){var o=Gs(n);Ri(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=fu(t);return e.forEach((function(e){var a=Qa(e.path);i.push(o.put(new hs(n,a))),i.push(r.referenceDelegate.addReference(t,n,e))})),ws.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=fu(t);return ws.forEach(e,(function(e){var o=Qa(e.path);return ws.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=fu(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=fu(t),i=oa();return r.$t({range:n,Ft:!0},(function(t,e,n){var r=$a(t[1]),o=new ui(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=Qa(e.path),r=IDBKeyRange.bound([n],[Vr(n)],!1,!0),i=0;return fu(t).$t({index:hs.documentTargetsIndex,Ft:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return hu(t).get(e).next((function(t){return t?Gs(t):null}))},t}();function hu(t){return Cs(t,cs.store)}function lu(t){return Cs(t,ls.store)}function fu(t){return Cs(t,hs.store)}function pu(t){return(0,o.mG)(this,void 0,void 0,(function(){return(0,o.Jh)(this,(function(e){if(t.code!==Sr.FAILED_PRECONDITION||t.message!==ms)throw t;return Rr("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function du(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=Fr(n,i);return 0===a?Fr(r,o):a}var vu=function(){function t(t){this.ne=t,this.buffer=new Qo(du),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();du(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),gu=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Rr("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return(0,o.mG)(e,void 0,void 0,(function(){var e;return(0,o.Jh)(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Ss(e=n.sent())?(Rr("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,pu(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),mu=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return ws.resolve(Er.o);var r=new vu(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Rr("LruGarbageCollector","Garbage collection skipped; disabled"),ws.resolve($s)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Rr("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),$s):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,a,u,c,h=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>h.params.maximumSequenceNumbersToCollect?(Rr("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+h.params.maximumSequenceNumbersToCollect+" from "+e),r=h.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),h.nthSequenceNumber(t,r)})).next((function(r){return n=r,a=Date.now(),h.removeTargets(t,n,e)})).next((function(e){return i=e,u=Date.now(),h.removeOrphanedDocuments(t,n)})).next((function(t){return c=Date.now(),Nr()<=s.in.DEBUG&&Rr("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(u-a)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-l)+"ms"),ws.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),yu=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new mu(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return bu(t,n)},t.prototype.removeReference=function(t,e,n){return bu(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return bu(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return su(t).Ot((function(r){return iu(t,r,e).next((function(t){return t&&(n=!0),ws.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(a,s){if(s<=e){var u=n._e(t,a).next((function(e){if(!e)return o++,r.getEntry(t,a).next((function(){return r.removeEntry(a),fu(t).delete([0,Qa(a.path)])}))}));i.push(u)}})).next((function(){return ws.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return bu(t,e)},t.prototype.we=function(t,e){var n,r=fu(t),i=Er.o;return r.$t({index:hs.documentTargetsIndex},(function(t,r){var o=t[0];t[1];var a=r.path,s=r.sequenceNumber;0===o?(i!==Er.o&&e(new ui($a(n)),i),i=s,n=a):i=Er.o})).next((function(){i!==Er.o&&e(new ui($a(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function bu(t,e){return fu(t).put(function(t,e){return new hs(0,Qa(t.path),e)}(e,t.currentSequenceNumber))}var wu=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(this.equalsFn(a,t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Kr(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];t(a,s)}}))},t.prototype.isEmpty=function(){return Hr(this.inner)},t}(),_u=function(){function t(){this.changes=new wu((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Br.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Si.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?ws.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Iu=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Su(t).put(Au(e),n)},t.prototype.removeEntry=function(t,e){var n=Su(t),r=Au(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return Su(t).get(Au(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return Su(t).get(Au(e)).next((function(t){return{document:n.ye(e,t),size:nu(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=$o();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=$o(),i=new Wo(ui.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,nu(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return ws.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Su(t).$t({range:r},(function(t,e,r){for(var a=ui.fromSegments(t);o&&ui.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=$o(),o=e.path.length+1,a={};if(n.isEqual(Br.min())){var s=e.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=e.path.toArray(),c=Fs(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=ss.collectionReadTimeIndex}return Su(t).$t(a,(function(t,n,a){if(t.length===o){var s=Ms(r.R,n);e.path.isPrefixOf(s.key.path)?ao(e,s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new Tu(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Eu(t).get(us.key).next((function(t){return Pr(!!t),t}))},t.prototype.me=function(t,e){return Eu(t).put(us.key,e)},t.prototype.ye=function(t,e){if(e){var n=Ms(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(Br.min()))return n}return Si.newInvalidDocument(t)},t}(),Tu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new wu((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return(0,o.ZT)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Qo((function(t,e){return Fr(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,a){var s=e.Ae.get(o);if(a.document.isValidDocument()){var u=Us(e.Ie.R,a.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=nu(u);r+=c-s,n.push(e.Ie.addEntry(t,o,u))}else if(r-=s,e.trackRemovals){var h=Us(e.Ie.R,Si.newNoDocument(o,Br.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,h))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),ws.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(_u);function Eu(t){return Cs(t,us.store)}function Su(t){return Cs(t,ss.store)}function Au(t){return t.path.toArray()}var ku=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;Pr(n<r&&n>=0&&r<=11);var o=new _s("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(es.store)}(t),function(t){t.createObjectStore(ns.store,{keyPath:ns.keyPath}),t.createObjectStore(rs.store,{keyPath:rs.keyPath,autoIncrement:!0}).createIndex(rs.userMutationsIndex,rs.userMutationsKeyPath,{unique:!0}),t.createObjectStore(is.store)}(t),Nu(t),function(t){t.createObjectStore(ss.store)}(t));var a=ws.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(hs.store),t.deleteObjectStore(cs.store),t.deleteObjectStore(ls.store)}(t),Nu(t)),a=a.next((function(){return function(t){var e=t.store(ls.store),n=new ls(0,0,Br.min().toTimestamp(),0);return e.put(ls.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(t,e){return e.store(rs.store).Nt().next((function(n){t.deleteObjectStore(rs.store),t.createObjectStore(rs.store,{keyPath:rs.keyPath,autoIncrement:!0}).createIndex(rs.userMutationsIndex,rs.userMutationsKeyPath,{unique:!0});var r=e.store(rs.store),i=n.map((function(t){return r.put(t)}));return ws.waitFor(i)}))}(t,o)}))),a=a.next((function(){!function(t){t.createObjectStore(ps.store,{keyPath:ps.keyPath})}(t)}))),n<5&&r>=5&&(a=a.next((function(){return i.Re(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(t){t.createObjectStore(us.store)}(t),i.be(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ve(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(ss.store);e.createIndex(ss.readTimeIndex,ss.readTimeIndexPath,{unique:!1}),e.createIndex(ss.collectionReadTimeIndex,ss.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(a=a.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(a=a.next((function(){!function(t){t.createObjectStore(ds.store,{keyPath:ds.keyPath})}(t),function(t){t.createObjectStore(vs.store,{keyPath:vs.keyPath})}(t)}))),a},t.prototype.be=function(t){var e=0;return t.store(ss.store).$t((function(t,n){e+=nu(n)})).next((function(){var n=new us(e);return t.store(us.store).put(us.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(ns.store),r=t.store(rs.store);return n.Nt().next((function(n){return ws.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(rs.userMutationsIndex,i).next((function(r){return ws.forEach(r,(function(r){Pr(r.userId===n.userId);var i=Bs(e.R,r);return eu(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(hs.store),n=t.store(ss.store);return t.store(ls.store).get(ls.key).next((function(t){var r=[];return n.$t((function(n,i){var o=new Wr(n),a=function(t){return[0,Qa(t)]}(o);r.push(e.get(a).next((function(n){return n?ws.resolve():function(n){return e.put(new hs(0,Qa(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return ws.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(fs.store,{keyPath:fs.keyPath});var n=e.store(fs.store),r=new Qs,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Qa(i)})}};return e.store(ss.store).$t({Ft:!0},(function(t,e){var n=new Wr(t);return i(n.popLast())})).next((function(){return e.store(is.store).$t({Ft:!0},(function(t,e){t[0];var n=t[1];t[2];var r=$a(n);return i(r.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(cs.store);return n.$t((function(t,r){var i=Gs(r),o=Ks(e.R,i);return n.put(o)}))},t}();function Nu(t){t.createObjectStore(hs.store,{keyPath:hs.keyPath}).createIndex(hs.documentTargetsIndex,hs.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(cs.store,{keyPath:cs.keyPath}).createIndex(cs.queryTargetsIndexName,cs.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(ls.store)}var Ru="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Du=function(){function t(e,n,r,i,o,a,s,u,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=a,this.document=s,this.De=c,this.Ce=h,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new Ar(Sr.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new yu(this,i),this.Le=n+"main",this.R=new Ls(u),this.Be=new Is(this.Le,11,new ku(this.R)),this.qe=new cu(this.referenceDelegate,this.R),this.Ut=new Zs,this.Ue=function(t,e){return new Iu(t,e)}(this.R,this.Ut),this.Ke=new zs,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===h&&Dr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Ar(Sr.FAILED_PRECONDITION,Ru);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new Er(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return(0,o.mG)(e,void 0,void 0,(function(){return(0,o.Jh)(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return(0,o.mG)(e,void 0,void 0,(function(){return(0,o.Jh)(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return(0,o.mG)(e,void 0,void 0,(function(){return(0,o.Jh)(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return Ou(e).put(new ps(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(Ss(e))return Rr("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Rr("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return Cu(t).get(es.key).next((function(t){return ws.resolve(e.tn(t))}))},t.prototype.en=function(t){return Ou(t).delete(this.clientId)},t.prototype.nn=function(){return(0,o.mG)(this,void 0,void 0,(function(){var t,e,n,r,i=this;return(0,o.Jh)(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=Cs(t,ps.store);return e.Nt().next((function(t){var n=i.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return ws.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)r=n[e],this.Qe.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?ws.resolve(!0):Cu(t).get(es.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new Ar(Sr.FAILED_PRECONDITION,Ru);return!1}}return!(!e.networkEnabled||!e.inForeground)||Ou(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&Rr("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return(0,o.mG)(this,void 0,void 0,(function(){var t=this;return(0,o.Jh)(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[es.store,ps.store],(function(e){var n=new Ds(e,Er.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return Ou(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return ru.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;Rr("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Be.runTransaction(t,o,gs,(function(o){return i=new Ds(o,r.Ne?r.Ne.next():Er.o),"readwrite-primary"===e?r.Je(i).next((function(t){return!!t||r.Ye(i)})).next((function(e){if(!e)throw Dr("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new Ar(Sr.FAILED_PRECONDITION,ms);return n(i)})).next((function(t){return r.Ze(i).next((function(){return t}))})):r.dn(i).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return Cu(t).get(es.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Ar(Sr.FAILED_PRECONDITION,Ru)}))},t.prototype.Ze=function(t){var e=new es(this.clientId,this.allowTabSynchronization,Date.now());return Cu(t).put(es.key,e)},t.yt=function(){return Is.yt()},t.prototype.Xe=function(t){var e=this,n=Cu(t);return n.get(es.key).next((function(t){return e.tn(t)?(Rr("IndexedDbPersistence","Releasing primary lease."),n.delete(es.key)):ws.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Dr("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Fe=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ke=function(){e.un(),(0,a.G6)()&&navigator.appVersion.match("Version/14")&&e.Se.enterRestrictedMode(!0),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("pagehide",this.ke))},t.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return Rr("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Dr("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Dr("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Cu(t){return Cs(t,es.store)}function Ou(t){return Cs(t,ps.store)}function xu(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Pu=function(t,e){this.progress=t,this.wn=e},Lu=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return ui.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):$i(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new ui(e)).next((function(t){var e=ea();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=ea();return this.Ut.getCollectionParents(t,i).next((function(a){return ws.forEach(a,(function(a){var s=function(t,e){return new zi(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,a.child(i));return r.An(t,s,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,h=r.get(c);null==h&&(h=Si.newInvalidDocument(c),r=r.insert(c,h)),Co(u,h,o.localWriteTime),h.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){ao(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=oa(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof Mo&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),Mu=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=oa(),i=oa(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Uu=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Br.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(o){var a=i.Cn(e,o);return(Xi(e)||Qi(e))&&i.Nn(e.limitType,a,r,n)?i.Dn(t,e):(Nr()<=s.in.DEBUG&&Rr("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),oo(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return a.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new Qo(so(t));return e.forEach((function(e,r){ao(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Nr()<=s.in.DEBUG&&Rr("QueryEngine","Using full collection scan to execute query:",oo(e)),this.Sn.getDocumentsMatchingQuery(t,e,Br.min())},t}(),Fu=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.kn=new Wo(Fr),this.Fn=new wu((function(t){return Ni(t)}),Ri),this.$n=Br.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Lu(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.kn)}))},t}();function ju(t,e,n,r){return new Fu(t,e,n,r)}function Vu(t,e){return(0,o.mG)(this,void 0,void 0,(function(){var n,r,i,a;return(0,o.Jh)(this,(function(o){switch(o.label){case 0:return n=Lr(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n._n.getAllMutationBatches(t).next((function(a){return o=a,r=n.persistence.getMutationQueue(e),i=new Lu(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],a=oa(),s=0,u=o;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var h=0,l=c.mutations;h<l.length;h++){var f=l[h];a=a.add(f.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var g=0,m=v.mutations;g<m.length;g++){var y=m[g];a=a.add(y.key)}}return i.pn(t,a).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return a=o.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),a)]}}))}))}function qu(t,e){var n=Lr(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),a=ws.resolve();return o.forEach((function(t){a=a.next((function(){return r.getEntry(e,t)})).next((function(e){var o=n.docVersions.get(t);Pr(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))}))})),a.next((function(){return t._n.removeMutationBatch(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}function Bu(t){var e=Lr(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function Gu(t,e){var n=Lr(t),r=e.snapshotVersion,i=n.kn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.kn;var a=[];e.targetChanges.forEach((function(e,o){var s=i.get(o);if(s){a.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=s.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return Pr(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(s,c,e)&&a.push(n.qe.updateTargetData(t,c))}}}));var s=$o();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),a.push(Ku(t,o,e.documentUpdates,r,void 0).next((function(t){s=t}))),!r.isEqual(Br.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));a.push(u)}return ws.waitFor(a).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,s)})).next((function(){return s}))})).then((function(t){return n.kn=i,t}))}function Ku(t,e,n,r,i){var o=oa();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=$o();return n.forEach((function(n,a){var s=t.get(n),u=(null==i?void 0:i.get(n))||r;a.isNoDocument()&&a.version.isEqual(Br.min())?(e.removeEntry(n,u),o=o.insert(n,a)):!s.isValidDocument()||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(e.addEntry(a,u),o=o.insert(n,a)):Rr("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),o}))}function Hu(t,e){var n=Lr(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function zu(t,e){var n=Lr(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?(r=i,ws.resolve(r)):n.qe.allocateTargetId(t).next((function(i){return r=new Ps(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.kn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.kn=n.kn.insert(t.targetId,t),n.Fn.set(e,t.targetId)),t}))}function Wu(t,e,n){return(0,o.mG)(this,void 0,void 0,(function(){var r,i,a,s;return(0,o.Jh)(this,(function(o){switch(o.label){case 0:r=Lr(t),i=r.kn.get(e),a=n?"readwrite":"readwrite-primary",o.label=1;case 1:return o.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",a,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:o.sent(),o.label=3;case 3:return[3,5];case 4:if(!Ss(s=o.sent()))throw s;return Rr("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.kn=r.kn.remove(e),r.Fn.delete(i.target),[2]}}))}))}function Ju(t,e,n){var r=Lr(t),i=Br.min(),o=oa();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=Lr(t),i=r.Fn.get(n);return void 0!==i?ws.resolve(r.kn.get(i)):r.qe.getTargetData(e,n)}(r,t,eo(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:Br.min(),n?o:oa())})).next((function(t){return{documents:t,Bn:o}}))}))}function Xu(t,e){var n=Lr(t),r=Lr(n.qe),i=n.kn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function Qu(t){var e=Lr(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=Lr(t),i=$o(),o=Fs(n),a=Su(e),s=IDBKeyRange.lowerBound(o,!0);return a.$t({index:ss.readTimeIndex,range:s},(function(t,e){var n=Ms(r.R,e);i=i.insert(n.key,n),o=e.readTime})).next((function(){return{wn:i,readTime:js(o)}}))}(e.On,t,e.$n)})).then((function(t){var n=t.wn,r=t.readTime;return e.$n=r,n}))}function Zu(t){return(0,o.mG)(this,void 0,void 0,(function(){var e;return(0,o.Jh)(this,(function(n){return[2,(e=Lr(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=Su(t),n=Br.min();return e.$t({index:ss.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=js(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.$n=t}))]}))}))}function Yu(t,e,n,r){return(0,o.mG)(this,void 0,void 0,(function(){var i,a,s,u,c,h,l,f,p,d;return(0,o.Jh)(this,(function(o){switch(o.label){case 0:for(i=Lr(t),a=oa(),s=$o(),u=ra(),c=0,h=n;c<h.length;c++)l=h[c],f=e.qn(l.metadata.name),l.document&&(a=a.add(f)),s=s.insert(f,e.Un(l)),u=u.insert(f,e.Kn(l.metadata.readTime));return p=i.On.newChangeBuffer({trackRemovals:!0}),[4,zu(i,function(t){return eo(Ji(Wr.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=o.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return Ku(t,p,s,Br.min(),u).next((function(e){return p.apply(t),e})).next((function(e){return i.qe.removeMatchingKeysForTargetId(t,d.targetId).next((function(){return i.qe.addMatchingKeys(t,a,d.targetId)})).next((function(){return i.Mn.En(t,e)})).next((function(){return e}))}))}))]}}))}))}function $u(t,e,n){return void 0===n&&(n=oa()),(0,o.mG)(this,void 0,void 0,(function(){var r,i;return(0,o.Jh)(this,(function(o){switch(o.label){case 0:return[4,zu(t,eo(Hs(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Lr(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=Ta(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ke.saveNamedQuery(t,e);var a=r.withResumeToken(Zr.EMPTY_BYTE_STRING,o);return i.kn=i.kn.insert(a.targetId,a),i.qe.updateTargetData(t,a).next((function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)})).next((function(){return i.qe.addMatchingKeys(t,n,r.targetId)})).next((function(){return i.Ke.saveNamedQuery(t,e)}))}))]}}))}))}var tc=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return ws.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:Ta(n.createTime)}),ws.resolve()},t.prototype.getNamedQuery=function(t,e){return ws.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:Hs(t.bundledQuery),readTime:Ta(t.readTime)}}(e)),ws.resolve()},t}(),ec=function(){function t(){this.Wn=new Qo(nc.Gn),this.zn=new Qo(nc.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new nc(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new nc(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new ui(new Wr([])),r=new nc(n,t),i=new nc(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new ui(new Wr([])),n=new nc(e,t),r=new nc(e,t+1),i=oa();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new nc(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),nc=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return ui.comparator(t.key,e.key)||Fr(t.ns,e.ns)},t.Hn=function(t,e){return Fr(t.ns,e.ns)||ui.comparator(t.key,e.key)},t}(),rc=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Qo(nc.Gn)}return t.prototype.checkEmpty=function(t){return ws.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new Os(i,e,n,r);this._n.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.rs=this.rs.add(new nc(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return ws.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return ws.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.cs(n),i=r<0?0:r;return ws.resolve(this._n.length>i?this._n[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return ws.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return ws.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new nc(e,0),i=new nc(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),ws.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Qo(Fr);return e.forEach((function(t){var e=new nc(t,0),i=new nc(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),ws.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;ui.isDocumentKey(i)||(i=i.child(""));var o=new nc(new ui(i),0),a=new Qo(Fr);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(a=a.add(t.ns)),!0)}),o),ws.resolve(this.us(a))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Pr(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return ws.forEach(e.mutations,(function(i){var o=new nc(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new nc(e,0),r=this.rs.firstAfterOrEqual(n);return ws.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return this._n.length,ws.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),ic=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Wo(ui.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,a=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:a,readTime:n}),this.size+=a-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return ws.resolve(n?n.document.clone():Si.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=$o();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Si.newInvalidDocument(t))})),ws.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=$o(),i=new ui(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.document,h=u.readTime;if(!e.path.isPrefixOf(s.path))break;h.compareTo(n)<=0||ao(e,c)&&(r=r.insert(c.key,c.clone()))}return ws.resolve(r)},t.prototype.fs=function(t,e){return ws.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new oc(this)},t.prototype.getSize=function(t){return ws.resolve(this.size)},t}(),oc=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return(0,o.ZT)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),ws.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(_u),ac=function(){function t(t){this.persistence=t,this.ds=new wu((function(t){return Ni(t)}),Ri),this.lastRemoteSnapshotVersion=Br.min(),this.highestTargetId=0,this.ws=0,this._s=new ec,this.targetCount=0,this.ys=uu.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),ws.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return ws.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return ws.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),ws.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),ws.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new uu(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,ws.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),ws.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,ws.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.ds.delete(a),o.push(r.removeMatchingKeysForTargetId(t,s.targetId)),i++)})),ws.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return ws.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return ws.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),ws.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),ws.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),ws.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return ws.resolve(n)},t.prototype.containsKey=function(t,e){return ws.resolve(this._s.containsKey(e))},t}(),sc=function(){function t(t,e){var n=this;this.gs={},this.Ne=new Er(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new ac(this),this.Ut=new Xs,this.Ue=function(t,e){return new ic(t,(function(t){return n.referenceDelegate.ps(t)}))}(this.Ut),this.R=new Ls(e),this.Ke=new tc(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new rc(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;Rr("MemoryPersistence","Starting transaction:",t);var i=new uc(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return ws.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),uc=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return(0,o.ZT)(e,t),e}(ys),cc=function(){function t(t){this.persistence=t,this.As=new ec,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw xr()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),ws.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),ws.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),ws.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ws.forEach(this.vs,(function(r){var i=ui.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return ws.or([function(){return ws.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),hc=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function lc(t,e){return"firestore_clients_"+t+"_"+e}function fc(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function pc(t,e){return"firestore_targets_"+t+"_"+e}hc.UNAUTHENTICATED=new hc(null),hc.GOOGLE_CREDENTIALS=new hc("google-credentials-uid"),hc.FIRST_PARTY=new hc("first-party-uid"),hc.MOCK_USER=new hc("mock-user");var dc=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&(a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Ar(o.error.code,o.error.message)),a?new t(e,n,o.state,i):(Dr("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),vc=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Ar(i.error.code,i.error.message)),o?new t(e,i.state,r):(Dr("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),gc=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=sa(),a=0;i&&a<r.activeTargetIds.length;++a)i=si(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(Dr("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),mc=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Dr("SharedClientState","Failed to parse online state: "+e),null)},t}(),yc=function(){function t(){this.activeTargetIds=sa()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),bc=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new Wo(Fr),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=lc(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Fs=this.Fs.insert(this.Ns,new yc),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return(0,o.mG)(this,void 0,void 0,(function(){var t,e,n,r,i,a,s,u,c,h,l,f=this;return(0,o.Jh)(this,(function(o){switch(o.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=o.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(lc(this.persistenceKey,r)))&&(a=gc.Vs(r,i))&&(this.Fs=this.Fs.insert(a.clientId,a));for(this.Qs(),(s=this.storage.getItem(this.Us))&&(u=this.js(s))&&this.Ws(u),c=0,h=this.$s;c<h.length;c++)l=h[c],this.ks(l);return this.$s=[],this.window.addEventListener("pagehide",(function(){return f.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.Fs.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(pc(this.persistenceKey,t));if(n){var r=vc.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(pc(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Rr("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Rr("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Rr("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.ks=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Rr("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void Dr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return(0,o.mG)(e,void 0,void 0,(function(){var t,e,r,i,a,s;return(0,o.Jh)(this,(function(o){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(a=this.js(n.newValue)))return[2,this.Ws(a)]}else if(n.key===this.Ms)(s=function(t){var e=Er.o;if(null!=t)try{var n=JSON.parse(t);Pr("number"==typeof n),e=n}catch(t){Dr("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Er.o&&this.sequenceNumberHandler(s);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new dc(this.currentUser,t,e,n),i=fc(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=fc(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){var e={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(e))},t.prototype.Ys=function(t,e,n){var r=pc(this.persistenceKey,t),i=new vc(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return gc.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return dc.Vs(new hc(i),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return vc.Vs(r,e)},t.prototype.js=function(t){return mc.Vs(t)},t.prototype.ii=function(t){return(0,o.mG)(this,void 0,void 0,(function(){return(0,o.Jh)(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Rr("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.Fs.insert(t,e):this.Fs.remove(t),i=this.Gs(this.Fs),o=this.Gs(r),a=[],s=[];return o.forEach((function(t){i.has(t)||a.push(t)})),i.forEach((function(t){o.has(t)||s.push(t)})),this.syncEngine.hi(a,s).then((function(){n.Fs=r}))},t.prototype.Ws=function(t){this.Fs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=sa();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),wc=function(){function t(){this.li=new yc,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new yc,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),_c=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),Ic=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Rr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Rr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Tc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Ec=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),Sc=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return(0,o.ZT)(e,t),e.prototype.Fi=function(t,e,n,r){return new Promise((function(i,o){var a=new Ir;a.listenOnce(mr.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case gr.NO_ERROR:var e=a.getResponseJson();Rr("Connection","XHR received:",JSON.stringify(e)),i(e);break;case gr.TIMEOUT:Rr("Connection",'RPC "'+t+'" timed out'),o(new Ar(Sr.DEADLINE_EXCEEDED,"Request time out"));break;case gr.HTTP_ERROR:var n=a.getStatus();if(Rr("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var s=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Sr).indexOf(e)>=0?e:Sr.UNKNOWN}(r.status);o(new Ar(s,r.message))}else o(new Ar(Sr.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Ar(Sr.UNAVAILABLE,"Connection failed."));break;default:xr()}}finally{Rr("Connection",'RPC "'+t+'" completed.')}}));var s=JSON.stringify(r);a.send(e,"POST",s,n,15)}))},e.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=dr(),i=vr(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new wr({})),this.ki(o.initMessageHeaders,e),(0,a.uI)()||(0,a.b$)()||(0,a.d)()||(0,a.w1)()||(0,a.Mn)()||(0,a.ru)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");Rr("Connection","Creating WebChannel: "+s,o);var u=r.createWebChannel(s,o),c=!1,h=!1,l=new Ec({Ei:function(t){h?Rr("Connection","Not sending because WebChannel is closed:",t):(c||(Rr("Connection","Opening WebChannel transport."),u.open(),c=!0),Rr("Connection","WebChannel sending:",t),u.send(t))},Ti:function(){return u.close()}}),f=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return f(u,_r.EventType.OPEN,(function(){h||Rr("Connection","WebChannel transport opened.")})),f(u,_r.EventType.CLOSE,(function(){h||(h=!0,Rr("Connection","WebChannel transport closed"),l.Vi())})),f(u,_r.EventType.ERROR,(function(t){h||(h=!0,Cr("Connection","WebChannel transport errored:",t),l.Vi(new Ar(Sr.UNAVAILABLE,"The operation could not be completed")))})),f(u,_r.EventType.MESSAGE,(function(t){var e;if(!h){var n=t.data[0];Pr(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){Rr("Connection","WebChannel received error:",i);var o=i.status,a=function(t){var e=Vo[t];if(void 0!==e)return zo(e)}(o),s=i.message;void 0===a&&(a=Sr.INTERNAL,s="Unknown error status: "+o+" with message "+i.message),h=!0,l.Vi(new Ar(a,s)),u.close()}else Rr("Connection","WebChannel received:",n),l.Si(n)}})),f(i,yr.STAT_EVENT,(function(t){t.stat===br.PROXY?Rr("Connection","Detected buffering proxy"):t.stat===br.NOPROXY&&Rr("Connection","Detected no buffering proxy")})),setTimeout((function(){l.Pi()}),0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Rr("RestConnection","Sending: ",i,n);var o={};return this.ki(o,r),this.Fi(t,i,o,n).then((function(t){return Rr("RestConnection","Received: ",t),t}),(function(e){throw Cr("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.ki=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.10.1",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){var n=Tc[t];return this.Di+"/v1/"+e+":"+n},t}());function Ac(){return"undefined"!=typeof window?window:null}function kc(){return"undefined"!=typeof document?document:null}function Nc(t){return new ba(t,!0)}var Rc=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&Rr("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Ki=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),Dc=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Rc(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return(0,o.mG)(this,void 0,void 0,(function(){return(0,o.Jh)(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return(0,o.mG)(this,void 0,void 0,(function(){return(0,o.Jh)(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return(0,o.mG)(this,void 0,void 0,(function(){return(0,o.Jh)(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Sr.RESOURCE_EXHAUSTED?(Dr(e.toString()),Dr("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===Sr.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new Ar(Sr.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return(0,o.mG)(t,void 0,void 0,(function(){return(0,o.Jh)(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return Rr("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(Rr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Cc=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,a}return(0,o.ZT)(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:xr()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(Pr(void 0===e||"string"==typeof e),Zr.fromBase64String(e||"")):(Pr(void 0===e||e instanceof Uint8Array),Zr.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=(s=e.targetChange.cause)&&function(t){var e=void 0===t.code?Sr.UNKNOWN:zo(t.code);return new Ar(e,t.message||"")}(s);n=new fa(r,i,o,a||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=ka(t,r.document.name),o=Ta(r.document.updateTime);var s=new Ti({mapValue:{fields:r.document.fields}}),u=(a=Si.newFoundDocument(i,o,s),r.targetIds||[]),c=r.removedTargetIds||[];n=new ha(u,c,a.key,a)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=ka(t,r.document),o=r.readTime?Ta(r.readTime):Br.min(),s=Si.newNoDocument(i,o),a=r.removedTargetIds||[],n=new ha([],a,s.key,s);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=ka(t,r.document),o=r.removedTargetIds||[],n=new ha([],o,i,null);else{if(!("filter"in e))return xr();e.filter;var h=e.filter;h.targetId,r=h.count||0,i=new Ko(r),o=h.targetId,n=new la(o,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return Br.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Br.min():e.readTime?Ta(e.readTime):Br.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=Da(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=Di(r)?{documents:Ma(t,r)}:{query:Ua(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=_a(t,e.resumeToken):e.snapshotVersion.compareTo(Br.min())>0&&(n.readTime=wa(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return xr()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=Da(this.R),e.removeTarget=t,this.cr(e)},e}(Dc),Oc=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,a.gr=!1,a}return(0,o.ZT)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(Pr(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(Pr(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?Ta(t.updateTime):Ta(e);return n.isEqual(Br.min())&&(n=Ta(e)),new Ao(n,t.transformResults||[])}(t,e)}))):[]}(t.writeResults,t.commitTime),n=Ta(t.commitTime);return this.listener.Tr(n,e)}return Pr(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Da(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Pa(e.R,t)}))};this.cr(n)},e}(Dc),xc=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return(0,o.ZT)(e,t),e.prototype.br=function(){if(this.Rr)throw new Ar(Sr.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===Sr.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Ar(Sr.UNKNOWN,t.toString())}))},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===Sr.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Ar(Sr.UNKNOWN,t.toString())}))},e.prototype.terminate=function(){this.Rr=!0},e}((function(){})),Pc=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.kr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Dr(e),this.Vr=!1):Rr("OnlineStateTracker",e)},t.prototype.kr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),Lc=function(t,e,n,r,i){var a=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(t){n.enqueueAndForget((function(){return(0,o.mG)(a,void 0,void 0,(function(){return(0,o.Jh)(this,(function(t){switch(t.label){case 0:return Kc(this)?(Rr("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return(0,o.mG)(this,void 0,void 0,(function(){var e;return(0,o.Jh)(this,(function(n){switch(n.label){case 0:return(e=Lr(t)).Or.add(4),[4,Uc(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,Mc(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new Pc(n,r)};function Mc(t){return(0,o.mG)(this,void 0,void 0,(function(){var e,n;return(0,o.Jh)(this,(function(r){switch(r.label){case 0:if(!Kc(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Uc(t){return(0,o.mG)(this,void 0,void 0,(function(){var e,n;return(0,o.Jh)(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Fc(t,e){var n=Lr(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),Gc(n)?Bc(n):oh(n).er()&&Vc(n,e))}function jc(t,e){var n=Lr(t),r=oh(n);n.$r.delete(e),r.er()&&qc(n,e),0===n.$r.size&&(r.er()?r.ir():Kc(n)&&n.Br.set("Unknown"))}function Vc(t,e){t.qr.U(e.targetId),oh(t).mr(e)}function qc(t,e){t.qr.U(e),oh(t).yr(e)}function Bc(t){t.qr=new da({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),oh(t).start(),t.Br.Sr()}function Gc(t){return Kc(t)&&!oh(t).tr()&&t.$r.size>0}function Kc(t){return 0===Lr(t).Or.size}function Hc(t){t.qr=void 0}function zc(t){return(0,o.mG)(this,void 0,void 0,(function(){return(0,o.Jh)(this,(function(e){return t.$r.forEach((function(e,n){Vc(t,e)})),[2]}))}))}function Wc(t,e){return(0,o.mG)(this,void 0,void 0,(function(){return(0,o.Jh)(this,(function(n){return Hc(t),Gc(t)?(t.Br.Nr(e),Bc(t)):t.Br.set("Unknown"),[2]}))}))}function Jc(t,e,n){return(0,o.mG)(this,void 0,void 0,(function(){var r,i,a;return(0,o.Jh)(this,(function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof fa&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return(0,o.mG)(this,void 0,void 0,(function(){var n,r,i,a;return(0,o.Jh)(this,(function(o){switch(o.label){case 0:n=e.cause,r=0,i=e.targetIds,o.label=1;case 1:return r<i.length?(a=i[r],t.$r.has(a)?[4,t.remoteSyncer.rejectListen(a,n)]:[3,3]):[3,5];case 2:o.sent(),t.$r.delete(a),t.qr.removeTarget(a),o.label=3;case 3:o.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Rr("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Xc(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof ha?t.qr.X(e):e instanceof la?t.qr.rt(e):t.qr.et(e),n.isEqual(Br.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Bu(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(Zr.EMPTY_BYTE_STRING,n.snapshotVersion)),qc(t,e);var r=new Ps(n.target,e,1,n.sequenceNumber);Vc(t,r)}})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Rr("RemoteStore","Failed to raise snapshot:",a=s.sent()),[4,Xc(t,a)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function Xc(t,e,n){return(0,o.mG)(this,void 0,void 0,(function(){var r=this;return(0,o.Jh)(this,(function(i){switch(i.label){case 0:if(!Ss(e))throw e;return t.Or.add(1),[4,Uc(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return Bu(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return(0,o.mG)(r,void 0,void 0,(function(){return(0,o.Jh)(this,(function(e){switch(e.label){case 0:return Rr("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,Mc(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function Qc(t,e){return e().catch((function(n){return Xc(t,n,e)}))}function Zc(t){return(0,o.mG)(this,void 0,void 0,(function(){var e,n,r,i,a;return(0,o.Jh)(this,(function(o){switch(o.label){case 0:e=Lr(t),n=ah(e),r=e.Fr.length>0?e.Fr[e.Fr.length-1].batchId:-1,o.label=1;case 1:if(!function(t){return Kc(t)&&t.Fr.length<10}(e))return[3,7];o.label=2;case 2:return o.trys.push([2,4,,6]),[4,Hu(e.localStore,r)];case 3:return null===(i=o.sent())?(0===e.Fr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.Fr.push(e);var n=ah(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return a=o.sent(),[4,Xc(e,a)];case 5:return o.sent(),[3,6];case 6:return[3,1];case 7:return Yc(e)&&$c(e),[2]}}))}))}function Yc(t){return Kc(t)&&!ah(t).tr()&&t.Fr.length>0}function $c(t){ah(t).start()}function th(t){return(0,o.mG)(this,void 0,void 0,(function(){return(0,o.Jh)(this,(function(e){return ah(t).Ar(),[2]}))}))}function eh(t){return(0,o.mG)(this,void 0,void 0,(function(){var e,n,r,i;return(0,o.Jh)(this,(function(o){for(e=ah(t),n=0,r=t.Fr;n<r.length;n++)i=r[n],e.Er(i.mutations);return[2]}))}))}function nh(t,e,n){return(0,o.mG)(this,void 0,void 0,(function(){var r,i;return(0,o.Jh)(this,(function(o){switch(o.label){case 0:return r=t.Fr.shift(),i=xs.from(r,e,n),[4,Qc(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,Zc(t)];case 2:return o.sent(),[2]}}))}))}function rh(t,e){return(0,o.mG)(this,void 0,void 0,(function(){return(0,o.Jh)(this,(function(n){switch(n.label){case 0:return e&&ah(t).pr?[4,function(t,e){return(0,o.mG)(this,void 0,void 0,(function(){var n,r;return(0,o.Jh)(this,(function(i){switch(i.label){case 0:return Ho(r=e.code)&&r!==Sr.ABORTED?(n=t.Fr.shift(),ah(t).sr(),[4,Qc(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,Zc(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Yc(t)&&$c(t),[2]}}))}))}function ih(t,e){return(0,o.mG)(this,void 0,void 0,(function(){var n;return(0,o.Jh)(this,(function(r){switch(r.label){case 0:return n=Lr(t),e?(n.Or.delete(2),[4,Mc(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,Uc(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function oh(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=Lr(t);return r.br(),new Cc(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:zc.bind(null,t),Ri:Wc.bind(null,t),_r:Jc.bind(null,t)}),t.Mr.push((function(n){return(0,o.mG)(e,void 0,void 0,(function(){return(0,o.Jh)(this,(function(e){switch(e.label){case 0:return n?(t.Ur.sr(),Gc(t)?Bc(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),Hc(t),e.label=3;case 3:return[2]}}))}))}))),t.Ur}function ah(t){var e=this;return t.Kr||(t.Kr=function(t,e,n){var r=Lr(t);return r.br(),new Oc(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:th.bind(null,t),Ri:rh.bind(null,t),Ir:eh.bind(null,t),Tr:nh.bind(null,t)}),t.Mr.push((function(n){return(0,o.mG)(e,void 0,void 0,(function(){return(0,o.Jh)(this,(function(e){switch(e.label){case 0:return n?(t.Kr.sr(),[4,Zc(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:e.sent(),t.Fr.length>0&&(Rr("RemoteStore","Stopping write stream with "+t.Fr.length+" pending writes"),t.Fr=[]),e.label=4;case 4:return[2]}}))}))}))),t.Kr}var sh=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new bs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ar(Sr.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function uh(t,e){if(Dr("AsyncQueue",e+": "+t),Ss(t))return new Ar(Sr.UNAVAILABLE,e+": "+t);throw t}var ch=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||ui.comparator(e.key,n.key)}:function(t,e){return ui.comparator(t.key,e.key)},this.keyedMap=ea(),this.sortedSet=new Wo(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),hh=function(){function t(){this.Qr=new Wo(ui.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):xr():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),lh=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,ch.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ro(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),fh=function(){this.Wr=void 0,this.listeners=[]},ph=function(){this.queries=new wu((function(t){return io(t)}),ro),this.onlineState="Unknown",this.Gr=new Set};function dh(t,e){return(0,o.mG)(this,void 0,void 0,(function(){var n,r,i,a,s,u,c;return(0,o.Jh)(this,(function(o){switch(o.label){case 0:if(n=Lr(t),r=e.query,i=!1,(a=n.queries.get(r))||(i=!0,a=new fh),!i)return[3,4];o.label=1;case 1:return o.trys.push([1,3,,4]),s=a,[4,n.onListen(r)];case 2:return s.Wr=o.sent(),[3,4];case 3:return u=o.sent(),c=uh(u,"Initialization of query '"+oo(e.query)+"' failed"),[2,void e.onError(c)];case 4:return n.queries.set(r,a),a.listeners.push(e),e.zr(n.onlineState),a.Wr&&e.Hr(a.Wr)&&yh(n),[2]}}))}))}function vh(t,e){return(0,o.mG)(this,void 0,void 0,(function(){var n,r,i,a,s;return(0,o.Jh)(this,(function(o){return n=Lr(t),r=e.query,i=!1,(a=n.queries.get(r))&&(s=a.listeners.indexOf(e))>=0&&(a.listeners.splice(s,1),i=0===a.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function gh(t,e){for(var n=Lr(t),r=!1,i=0,o=e;i<o.length;i++){var a=o[i],s=a.query,u=n.queries.get(s);if(u){for(var c=0,h=u.listeners;c<h.length;c++)h[c].Hr(a)&&(r=!0);u.Wr=a}}r&&yh(n)}function mh(t,e,n){var r=Lr(t),i=r.queries.get(e);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.queries.delete(e)}function yh(t){t.Gr.forEach((function(t){t.next()}))}var bh=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new lh(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=lh.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),wh=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),_h=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return ka(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?xa(this.R,t.document,!1):Si.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},t.prototype.Kn=function(t){return Ta(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=Ih(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new _h(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var a=n.qn(o.metadata.name),s=0,u=o.metadata.queries;s<u.length;s++){var c=u[s],h=(e.get(c)||oa()).add(a);e.set(c,h)}}return e},t.prototype.complete=function(){return(0,o.mG)(this,void 0,void 0,(function(){var t,e,n,r,i;return(0,o.Jh)(this,(function(o){switch(o.label){case 0:return[4,Yu(this.localStore,new _h(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,$u(this.localStore,i,e.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Pu(Object.assign({},this.progress),t))]}}))}))}}();function Ih(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var Th=function(t){this.key=t},Eh=function(t){this.key=t},Sh=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=oa(),this.mutatedKeys=oa(),this.lo=so(t),this.fo=new ch(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new hh,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=Xi(this.query)&&i.size===this.query.limit?i.last():null,c=Qi(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var h=i.get(t),l=ao(n.query,e)?e:null,f=!!h&&n.mutatedKeys.has(h.key),p=!!l&&(l.hasLocalMutations||n.mutatedKeys.has(l.key)&&l.hasCommittedMutations),d=!1;h&&l?h.data.isEqual(l.data)?f!==p&&(r.track({type:3,doc:l}),d=!0):n.yo(h,l)||(r.track({type:2,doc:l}),d=!0,(u&&n.lo(l,u)>0||c&&n.lo(l,c)<0)&&(s=!0)):!h&&l?(r.track({type:0,doc:l}),d=!0):h&&!l&&(r.track({type:1,doc:h}),d=!0,(u||c)&&(s=!0)),d&&(l?(a=a.add(l),o=p?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))})),Xi(this.query)||Qi(this.query))for(;a.size>this.query.limit;){var h=Xi(this.query)?a.last():a.first();a=a.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{fo:a,mo:r,Nn:s,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xr()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)})),this.po(n);var a=e?this.Eo():[],s=0===this.ho.size&&this.current?1:0,u=s!==this.ao;return this.ao=s,0!==o.length||u?{snapshot:new lh(this.query,t.fo,i,o,t.mutatedKeys,0===s,u,!1),To:a}:{To:a}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new hh,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=oa(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new Eh(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new Th(t))})),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=oa();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return lh.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),Ah=function(t,e,n){this.query=t,this.targetId=e,this.view=n},kh=function(t){this.key=t,this.bo=!1},Nh=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new wu((function(t){return io(t)}),ro),this.Vo=new Map,this.So=new Set,this.Do=new Wo(ui.comparator),this.Co=new Map,this.No=new ec,this.xo={},this.ko=new Map,this.Fo=uu.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function Rh(t,e){return(0,o.mG)(this,void 0,void 0,(function(){var n,r,i,a,s,u;return(0,o.Jh)(this,(function(o){switch(o.label){case 0:return n=il(t),(a=n.Po.get(e))?(r=a.targetId,n.sharedClientState.addLocalQueryTarget(r),i=a.view.Ro(),[3,4]):[3,1];case 1:return[4,zu(n.localStore,eo(e))];case 2:return s=o.sent(),u=n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.targetId,[4,Dh(n,e,r,"current"===u)];case 3:i=o.sent(),n.isPrimaryClient&&Fc(n.remoteStore,s),o.label=4;case 4:return[2,i]}}))}))}function Dh(t,e,n,r){return(0,o.mG)(this,void 0,void 0,(function(){var i,a,s,u,c,h;return(0,o.Jh)(this,(function(l){switch(l.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return(0,o.mG)(this,void 0,void 0,(function(){var i,a,s;return(0,o.Jh)(this,(function(o){switch(o.label){case 0:return(i=e.view._o(n)).Nn?[4,Ju(t.localStore,e.query,!1).then((function(t){var n=t.documents;return e.view._o(n,i)}))]:[3,2];case 1:i=o.sent(),o.label=2;case 2:return a=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,a),[2,(Gh(t,e.targetId,s.To),s.snapshot)]}}))}))}(t,e,n,r)},[4,Ju(t.localStore,e,!0)];case 1:return i=l.sent(),a=new Sh(e,i.Bn),s=a._o(i.documents),u=ca.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),c=a.applyChanges(s,t.isPrimaryClient,u),Gh(t,n,c.To),h=new Ah(e,n,a),[2,(t.Po.set(e,h),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),c.snapshot)]}}))}))}function Ch(t,e){return(0,o.mG)(this,void 0,void 0,(function(){var n,r,i;return(0,o.Jh)(this,(function(o){switch(o.label){case 0:return n=Lr(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(t){return!ro(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Wu(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),jc(n.remoteStore,r.targetId),qh(n,r.targetId)})).catch(pu)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return qh(n,r.targetId),[4,Wu(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function Oh(t,e,n){return(0,o.mG)(this,void 0,void 0,(function(){var r,i,a,s;return(0,o.Jh)(this,(function(o){switch(o.label){case 0:r=ol(t),o.label=1;case 1:return o.trys.push([1,5,,6]),[4,function(t,e){var n,r=Lr(t),i=qr.now(),o=e.reduce((function(t,e){return t.add(e.key)}),oa());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Mn.pn(t,o).next((function(o){n=o;for(var a=[],s=0,u=e;s<u.length;s++){var c=u[s],h=Oo(c,n.get(c.key));null!=h&&a.push(new Mo(c.key,h,Ei(h.value.mapValue),ko.exists(!0)))}return r._n.addMutationBatch(t,i,a,e)}))})).then((function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}}))}(r.localStore,e)];case 2:return i=o.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Wo(Fr)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,zh(r,i.changes)];case 3:return o.sent(),[4,Zc(r.remoteStore)];case 4:return o.sent(),[3,6];case 5:return a=o.sent(),s=uh(a,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function xh(t,e){return(0,o.mG)(this,void 0,void 0,(function(){var n,r;return(0,o.Jh)(this,(function(i){switch(i.label){case 0:n=Lr(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Gu(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(Pr(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?Pr(r.bo):t.removedDocuments.size>0&&(Pr(r.bo),r.bo=!1))})),[4,zh(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,pu(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Ph(t,e,n){var r=Lr(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=Lr(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&yh(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Lh(t,e,n){return(0,o.mG)(this,void 0,void 0,(function(){var r,i,a,s,u,c;return(0,o.Jh)(this,(function(o){switch(o.label){case 0:return(r=Lr(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(a=i&&i.key)?(s=(s=new Wo(ui.comparator)).insert(a,Si.newNoDocument(a,Br.min())),u=oa().add(a),c=new ua(Br.min(),new Map,new Qo(Fr),s,u),[4,xh(r,c)]):[3,2];case 1:return o.sent(),r.Do=r.Do.remove(a),r.Co.delete(e),Hh(r),[3,4];case 2:return[4,Wu(r.localStore,e,!1).then((function(){return qh(r,e,n)})).catch(pu)];case 3:o.sent(),o.label=4;case 4:return[2]}}))}))}function Mh(t,e){return(0,o.mG)(this,void 0,void 0,(function(){var n,r,i;return(0,o.Jh)(this,(function(o){switch(o.label){case 0:n=Lr(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,qu(n.localStore,e)];case 2:return i=o.sent(),Vh(n,r,null),jh(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,zh(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,pu(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Uh(t,e,n){return(0,o.mG)(this,void 0,void 0,(function(){var r,i;return(0,o.Jh)(this,(function(o){switch(o.label){case 0:r=Lr(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Lr(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n._n.lookupMutationBatch(t,e).next((function(e){return Pr(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}(r.localStore,e)];case 2:return i=o.sent(),Vh(r,e,n),jh(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,zh(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,pu(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Fh(t,e){return(0,o.mG)(this,void 0,void 0,(function(){var n,r,i,a,s;return(0,o.Jh)(this,(function(o){switch(o.label){case 0:Kc((n=Lr(t)).remoteStore)||Rr("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,function(t){var e=Lr(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e._n.getHighestUnacknowledgedBatchId(t)}))}(n.localStore)];case 2:return-1===(r=o.sent())?[2,void e.resolve()]:((i=n.ko.get(r)||[]).push(e),n.ko.set(r,i),[3,4]);case 3:return a=o.sent(),s=uh(a,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}function jh(t,e){(t.ko.get(e)||[]).forEach((function(t){t.resolve()})),t.ko.delete(e)}function Vh(t,e,n){var r=Lr(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function qh(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||Bh(t,e)}))}function Bh(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(jc(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Hh(t))}function Gh(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Th?(t.No.addReference(o.key,e),Kh(t,o)):o instanceof Eh?(Rr("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||Bh(t,o.key)):xr()}}function Kh(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Rr("SyncEngine","New document in limbo: "+n),t.So.add(r),Hh(t))}function Hh(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new ui(Wr.fromString(e)),r=t.Fo.next();t.Co.set(r,new kh(n)),t.Do=t.Do.insert(n,r),Fc(t.remoteStore,new Ps(eo(Ji(n.path)),r,2,Er.o))}}function zh(t,e,n){return(0,o.mG)(this,void 0,void 0,(function(){var r,i,a,s;return(0,o.Jh)(this,(function(u){switch(u.label){case 0:return r=Lr(t),i=[],a=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,o){s.push(r.Oo(o,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(o.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Mu.Pn(o.targetId,t);a.push(e)}})))})),[4,Promise.all(s)]);case 1:return u.sent(),r.vo._r(i),[4,function(t,e){return(0,o.mG)(this,void 0,void 0,(function(){var n,r,i,a,s,u,c,h,l;return(0,o.Jh)(this,(function(o){switch(o.label){case 0:n=Lr(t),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return ws.forEach(e,(function(e){return ws.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return ws.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return o.sent(),[3,4];case 3:if(!Ss(r=o.sent()))throw r;return Rr("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,a=e;i<a.length;i++)s=a[i],u=s.targetId,s.fromCache||(c=n.kn.get(u),h=c.snapshotVersion,l=c.withLastLimboFreeSnapshotVersion(h),n.kn=n.kn.insert(u,l));return[2]}}))}))}(r.localStore,a)];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))}function Wh(t,e){return(0,o.mG)(this,void 0,void 0,(function(){var n,r;return(0,o.Jh)(this,(function(i){switch(i.label){case 0:return(n=Lr(t)).currentUser.isEqual(e)?[3,3]:(Rr("SyncEngine","User change. New user:",e.toKey()),[4,Vu(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.ko.forEach((function(t){t.forEach((function(t){t.reject(new Ar(Sr.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.ko.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,zh(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function Jh(t,e){var n=Lr(t),r=n.Co.get(e);if(r&&r.bo)return oa().add(r.key);var i=oa(),o=n.Vo.get(e);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var u=s[a],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function Xh(t,e){return(0,o.mG)(this,void 0,void 0,(function(){var n,r,i;return(0,o.Jh)(this,(function(o){switch(o.label){case 0:return[4,Ju((n=Lr(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&Gh(n,e.targetId,i.To),i)]}}))}))}function Qh(t){return(0,o.mG)(this,void 0,void 0,(function(){var e;return(0,o.Jh)(this,(function(n){return[2,Qu((e=Lr(t)).localStore).then((function(t){return zh(e,t)}))]}))}))}function Zh(t,e,n,r){return(0,o.mG)(this,void 0,void 0,(function(){var i,a;return(0,o.Jh)(this,(function(o){switch(o.label){case 0:return[4,function(t,e){var n=Lr(t),r=Lr(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.jt(t,e).next((function(e){return e?n.Mn.pn(t,e):ws.resolve(null)}))}))}((i=Lr(t)).localStore,e)];case 1:return null===(a=o.sent())?[3,6]:"pending"!==n?[3,3]:[4,Zc(i.remoteStore)];case 2:return o.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Vh(i,e,r||null),jh(i,e),function(t,e){Lr(Lr(t)._n).Gt(e)}(i.localStore,e)):xr(),o.label=4;case 4:return[4,zh(i,a)];case 5:return o.sent(),[3,7];case 6:Rr("SyncEngine","Cannot apply mutation batch with id: "+e),o.label=7;case 7:return[2]}}))}))}function Yh(t,e){return(0,o.mG)(this,void 0,void 0,(function(){var n,r,i,a,s,u,c,h;return(0,o.Jh)(this,(function(o){switch(o.label){case 0:return il(n=Lr(t)),ol(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,$h(n,r.toArray())]);case 1:return i=o.sent(),n.$o=!0,[4,ih(n.remoteStore,!0)];case 2:for(o.sent(),a=0,s=i;a<s.length;a++)u=s[a],Fc(n.remoteStore,u);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(c=[],h=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?c.push(e):h=h.then((function(){return qh(n,e),Wu(n.localStore,e,!0)})),jc(n.remoteStore,e)})),[4,h]);case 4:return o.sent(),[4,$h(n,c)];case 5:return o.sent(),function(t){var e=Lr(t);e.Co.forEach((function(t,n){jc(e.remoteStore,n)})),e.No.ts(),e.Co=new Map,e.Do=new Wo(ui.comparator)}(n),n.$o=!1,[4,ih(n.remoteStore,!1)];case 6:o.sent(),o.label=7;case 7:return[2]}}))}))}function $h(t,e,n){return(0,o.mG)(this,void 0,void 0,(function(){var n,r,i,a,s,u,c,h,l,f,p,d,v,g;return(0,o.Jh)(this,(function(o){switch(o.label){case 0:n=Lr(t),r=[],i=[],a=0,s=e,o.label=1;case 1:return a<s.length?(u=s[a],c=void 0,(h=n.Vo.get(u))&&0!==h.length?[4,zu(n.localStore,eo(h[0]))]:[3,7]):[3,13];case 2:c=o.sent(),l=0,f=h,o.label=3;case 3:return l<f.length?(p=f[l],d=n.Po.get(p),[4,Xh(n,d)]):[3,6];case 4:(v=o.sent()).snapshot&&i.push(v.snapshot),o.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,Xu(n.localStore,u)];case 8:return g=o.sent(),[4,zu(n.localStore,g)];case 9:return c=o.sent(),[4,Dh(n,tl(g),u,!1)];case 10:o.sent(),o.label=11;case 11:r.push(c),o.label=12;case 12:return a++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function tl(t){return Wi(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function el(t){var e=Lr(t);return Lr(Lr(e.localStore).persistence).fn()}function nl(t,e,n,r){return(0,o.mG)(this,void 0,void 0,(function(){var i,a,s;return(0,o.Jh)(this,(function(o){switch(o.label){case 0:return(i=Lr(t)).$o?(Rr("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Qu(i.localStore)];case 3:return a=o.sent(),s=ua.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,zh(i,a,s)];case 4:return o.sent(),[3,8];case 5:return[4,Wu(i.localStore,e,!0)];case 6:return o.sent(),qh(i,e,r),[3,8];case 7:xr(),o.label=8;case 8:return[2]}}))}))}function rl(t,e,n){return(0,o.mG)(this,void 0,void 0,(function(){var r,i,a,s,u,c,h,l,f,p;return(0,o.Jh)(this,(function(d){switch(d.label){case 0:if(!(r=il(t)).$o)return[3,10];i=0,a=e,d.label=1;case 1:return i<a.length?(s=a[i],r.Vo.has(s)?(Rr("SyncEngine","Adding an already active target "+s),[3,5]):[4,Xu(r.localStore,s)]):[3,6];case 2:return u=d.sent(),[4,zu(r.localStore,u)];case 3:return c=d.sent(),[4,Dh(r,tl(u),c.targetId,!1)];case 4:d.sent(),Fc(r.remoteStore,c),d.label=5;case 5:return i++,[3,1];case 6:h=function(t){return(0,o.Jh)(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,Wu(r.localStore,t,!1).then((function(){jc(r.remoteStore,t),qh(r,t)})).catch(pu)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},l=0,f=n,d.label=7;case 7:return l<f.length?(p=f[l],[5,h(p)]):[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))}function il(t){var e=Lr(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=xh.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Jh.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Lh.bind(null,e),e.vo._r=gh.bind(null,e.eventManager),e.vo.Mo=mh.bind(null,e.eventManager),e}function ol(t){var e=Lr(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Mh.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Uh.bind(null,e),e}var al=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return(0,o.mG)(this,void 0,void 0,(function(){return(0,o.Jh)(this,(function(e){switch(e.label){case 0:return this.R=Nc(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return ju(this.persistence,new Uu,t.initialUser,this.R)},t.prototype.qo=function(t){return new sc(cc.bs,this.R)},t.prototype.Bo=function(t){return new wc},t.prototype.terminate=function(){return(0,o.mG)(this,void 0,void 0,(function(){return(0,o.Jh)(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),sl=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return(0,o.ZT)(e,t),e.prototype.initialize=function(e){return(0,o.mG)(this,void 0,void 0,(function(){var n=this;return(0,o.Jh)(this,(function(r){switch(r.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return r.sent(),[4,Zu(this.localStore)];case 2:return r.sent(),[4,this.Qo.initialize(this,e)];case 3:return r.sent(),[4,ol(this.Qo.syncEngine)];case 4:return r.sent(),[4,Zc(this.Qo.remoteStore)];case 5:return r.sent(),[4,this.persistence.He((function(){return n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(n.localStore),Promise.resolve()}))];case 6:return r.sent(),[2]}}))}))},e.prototype.Ko=function(t){return ju(this.persistence,new Uu,t.initialUser,this.R)},e.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new gu(e,t.asyncQueue)},e.prototype.qo=function(t){var e=xu(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?tu.withCacheSize(this.cacheSizeBytes):tu.DEFAULT;return new Du(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Ac(),kc(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new wc},e}(al),ul=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return(0,o.ZT)(e,t),e.prototype.initialize=function(e){return(0,o.mG)(this,void 0,void 0,(function(){var n,r=this;return(0,o.Jh)(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof bc?(this.sharedClientState.syncEngine={ui:Zh.bind(null,n),ai:nl.bind(null,n),hi:rl.bind(null,n),fn:el.bind(null,n),ci:Qh.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(t){return(0,o.mG)(r,void 0,void 0,(function(){return(0,o.Jh)(this,(function(e){switch(e.label){case 0:return[4,Yh(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=Ac();if(!bc.yt(e))throw new Ar(Sr.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=xu(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new bc(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(sl),cl=function(){function t(){}return t.prototype.initialize=function(t,e){return(0,o.mG)(this,void 0,void 0,(function(){var n=this;return(0,o.Jh)(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Ph(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Wh.bind(null,this.syncEngine),[4,ih(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new ph},t.prototype.createDatastore=function(t){var e,n=Nc(t.databaseInfo.databaseId),r=(e=t.databaseInfo,new Sc(e));return function(t,e,n){return new xc(t,e,n)}(t.credentials,r,n)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,a=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Ph(a.syncEngine,t,0)},o=Ic.yt()?new Ic:new _c,new Lc(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,a){var s=new Nh(t,e,n,r,i,o);return a&&(s.$o=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return(0,o.mG)(this,void 0,void 0,(function(){var e;return(0,o.Jh)(this,(function(n){switch(n.label){case 0:return e=Lr(t),Rr("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,Uc(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}();var hl=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),ll=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new bs,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return(0,o.mG)(this,void 0,void 0,(function(){return(0,o.Jh)(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Lo=function(){return(0,o.mG)(this,void 0,void 0,(function(){return(0,o.Jh)(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}}))}))},t.prototype.Ho=function(){return(0,o.mG)(this,void 0,void 0,(function(){var t,e,n,r;return(0,o.Jh)(this,(function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new wh(JSON.parse(r),t.length+n)]}}))}))},t.prototype.Zo=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.Jo=function(){return(0,o.mG)(this,void 0,void 0,(function(){var t,e;return(0,o.Jh)(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.Xo=function(t){return(0,o.mG)(this,void 0,void 0,(function(){var e;return(0,o.Jh)(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return(0,o.mG)(this,void 0,void 0,(function(){var t,e;return(0,o.Jh)(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return(0,o.mG)(this,void 0,void 0,(function(){var e,n=this;return(0,o.Jh)(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Ar(Sr.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return(0,o.mG)(this,void 0,void 0,(function(){var n,r,i,a,s,u;return(0,o.Jh)(this,(function(o){switch(o.label){case 0:return n=Lr(t),r=Da(n.R)+"/documents",i={documents:e.map((function(t){return Aa(n.R,t)}))},[4,n.$i("BatchGetDocuments",r,i)];case 1:return a=o.sent(),s=new Map,a.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){Pr(!!e.found),e.found.name,e.found.updateTime;var n=ka(t,e.found.name),r=Ta(e.found.updateTime),i=new Ti({mapValue:{fields:e.found.fields}});return Si.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){Pr(!!e.missing),Pr(!!e.readTime);var n=ka(t,e.missing),r=Ta(e.readTime);return Si.newNoDocument(n,r)}(t,e):xr()}(n.R,t);s.set(e.key.toString(),e)})),u=[],[2,(e.forEach((function(t){var e=s.get(t.toString());Pr(!!e),u.push(e)})),u)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Bo(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return(0,o.mG)(this,void 0,void 0,(function(){var t,e=this;return(0,o.Jh)(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=ui.fromPath(n);e.mutations.push(new Go(r,e.precondition(r)))})),[4,function(t,e){return(0,o.mG)(this,void 0,void 0,(function(){var n,r,i;return(0,o.Jh)(this,(function(o){switch(o.label){case 0:return n=Lr(t),r=Da(n.R)+"/documents",i={writes:e.map((function(t){return Pa(n.R,t)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw xr();e=Br.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Ar(Sr.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?ko.updateTime(e):ko.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Br.min()))throw new Ar(Sr.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ko.updateTime(e)}return ko.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),fl=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Rc(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return(0,o.mG)(t,void 0,void 0,(function(){var t,e,n=this;return(0,o.Jh)(this,(function(r){return t=new ll(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!oi(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Ho(e)}return!1},t}(),pl=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=hc.UNAUTHENTICATED,this.clientId=Ur.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,(function(t){return(0,o.mG)(r,void 0,void 0,(function(){return(0,o.Jh)(this,(function(e){switch(e.label){case 0:return Rr("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}}))}))}))}return t.prototype.getConfiguration=function(){return(0,o.mG)(this,void 0,void 0,(function(){return(0,o.Jh)(this,(function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Ar(Sr.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new bs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return(0,o.mG)(t,void 0,void 0,(function(){var t,n;return(0,o.Jh)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=uh(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();function dl(t,e){return(0,o.mG)(this,void 0,void 0,(function(){var n,r,i=this;return(0,o.Jh)(this,(function(a){switch(a.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Rr("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=a.sent(),[4,e.initialize(n)];case 2:return a.sent(),r=n.initialUser,t.setCredentialChangeListener((function(t){return(0,o.mG)(i,void 0,void 0,(function(){return(0,o.Jh)(this,(function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,Vu(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}}))}))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function vl(t,e){return(0,o.mG)(this,void 0,void 0,(function(){var n,r;return(0,o.Jh)(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,gl(t)];case 1:return n=i.sent(),Rr("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(t){return function(t,e){return(0,o.mG)(this,void 0,void 0,(function(){var n,r;return(0,o.Jh)(this,(function(i){switch(i.label){case 0:return(n=Lr(t)).asyncQueue.verifyOperationInProgress(),Rr("RemoteStore","RemoteStore received new credentials"),r=Kc(n),n.Or.add(3),[4,Uc(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,Mc(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,t)})),t.onlineComponents=e,[2]}}))}))}function gl(t){return(0,o.mG)(this,void 0,void 0,(function(){return(0,o.Jh)(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Rr("FirestoreClient","Using default OfflineComponentProvider"),[4,dl(t,new al)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function ml(t){return(0,o.mG)(this,void 0,void 0,(function(){return(0,o.Jh)(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Rr("FirestoreClient","Using default OnlineComponentProvider"),[4,vl(t,new cl)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function yl(t){return gl(t).then((function(t){return t.persistence}))}function bl(t){return gl(t).then((function(t){return t.localStore}))}function wl(t){return ml(t).then((function(t){return t.remoteStore}))}function _l(t){return ml(t).then((function(t){return t.syncEngine}))}function Il(t){return(0,o.mG)(this,void 0,void 0,(function(){var e,n;return(0,o.Jh)(this,(function(r){switch(r.label){case 0:return[4,ml(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Rh.bind(null,e.syncEngine),n.onUnlisten=Ch.bind(null,e.syncEngine),n)]}}))}))}function Tl(t,e,n){var r=this;void 0===n&&(n={});var i=new bs;return t.asyncQueue.enqueueAndForget((function(){return(0,o.mG)(r,void 0,void 0,(function(){var r;return(0,o.Jh)(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new hl({next:function(o){e.enqueueAndForget((function(){return vh(t,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new Ar(Sr.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new Ar(Sr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),a=new bh(Ji(n.path),o,{includeMetadataChanges:!0,so:!0});return dh(t,a)},[4,Il(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function El(t,e,n){var r=this;void 0===n&&(n={});var i=new bs;return t.asyncQueue.enqueueAndForget((function(){return(0,o.mG)(r,void 0,void 0,(function(){var r;return(0,o.Jh)(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new hl({next:function(n){e.enqueueAndForget((function(){return vh(t,a)})),n.fromCache&&"server"===r.source?i.reject(new Ar(Sr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),a=new bh(n,o,{includeMetadataChanges:!0,so:!0});return dh(t,a)},[4,Il(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}var Sl=function(t,e,n,r,i,o,a,s){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=s},Al=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),kl=new Map,Nl=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Rl=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable((function(){return e(hc.UNAUTHENTICATED)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Dl=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable((function(){return e(n.token.user)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Cl=function(){function t(t){var e=this;this.currentUser=hc.UNAUTHENTICATED,this.oc=new bs,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)}))};var n=function(t){Rr("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit((function(t){return n(t)})),setTimeout((function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(Rr("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}}),0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(Rr("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Pr("string"==typeof n.accessToken),new Nl(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable((function(){return(0,o.mG)(n,void 0,void 0,(function(){return(0,o.Jh)(this,(function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}}))}))}))},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return Pr(null===t||"string"==typeof t),new hc(t)},t}(),Ol=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=hc.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),xl=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new Ol(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable((function(){return e(hc.FIRST_PARTY)}))},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Pl(t,e,n){if(!n)throw new Ar(Sr.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Ll(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ar(Sr.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Ml(t,e,n,r){if(!0===e&&!0===r)throw new Ar(Sr.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Ul(t){if(!ui.isDocumentKey(t))throw new Ar(Sr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Fl(t){if(ui.isDocumentKey(t))throw new Ar(Sr.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function jl(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":xr()}function Vl(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ar(Sr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=jl(t);throw new Ar(Sr.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function ql(t,e){if(e<=0)throw new Ar(Sr.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Bl=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Ar(Sr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ar(Sr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Ml("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),Gl=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Bl({}),this._settingsFrozen=!1,t instanceof Al?(this._databaseId=t,this._credentials=new Rl):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Ar(Sr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Al(t.options.projectId)}(t),this._credentials=new Cl(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Ar(Sr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Ar(Sr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Bl(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Rl;switch(t.type){case"gapi":var e=t.client;return Pr(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new xl(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ar(Sr.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return this,(t=kl.get(this))&&(Rr("ComponentProvider","Removing Datastore"),kl.delete(this),t.terminate()),Promise.resolve();var t},t}(),Kl=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new zl(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Hl=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),zl=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Ji(r))||this)._path=r,i.type="collection",i}return(0,o.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Kl(this.firestore,null,new ui(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Hl);function Wl(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,a.m9)(t),Pl("collection","path",e),t instanceof Gl)return Fl(n=Wr.fromString.apply(Wr,(0,o.ev)([e],r))),new zl(t,null,n);if(!(t instanceof Kl||t instanceof zl))throw new Ar(Sr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Fl(n=Wr.fromString.apply(Wr,(0,o.ev)([t.path],r)).child(Wr.fromString(e))),new zl(t.firestore,null,n)}function Jl(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,a.m9)(t),1===arguments.length&&(e=Ur.u()),Pl("doc","path",e),t instanceof Gl)return Ul(n=Wr.fromString.apply(Wr,(0,o.ev)([e],r))),new Kl(t,null,new ui(n));if(!(t instanceof Kl||t instanceof zl))throw new Ar(Sr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Ul(n=t._path.child(Wr.fromString.apply(Wr,(0,o.ev)([e],r)))),new Kl(t.firestore,t instanceof zl?t.converter:null,new ui(n))}function Xl(t,e){return t=(0,a.m9)(t),e=(0,a.m9)(e),(t instanceof Kl||t instanceof zl)&&(e instanceof Kl||e instanceof zl)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Ql(t,e){return t=(0,a.m9)(t),e=(0,a.m9)(e),t instanceof Hl&&e instanceof Hl&&t.firestore===e.firestore&&ro(t._query,e._query)&&t.converter===e.converter}var Zl=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new Rc(this,"async_queue_retry"),this.Ic=function(){var e=kc();e&&Rr("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=kc();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},t.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var e=kc();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ic)}},t.prototype.enqueue=function(t){var e=this;if(this.Ac(),this._c)return new Promise((function(){}));var n=new bs;return this.Rc((function(){return e._c&&e.Ec?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.wc.push(t),e.bc()}))},t.prototype.bc=function(){return(0,o.mG)(this,void 0,void 0,(function(){var t,e=this;return(0,o.Jh)(this,(function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!Ss(t=n.sent()))throw t;return Rr("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji((function(){return e.bc()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Rc=function(t){var e=this,n=this.dc.then((function(){return e.gc=!0,t().catch((function(t){throw e.yc=t,e.gc=!1,Dr("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.gc=!1,t}))}));return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ac(),this.Tc.indexOf(t)>-1&&(e=0);var i=sh.createAndSchedule(this,t,e,n,(function(t){return r.vc(t)}));return this.mc.push(i),i},t.prototype.Ac=function(){this.yc&&xr()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Pc=function(){return(0,o.mG)(this,void 0,void 0,(function(){var t;return(0,o.Jh)(this,(function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Vc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Sc=function(t){var e=this;return this.Pc().then((function(){e.mc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Pc()}))},t.prototype.Dc=function(t){this.Tc.push(t)},t.prototype.vc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function Yl(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new bs,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var $l=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new Zl,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return(0,o.ZT)(e,t),e.prototype._terminate=function(){return this._firestoreClient||ef(this),this._firestoreClient.terminate()},e}(Gl);function tf(t){return t._firestoreClient||ef(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function ef(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new Sl(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new pl(t._credentials,t._queue,r)}function nf(t,e,n){var r=this,i=new bs;return t.asyncQueue.enqueue((function(){return(0,o.mG)(r,void 0,void 0,(function(){var r;return(0,o.Jh)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,dl(t,n)];case 1:return o.sent(),[4,vl(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Sr.FAILED_PRECONDITION||t.code===Sr.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function rf(t){if(t._initialized||t._terminated)throw new Ar(Sr.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var of=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Ar(Sr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xr(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),af=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(Zr.fromBase64String(e))}catch(e){throw new Ar(Sr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Zr.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),sf=function(t){this._methodName=t},uf=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ar(Sr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ar(Sr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Fr(this._lat,t._lat)||Fr(this._long,t._long)},t}(),cf=/^__.*__$/,hf=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Mo(t,this.data,this.fieldMask,e,this.fieldTransforms):new Lo(t,this.data,e,this.fieldTransforms)},t}(),lf=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new Mo(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function ff(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xr()}}var pf=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),t.prototype.xc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,Fc:!1});return r.$c(t),r},t.prototype.Oc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,Fc:!1});return r.Cc(),r},t.prototype.Mc=function(t){return this.xc({path:void 0,Fc:!0})},t.prototype.Lc=function(t){return xf(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},t.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(ff(this.Nc)&&cf.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},t}(),df=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||Nc(t)}return t.prototype.Uc=function(t,e,n,r){return void 0===r&&(r=!1),new pf({Nc:t,methodName:e,qc:n,path:Xr.emptyPath(),Fc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function vf(t){var e=t._freezeSettings(),n=Nc(t._databaseId);return new df(t._databaseId,!!e.ignoreUndefinedProperties,n)}function gf(t,e,n,r,i,o){void 0===o&&(o={});var a=t.Uc(o.merge||o.mergeFields?2:0,e,n,i);Rf("Data must be an object, but it was:",a,r);var s,u,c=kf(r,a);if(o.merge)s=new Qr(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){for(var h=[],l=0,f=o.mergeFields;l<f.length;l++){var p=Df(e,f[l],n);if(!a.contains(p))throw new Ar(Sr.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");Pf(h,p)||h.push(p)}s=new Qr(h),u=a.fieldTransforms.filter((function(t){return s.covers(t.field)}))}else s=null,u=a.fieldTransforms;return new hf(new Ti(c),s,u)}var mf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,o.ZT)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Nc)throw 1===t.Nc?t.Lc(this._methodName+"() can only appear at the top level of your update data"):t.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(sf);function yf(t,e,n){return new pf({Nc:3,qc:e.settings.qc,methodName:t._methodName,Fc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var bf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,o.ZT)(e,t),e.prototype._toFieldTransform=function(t){return new So(t.path,new mo)},e.prototype.isEqual=function(t){return t instanceof e},e}(sf),wf=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return(0,o.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=yf(this,t,!0),n=this.Kc.map((function(t){return Af(t,e)})),r=new yo(n);return new So(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(sf),_f=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return(0,o.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=yf(this,t,!0),n=this.Kc.map((function(t){return Af(t,e)})),r=new wo(n);return new So(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(sf),If=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Qc=n,r}return(0,o.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=new Io(t.R,lo(t.R,this.Qc));return new So(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(sf);function Tf(t,e,n,r){var i=t.Uc(1,e,n);Rf("Data must be an object, but it was:",i,r);var o=[],s=Ti.empty();Kr(r,(function(t,r){var u=Of(e,t,n);r=(0,a.m9)(r);var c=i.Oc(u);if(r instanceof mf)o.push(u);else{var h=Af(r,c);null!=h&&(o.push(u),s.set(u,h))}}));var u=new Qr(o);return new lf(s,u,i.fieldTransforms)}function Ef(t,e,n,r,i,o){var s=t.Uc(1,e,n),u=[Df(e,r,n)],c=[i];if(o.length%2!=0)throw new Ar(Sr.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var h=0;h<o.length;h+=2)u.push(Df(e,o[h])),c.push(o[h+1]);for(var l=[],f=Ti.empty(),p=u.length-1;p>=0;--p)if(!Pf(l,u[p])){var d=u[p],v=c[p];v=(0,a.m9)(v);var g=s.Oc(d);if(v instanceof mf)l.push(d);else{var m=Af(v,g);null!=m&&(l.push(d),f.set(d,m))}}var y=new Qr(l);return new lf(f,y,s.fieldTransforms)}function Sf(t,e,n,r){return void 0===r&&(r=!1),Af(n,t.Uc(r?4:3,e))}function Af(t,e){if(Nf(t=(0,a.m9)(t)))return Rf("Unsupported field value:",e,t),kf(t,e);if(t instanceof sf)return function(t,e){if(!ff(e.Nc))throw e.Lc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Lc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&4!==e.Nc)throw e.Lc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=Af(o[i],e.Mc(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,a.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return lo(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=qr.fromDate(t);return{timestampValue:wa(e.R,n)}}if(t instanceof qr)return n=new qr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:wa(e.R,n)};if(t instanceof uf)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof af)return{bytesValue:_a(e.R,t._byteString)};if(t instanceof Kl){n=e.databaseId;var r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Ea(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Lc("Unsupported field value: "+jl(t))}(t,e)}function kf(t,e){var n={};return Hr(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Kr(t,(function(t,r){var i=Af(r,e.kc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Nf(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof qr||t instanceof uf||t instanceof af||t instanceof Kl||t instanceof sf)}function Rf(t,e,n){if(!Nf(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=jl(n);throw"an object"===r?e.Lc(t+" a custom object"):e.Lc(t+" "+r)}}function Df(t,e,n){if((e=(0,a.m9)(e))instanceof of)return e._internalPath;if("string"==typeof e)return Of(t,e);throw xf("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Cf=new RegExp("[~\\*/\\[\\]]");function Of(t,e,n){if(e.search(Cf)>=0)throw xf("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(of.bind.apply(of,(0,o.ev)([void 0],e.split(".")))))._internalPath}catch(Mp){throw xf("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function xf(t,e,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function "+e+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field "+r),a&&(u+=" in document "+i),u+=")"),new Ar(Sr.INVALID_ARGUMENT,(s+=". ")+t+u)}function Pf(t,e){return t.some((function(t){return t.isEqual(e)}))}var Lf=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Kl(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Mf(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Uf("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Mf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,o.ZT)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Lf);function Uf(t,e){return"string"==typeof e?Of(t,e):e instanceof of?e._internalPath:e._delegate._internalPath}var Ff=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),jf=function(t){function e(e,n,r,i,o,a){var s=this;return(s=t.call(this,e,n,r,i,a)||this)._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return(0,o.ZT)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Vf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Uf("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Lf),Vf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,o.ZT)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(jf),qf=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Ff(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new Vf(n._firestore,n._userDataWriter,r.key,r,new Ff(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ar(Sr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){return{type:"added",doc:new Vf(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Ff(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new Vf(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Ff(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Bf(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Bf(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xr()}}function Gf(t,e){return t instanceof jf&&e instanceof jf?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof qf&&e instanceof qf&&t._firestore===e._firestore&&Ql(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Kf(t){if(Qi(t)&&0===t.explicitOrderBy.length)throw new Ar(Sr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Hf=function(){};function zf(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var Wf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).jc=e,i.Wc=n,i.Gc=r,i.type="where",i}return(0,o.ZT)(e,t),e.prototype._apply=function(t){var e=vf(t.firestore),n=function(t,e,n,r,i,o,a){var s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Ar(Sr.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){tp(a,o);for(var u=[],c=0,h=a;c<h.length;c++){var l=h[c];u.push($f(r,t,l))}s={arrayValue:{values:u}}}else s=$f(r,t,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||tp(a,o),s=Sf(n,"where",a,"in"===o||"not-in"===o);var f=Ci.create(i,o,s);return function(t,e){if(e.g()){var n=Yi(t);if(null!==n&&!n.isEqual(e.field))throw new Ar(Sr.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Zi(t);null!==r&&ep(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new Ar(Sr.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new Ar(Sr.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t._query,0,e,t.firestore._databaseId,this.jc,this.Wc,this.Gc);return new Hl(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new zi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Hf),Jf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jc=e,r.zc=n,r.type="orderBy",r}return(0,o.ZT)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Ar(Sr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Ar(Sr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Bi(e,n);return function(t,e){if(null===Zi(t)){var n=Yi(t);null!==n&&ep(t,n,e.field)}}(t,r),r}(t._query,this.jc,this.zc);return new Hl(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new zi(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Hf),Xf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return(0,o.ZT)(e,t),e.prototype._apply=function(t){return new Hl(t.firestore,t.converter,no(t._query,this.Hc,this.Jc))},e}(Hf),Qf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return(0,o.ZT)(e,t),e.prototype._apply=function(t){var e=Yf(t,this.type,this.Yc,this.Xc);return new Hl(t.firestore,t.converter,function(t,e){return new zi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Hf),Zf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return(0,o.ZT)(e,t),e.prototype._apply=function(t){var e=Yf(t,this.type,this.Yc,this.Xc);return new Hl(t.firestore,t.converter,function(t,e){return new zi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Hf);function Yf(t,e,n,r){if(n[0]=(0,a.m9)(n[0]),n[0]instanceof Lf)return function(t,e,n,r,i){if(!r)throw new Ar(Sr.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=to(t);a<s.length;a++){var u=s[a];if(u.field.isKeyField())o.push(gi(e,r.key));else{var c=r.data.field(u.field);if(ni(c))throw new Ar(Sr.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=u.field.canonicalString();throw new Ar(Sr.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Vi(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=vf(t.firestore);return function(t,e,n,r,i,o){var a=t.explicitOrderBy;if(i.length>a.length)throw new Ar(Sr.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var c=i[u];if(a[u].field.isKeyField()){if("string"!=typeof c)throw new Ar(Sr.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!$i(t)&&-1!==c.indexOf("/"))throw new Ar(Sr.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(Wr.fromString(c));if(!ui.isDocumentKey(h))throw new Ar(Sr.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var l=new ui(h);s.push(gi(e,l))}else{var f=Sf(n,r,c);s.push(f)}}return new Vi(s,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function $f(t,e,n){if("string"==typeof(n=(0,a.m9)(n))){if(""===n)throw new Ar(Sr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!$i(e)&&-1!==n.indexOf("/"))throw new Ar(Sr.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Wr.fromString(n));if(!ui.isDocumentKey(r))throw new Ar(Sr.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return gi(t,new ui(r))}if(n instanceof Kl)return gi(t,n._key);throw new Ar(Sr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+jl(n)+".")}function tp(t,e){if(!Array.isArray(t)||0===t.length)throw new Ar(Sr.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Ar(Sr.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function ep(t,e,n){if(!n.isEqual(e))throw new Ar(Sr.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var np=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),ci(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ti(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(ei(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw xr()}},t.prototype.convertObject=function(t,e){var n=this,r={};return Kr(t.fields,(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new uf(ti(t.latitude),ti(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=ri(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(ii(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=$r(t);return new qr(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=Wr.fromString(t);Pr(Xa(n));var r=new Al(n.get(1),n.get(3)),i=new ui(n.popFirst(5));return r.isEqual(e)||Dr("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function rp(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var ip=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,o.ZT)(e,t),e.prototype.convertBytes=function(t){return new af(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Kl(this.firestore,null,e)},e}(np),op=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=vf(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=ap(t,this._firestore),i=rp(r.converter,e,n),o=gf(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,ko.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=ap(t,this._firestore);return o="string"==typeof(e=(0,a.m9)(e))||e instanceof of?Ef(this._dataReader,"WriteBatch.update",s._key,e,n,r):Tf(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,ko.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=ap(t,this._firestore);return this._mutations=this._mutations.concat(new Bo(e._key,ko.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Ar(Sr.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function ap(t,e){if((t=(0,a.m9)(t)).firestore!==e)throw new Ar(Sr.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var sp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,o.ZT)(e,t),e.prototype.convertBytes=function(t){return new af(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Kl(this.firestore,null,e)},e}(np);function up(t,e,n){t=Vl(t,Kl);var r=Vl(t.firestore,$l),i=rp(t.converter,e,n);return lp(r,[gf(vf(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,ko.none())])}function cp(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Vl(t,Kl);var o=Vl(t.firestore,$l),s=vf(o);return lp(o,[("string"==typeof(e=(0,a.m9)(e))||e instanceof of?Ef(s,"updateDoc",t._key,e,n,r):Tf(s,"updateDoc",t._key,e)).toMutation(t._key,ko.exists(!0))])}function hp(t){for(var e,n,r,i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];t=(0,a.m9)(t);var u={includeMetadataChanges:!1},c=0;"object"!=typeof i[c]||Yl(i[c])||(u=i[c],c++);var h,l,f,p={includeMetadataChanges:u.includeMetadataChanges};if(Yl(i[c])){var d=i[c];i[c]=null===(e=d.next)||void 0===e?void 0:e.bind(d),i[c+1]=null===(n=d.error)||void 0===n?void 0:n.bind(d),i[c+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}if(t instanceof Kl)l=Vl(t.firestore,$l),f=Ji(t._key.path),h={next:function(e){i[c]&&i[c](fp(l,t,e))},error:i[c+1],complete:i[c+2]};else{var v=Vl(t,Hl);l=Vl(v.firestore,$l),f=v._query;var g=new sp(l);h={next:function(t){i[c]&&i[c](new qf(l,g,v,t))},error:i[c+1],complete:i[c+2]},Kf(t._query)}return function(t,e,n,r){var i=this,a=new hl(r),s=new bh(e,a,n);return t.asyncQueue.enqueueAndForget((function(){return(0,o.mG)(i,void 0,void 0,(function(){var e;return(0,o.Jh)(this,(function(n){switch(n.label){case 0:return e=dh,[4,Il(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){a.Wo(),t.asyncQueue.enqueueAndForget((function(){return(0,o.mG)(i,void 0,void 0,(function(){var e;return(0,o.Jh)(this,(function(n){switch(n.label){case 0:return e=vh,[4,Il(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(tf(l),f,p,h)}function lp(t,e){return function(t,e){var n=this,r=new bs;return t.asyncQueue.enqueueAndForget((function(){return(0,o.mG)(n,void 0,void 0,(function(){var n;return(0,o.Jh)(this,(function(i){switch(i.label){case 0:return n=Oh,[4,_l(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(tf(t),e)}function fp(t,e,n){var r=n.docs.get(e._key),i=new sp(t);return new jf(t,i,e._key,r,new Ff(n.hasPendingWrites,n.fromCache),e.converter)}var pp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return(0,o.ZT)(e,t),e.prototype.get=function(e){var n=this,r=ap(e,this._firestore),i=new sp(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new jf(n._firestore,i,r._key,t._document,new Ff(!1,!1),r.converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=vf(t)}return t.prototype.get=function(t){var e=this,n=ap(t,this._firestore),r=new ip(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return xr();var i=t[0];if(i.isFoundDocument())return new Lf(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Lf(e._firestore,r,n._key,null,n.converter);throw xr()}))},t.prototype.set=function(t,e,n){var r=ap(t,this._firestore),i=rp(r.converter,e,n),o=gf(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=ap(t,this._firestore);return o="string"==typeof(e=(0,a.m9)(e))||e instanceof of?Ef(this._dataReader,"Transaction.update",s._key,e,n,r):Tf(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=ap(t,this._firestore);return this._transaction.delete(e._key),this},t}());function dp(){if("undefined"==typeof Uint8Array)throw new Ar(Sr.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function vp(){if("undefined"==typeof atob)throw new Ar(Sr.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var gp=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return vp(),new t(af.fromBase64String(e))},t.fromUint8Array=function(e){return dp(),new t(af.fromUint8Array(e))},t.prototype.toBase64=function(){return vp(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return dp(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),mp=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){rf(t=Vl(t,$l));var n=tf(t),r=t._freezeSettings(),i=new cl;return nf(n,i,new sl(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){rf(t=Vl(t,$l));var e=tf(t),n=t._freezeSettings(),r=new cl;return nf(e,r,new ul(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Ar(Sr.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new bs;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return(0,o.mG)(e,void 0,void 0,(function(){var e;return(0,o.Jh)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return(0,o.mG)(this,void 0,void 0,(function(){var e;return(0,o.Jh)(this,(function(n){switch(n.label){case 0:return Is.yt()?(e=t+"main",[4,Is.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(xu(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),yp=function(){function t(t,e,n){var r=this;this._delegate=e,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof Al||(this.tu=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||Cr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){var i;void 0===r&&(r={});var o=(t=Vl(t,Gl))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==e&&Cr("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},o),{host:e+":"+n,ssl:!1})),r.mockUserToken){var s,u;if("string"==typeof r.mockUserToken)s=r.mockUserToken,u=hc.MOCK_USER;else{s=(0,a.Sg)(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);var c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Ar(Sr.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new hc(c)}t._credentials=new Dl(new Nl(s,u))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return(0,o.mG)(e,void 0,void 0,(function(){var e,n;return(0,o.Jh)(this,(function(r){switch(r.label){case 0:return[4,yl(t)];case 1:return e=r.sent(),[4,wl(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Lr(t);return e.Or.delete(0),Mc(e)}(n))]}}))}))}))}(tf(Vl(this._delegate,$l)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return(0,o.mG)(e,void 0,void 0,(function(){var e,n;return(0,o.Jh)(this,(function(r){switch(r.label){case 0:return[4,yl(t)];case 1:return e=r.sent(),[4,wl(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return(0,o.mG)(this,void 0,void 0,(function(){var e;return(0,o.Jh)(this,(function(n){switch(n.label){case 0:return(e=Lr(t)).Or.add(0),[4,Uc(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(tf(Vl(this._delegate,$l)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Ml("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new bs;return t.asyncQueue.enqueueAndForget((function(){return(0,o.mG)(e,void 0,void 0,(function(){var e;return(0,o.Jh)(this,(function(r){switch(r.label){case 0:return e=Fh,[4,_l(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(tf(Vl(this._delegate,$l)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new hl(e);return t.asyncQueue.enqueueAndForget((function(){return(0,o.mG)(n,void 0,void 0,(function(){var e;return(0,o.Jh)(this,(function(n){switch(n.label){case 0:return e=function(t,e){Lr(t).Gr.add(e),e.next()},[4,Il(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return(0,o.mG)(n,void 0,void 0,(function(){var e;return(0,o.Jh)(this,(function(n){switch(n.label){case 0:return e=function(t,e){Lr(t).Gr.delete(e)},[4,Il(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(tf(t=Vl(t,$l)),Yl(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.tu)throw new Ar(Sr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Op(this,Wl(this._delegate,t))}catch(t){throw Ep(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new Tp(this,Jl(this._delegate,t))}catch(t){throw Ep(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new Rp(this,function(t,e){if(t=Vl(t,Gl),Pl("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ar(Sr.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Hl(t,null,function(t){return new zi(Wr.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw Ep(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new bs;return t.asyncQueue.enqueueAndForget((function(){return(0,o.mG)(n,void 0,void 0,(function(){var n;return(0,o.Jh)(this,(function(i){switch(i.label){case 0:return[4,function(t){return ml(t).then((function(t){return t.datastore}))}(t)];case 1:return n=i.sent(),new fl(t.asyncQueue,n,e,r).run(),[2]}}))}))})),r.promise}(tf(t),(function(n){return e(new pp(t,n))}))}(this._delegate,(function(n){return t(new wp(e,n))}))},t.prototype.batch=function(){var t=this;return tf(this._delegate),new _p(new op(this._delegate,(function(e){return lp(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new Ar(Sr.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new Ar(Sr.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),bp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,o.ZT)(e,t),e.prototype.convertBytes=function(t){return new gp(new af(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return Tp.eu(e,this.firestore,null)},e}(np);var wp=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new bp(t)}return t.prototype.get=function(t){var e=this,n=xp(t);return this._delegate.get(n).then((function(t){return new kp(e._firestore,new jf(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))}))},t.prototype.set=function(t,e,n){var r=xp(t);return n?(Ll("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],a=3;a<arguments.length;a++)i[a-3]=arguments[a];var s=xp(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,(0,o.ev)([s,e,n],i)),this},t.prototype.delete=function(t){var e=xp(t);return this._delegate.delete(e),this},t}(),_p=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=xp(t);return n?(Ll("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],a=3;a<arguments.length;a++)i[a-3]=arguments[a];var s=xp(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,(0,o.ev)([s,e,n],i)),this},t.prototype.delete=function(t){var e=xp(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),Ip=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new Vf(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Np(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.nu=function(e,n){var r=t.su,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new bp(e),n),i.set(n,o)),o},t}();Ip.su=new WeakMap;var Tp=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new bp(t)}return t.iu=function(e,n,r){if(e.length%2!=0)throw new Ar(Sr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Kl(n._delegate,r,new ui(e)))},t.eu=function(e,n,r){return new t(n,new Kl(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Op(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Op(this.firestore,Wl(this._delegate,t))}catch(t){throw Ep(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=(0,a.m9)(t))instanceof Kl&&Xl(this._delegate,t)},t.prototype.set=function(t,e){e=Ll("DocumentReference.set",e);try{return e?up(this._delegate,t,e):up(this._delegate,t)}catch(t){throw Ep(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?cp(this._delegate,t):cp.apply(void 0,(0,o.ev)([this._delegate,t,e],n))}catch(t){throw Ep(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return lp(Vl((t=this._delegate).firestore,$l),[new Bo(t._key,ko.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Sp(e),i=Ap(e,(function(e){return new kp(t.firestore,new jf(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}));return hp(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Vl(t,Kl);var e=Vl(t.firestore,$l),n=tf(e),r=new sp(e);return function(t,e){var n=this,r=new bs;return t.asyncQueue.enqueueAndForget((function(){return(0,o.mG)(n,void 0,void 0,(function(){var n;return(0,o.Jh)(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,o.mG)(this,void 0,void 0,(function(){var r,i;return(0,o.Jh)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Lr(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Mn.mn(t,e)}))}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Ar(Sr.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=uh(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,bl(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new jf(e,r,t._key,n,new Ff(null!==n&&n.hasLocalMutations,!0),t.converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Vl(t,Kl);var e=Vl(t.firestore,$l);return Tl(tf(e),t._key,{source:"server"}).then((function(n){return fp(e,t,n)}))}(this._delegate):function(t){t=Vl(t,Kl);var e=Vl(t.firestore,$l);return Tl(tf(e),t._key).then((function(n){return fp(e,t,n)}))}(this._delegate)).then((function(t){return new kp(e.firestore,new jf(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(Ip.nu(this.firestore,e)):this._delegate.withConverter(null))},t}();function Ep(t,e,n){return t.message=t.message.replace(e,n),t}function Sp(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Yl(r))return r}return{}}function Ap(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Yl(t[0])?t[0]:Yl(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var kp=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new Tp(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return Gf(this._delegate,t._delegate)},t}(),Np=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,o.ZT)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(kp),Rp=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new bp(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,zf(this._delegate,function(t,e,n){var r=e,i=Uf("where",t);return new Wf(i,r,n)}(e,n,r)))}catch(e){throw Ep(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,zf(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Uf("orderBy",t);return new Jf(r,n)}(e,n)))}catch(e){throw Ep(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,zf(this._delegate,function(t){return ql("limit",t),new Xf("limit",t,"F")}(e)))}catch(e){throw Ep(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,zf(this._delegate,function(t){return ql("limitToLast",t),new Xf("limitToLast",t,"L")}(e)))}catch(e){throw Ep(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,zf(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Qf("startAt",t,!0)}.apply(void 0,e)))}catch(e){throw Ep(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,zf(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Qf("startAfter",t,!1)}.apply(void 0,e)))}catch(e){throw Ep(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,zf(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Zf("endBefore",t,!0)}.apply(void 0,e)))}catch(e){throw Ep(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,zf(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Zf("endAt",t,!1)}.apply(void 0,e)))}catch(e){throw Ep(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Ql(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Vl(t,Hl);var e=Vl(t.firestore,$l),n=tf(e),r=new sp(e);return function(t,e){var n=this,r=new bs;return t.asyncQueue.enqueueAndForget((function(){return(0,o.mG)(n,void 0,void 0,(function(){var n;return(0,o.Jh)(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,o.mG)(this,void 0,void 0,(function(){var r,i,a,s,u;return(0,o.Jh)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,Ju(t,e,!0)];case 1:return u=o.sent(),r=new Sh(e,u.Bn),i=r._o(u.documents),a=r.applyChanges(i,!1),n.resolve(a.snapshot),[3,3];case 2:return s=o.sent(),u=uh(s,"Failed to execute query '"+e+" against cache"),n.reject(u),[3,3];case 3:return[2]}}))}))},[4,bl(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new qf(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Vl(t,Hl);var e=Vl(t.firestore,$l),n=tf(e),r=new sp(e);return El(n,t._query,{source:"server"}).then((function(n){return new qf(e,r,t,n)}))}(this._delegate):function(t){t=Vl(t,Hl);var e=Vl(t.firestore,$l),n=tf(e),r=new sp(e);return Kf(t._query),El(n,t._query).then((function(n){return new qf(e,r,t,n)}))}(this._delegate)).then((function(t){return new Cp(e.firestore,new qf(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Sp(e),i=Ap(e,(function(e){return new Cp(t.firestore,new qf(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return hp(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(Ip.nu(this.firestore,e)):this._delegate.withConverter(null))},t}(),Dp=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new Np(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),Cp=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new Rp(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new Np(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new Dp(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new Np(n._firestore,r))}))},t.prototype.isEqual=function(t){return Gf(this._delegate,t._delegate)},t}(),Op=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return(0,o.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new Tp(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Tp(this.firestore,void 0===t?Jl(this._delegate):Jl(this._delegate,t))}catch(t){throw Ep(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Vl(t.firestore,$l),r=Jl(t),i=rp(t.converter,e);return lp(n,[gf(vf(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,ko.exists(!1))]).then((function(){return r}))}(this._delegate,t).then((function(t){return new Tp(e.firestore,t)}))},e.prototype.isEqual=function(t){return Xl(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(Ip.nu(this.firestore,t)):this._delegate.withConverter(null))},e}(Rp);function xp(t){return Vl(t,Kl)}var Pp=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(of.bind.apply(of,(0,o.ev)([void 0],t)))}return t.documentId=function(){return new t(Xr.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=(0,a.m9)(t))instanceof of&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),Lp=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new bf("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new mf("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new wf("arrayUnion",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new _f("arrayRemove",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new If("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}();var Mp,Up=n(909),Fp={Firestore:yp,GeoPoint:uf,Timestamp:qr,Blob:gp,Transaction:wp,WriteBatch:_p,DocumentReference:Tp,DocumentSnapshot:kp,Query:Rp,QueryDocumentSnapshot:Np,QuerySnapshot:Cp,CollectionReference:Op,FieldPath:Pp,FieldValue:Lp,setLogLevel:function(t){var e;e=t,kr.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new Up.wA("firestore",(function(t){return function(t,e){return new yp(t,new $l(t,e),new mp)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},Fp)))})(Mp=i.Z),Mp.registerVersion("@firebase/firestore","2.4.1");var jp="firebasestorage.googleapis.com",Vp=function(t){function e(n,r){var i=t.call(this,qp(n),"Firebase Storage: "+r+" ("+qp(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,e.prototype),i}return(0,o.ZT)(e,t),e.prototype._codeEquals=function(t){return qp(t)===this.code},Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=this._baseMessage+"\n"+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),e}(a.ZR);function qp(t){return"storage/"+t}function Bp(){return new Vp("unknown","An unknown error occurred, please check the error payload for server response.")}function Gp(){return new Vp("canceled","User canceled the upload/download.")}function Kp(){return new Vp("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Hp(t){return new Vp("invalid-argument",t)}function zp(){return new Vp("app-deleted","The Firebase app was deleted.")}function Wp(t){return new Vp("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Jp(t,e){return new Vp("invalid-format","String does not match format '"+t+"': "+e)}function Xp(t){throw new Vp("internal-error","Internal error: "+t)}var Qp={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Zp=function(t,e){this.data=t,this.contentType=e||null};function Yp(t,e){switch(t){case Qp.RAW:return new Zp($p(e));case Qp.BASE64:case Qp.BASE64URL:return new Zp(td(t,e));case Qp.DATA_URL:return new Zp(function(t){var e=new ed(t);return e.base64?td(Qp.BASE64,e.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(Mp){throw Jp(Qp.DATA_URL,"Malformed data URL.")}return $p(e)}(e.rest)}(e),new ed(e).contentType)}throw Bp()}function $p(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<t.length-1&&56320===(64512&t.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else e.push(239,191,189);else 56320===(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function td(t,e){switch(t){case Qp.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw Jp(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case Qp.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw Jp(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(e)}catch(Mp){throw Jp(t,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var ed=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw Jp(Qp.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=e[1]||null;null!=n&&(this.base64=(r=n,i=";base64",r.length>=i.length&&r.substring(r.length-i.length)===i),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=t.substring(t.indexOf(",")+1);var r,i};var nd,rd={STATE_CHANGED:"state_changed"},id={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function od(t){switch(t){case"running":case"pausing":case"canceling":return id.RUNNING;case"paused":return id.PAUSED;case"success":return id.SUCCESS;case"canceled":return id.CANCELED;case"error":default:return id.ERROR}}!function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"}(nd||(nd={}));var ad=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=nd.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=nd.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=nd.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw Xp("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw Xp("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw Xp("cannot .getStatus() before sending");try{return this.xhr_.status}catch(Mp){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw Xp("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}();var sd=function(){function t(){}return t.prototype.createConnection=function(){return new ad},t}(),ud=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e,n){var r;try{r=t.makeFromUrl(e,n)}catch(Mp){return new t(e,"")}if(""===r.path)return r;throw new Vp("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var o=new RegExp("^gs://"+i+"(/(.*))?$","i");function a(t){t.path_=decodeURIComponent(t.path)}for(var s=n.replace(/[.]/g,"\\."),u=[{regex:o,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:a},{regex:new RegExp("^https?://"+(n===jp?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+i+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:a}],c=0;c<u.length;c++){var h=u[c],l=h.regex.exec(e);if(l){var f=l[h.indices.bucket],p=l[h.indices.path];p||(p=""),r=new t(f,p),h.postModify(r);break}}if(null==r)throw function(t){return new Vp("invalid-url","Invalid URL '"+t+"'.")}(e);return r},t}(),cd=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();function hd(t){return"string"===typeof t||t instanceof String}function ld(t){return fd()&&t instanceof Blob}function fd(){return"undefined"!==typeof Blob}function pd(t,e,n,r){if(r<e)throw Hp("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw Hp("Invalid value for '"+t+"'. Expected "+n+" or less.")}function dd(t,e){var n=e.match(/^(\w+):\/\/.+/),r=e;return null==(null===n||void 0===n?void 0:n[1])&&(r="https://"+e),r+"/v0"+t}function vd(t){var e=encodeURIComponent,n="?";for(var r in t){if(t.hasOwnProperty(r))n=n+(e(r)+"="+e(t[r]))+"&"}return n=n.slice(0,-1)}var gd=function(){function t(t,e,n,r,i,o,a,s,u,c,h){var l=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=h,this.promise_=new Promise((function(t,e){l.resolve_=t,l.reject_=e,l.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,a=n.connection;if(n.wasSuccessCode)try{var s=t.callback_(a,a.getResponseText());!function(t){return void 0!==t}(s)?i():i(s)}catch(Mp){o(Mp)}else null!==a?((r=Bp()).serverResponse=a.getResponseText(),t.errorCallback_?o(t.errorCallback_(a,r)):o(r)):n.canceled?o(r=t.appDelete_?zp():Gp()):o(r=new Vp("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new md(!1,null,!0)):this.backoffId_=function(t,e,n){var r=1,i=null,a=!1,s=0;function u(){return 2===s}var c=!1;function h(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];c||(c=!0,e.apply(null,t))}function l(e){i=setTimeout((function(){i=null,t(f,u())}),e)}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)h.call.apply(h,(0,o.ev)([null,t],e));else{var i;u()||a?h.call.apply(h,(0,o.ev)([null,t],e)):(r<64&&(r*=2),1===s?(s=2,i=0):i=1e3*(r+Math.random()),l(i))}}var p=!1;function d(t){p||(p=!0,c||(null!==i?(t||(s=2),clearTimeout(i),l(0)):t||(s=1)))}return l(0),setTimeout((function(){a=!0,d(!0)}),n),d}((function(e,n){if(n)e(!1,new md(!1,null,!0));else{var r=t.pool_.createConnection();t.pendingConnection_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(){null!==t.progressCallback_&&r.removeUploadProgressListener(i),t.pendingConnection_=null;var n=r.getErrorCode()===nd.NO_ERROR,o=r.getStatus();if(n&&!t.isRetryStatusCode_(o)){var a=-1!==t.successCodes_.indexOf(o);e(!0,new md(a,r))}else{var s=r.getErrorCode()===nd.ABORT;e(!1,new md(!1,null,s))}}))}function i(e){var n=e.loaded,r=e.lengthComputable?e.total:-1;null!==t.progressCallback_&&t.progressCallback_(n,r)}}),e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(t){t(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),md=function(t,e,n){this.wasSuccessCode=t,this.connection=e,this.canceled=!!n};function yd(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function bd(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=yd();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(fd())return new Blob(t);throw new Vp("unsupported-environment","This browser doesn't seem to support creating Blobs")}var wd=function(){function t(t,e){var n=0,r="";ld(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(ld(this.data_)){var r=function(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}(this.data_,e,n);return null===r?null:new t(r)}return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(fd()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(bd.apply(null,r))}var i=e.map((function(t){return hd(t)?Yp(Qp.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var a=new Uint8Array(o),s=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)a[s++]=t[e]})),new t(a,!0)},t.prototype.uploadData=function(){return this.data_},t}();function _d(t){var e;try{e=JSON.parse(t)}catch(Mp){return null}return function(t){return"object"===typeof t&&!Array.isArray(t)}(e)?e:null}function Id(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function Td(t,e){return e}var Ed=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||Td},Sd=null;function Ad(){if(Sd)return Sd;var t=[];t.push(new Ed("bucket")),t.push(new Ed("generation")),t.push(new Ed("metageneration")),t.push(new Ed("name","fullPath",!0));var e=new Ed("name");e.xform=function(t,e){return function(t){return!hd(t)||t.length<2?t:Id(t)}(e)},t.push(e);var n=new Ed("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new Ed("timeCreated")),t.push(new Ed("updated")),t.push(new Ed("md5Hash",null,!0)),t.push(new Ed("cacheControl",null,!0)),t.push(new Ed("contentDisposition",null,!0)),t.push(new Ed("contentEncoding",null,!0)),t.push(new Ed("contentLanguage",null,!0)),t.push(new Ed("contentType",null,!0)),t.push(new Ed("metadata","customMetadata",!0)),Sd=t}function kd(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,e[a.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=t.bucket,r=t.fullPath,i=new ud(n,r);return e._makeStorageReference(i)}})}(r,t),r}function Nd(t,e,n){var r=_d(e);return null===r?null:kd(t,r,n)}function Rd(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}function Dd(t,e,n){var r=_d(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var a=o[i].replace(/\/$/,""),s=t._makeStorageReference(new ud(e,a));r.prefixes.push(s)}if(n.items)for(var u=0,c=n.items;u<c.length;u++){var h=c[u];s=t._makeStorageReference(new ud(e,h.name)),r.items.push(s)}return r}(t,e,r)}var Cd=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function Od(t){if(!t)throw Bp()}function xd(t,e){return function(n,r){var i=Nd(t,r,e);return Od(null!==i),i}}function Pd(t,e){return function(n,r){var i=Nd(t,r,e);return Od(null!==i),function(t,e,n){var r=_d(e);if(null===r)return null;if(!hd(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map((function(e){var r=t.bucket,i=t.fullPath;return dd("/b/"+o(r)+"/o/"+o(i),n)+vd({alt:"media",token:e})}))[0]}(i,r,t.host)}}function Ld(t){return function(e,n){var r,i,o;return 401===e.getStatus()?r=e.getResponseText().includes("Firebase App Check token is invalid")?new Vp("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new Vp("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?(o=t.bucket,r=new Vp("quota-exceeded","Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===e.getStatus()?(i=t.path,r=new Vp("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function Md(t){var e=Ld(t);return function(n,r){var i,o=e(n,r);return 404===n.getStatus()&&(i=t.path,o=new Vp("object-not-found","Object '"+i+"' does not exist.")),o.serverResponse=r.serverResponse,o}}function Ud(t,e,n){var r=dd(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new Cd(r,"GET",xd(t,n),i);return o.errorHandler=Md(e),o}function Fd(t,e,n,r,i){var o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var a=dd(e.bucketOnlyServerUrl(),t.host),s=t.maxOperationRetryTime,u=new Cd(a,"GET",function(t,e){return function(n,r){var i=Dd(t,e,r);return Od(null!==i),i}}(t,e.bucket),s);return u.urlParams=o,u.errorHandler=Ld(e),u}function jd(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}var Vd=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function qd(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(Mp){Od(!1)}return Od(!!n&&-1!==(e||["active"]).indexOf(n)),n}var Bd=262144;function Gd(t,e,n,r,i,o,a,s){var u=new Vd(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new Vp("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,h=c;i>0&&(h=Math.min(h,i));var l=u.current,f=l+h,p={"X-Goog-Upload-Command":h===c?"upload, finalize":"upload","X-Goog-Upload-Offset":""+u.current},d=r.slice(l,f);if(null===d)throw Kp();var v=e.maxUploadRetryTime,g=new Cd(n,"POST",(function(t,n){var i,a=qd(t,["active","final"]),s=u.current+h,c=r.size();return i="final"===a?xd(e,o)(t,n):null,new Vd(s,c,"final"===a,i)}),v);return g.headers=p,g.body=d.uploadData(),g.progressCallback=s||null,g.errorHandler=Ld(t),g}var Kd=function(t,e,n){if(function(t){return"function"===typeof t}(t)||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}};function Hd(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}var zd=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=Ad(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e,r._start()})),this._promise.then(null,(function(){}))}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=n[0],i=n[1];switch(e._state){case"running":t(r,i);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}}))},t.prototype._createResumable=function(){var t=this;this._resolveToken((function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a=jd(e,r,i),s={name:a.fullPath},u=dd(o,t.host),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},h=Rd(a,n),l=t.maxUploadRetryTime,f=new Cd(u,"POST",(function(t){var e;qd(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(Mp){Od(!1)}return Od(hd(e)),e}),l);return f.urlParams=s,f.headers=c,f.body=h,f.errorHandler=Ld(e),f}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()}),t._errorHandler)}))},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken((function(n,r){var i=function(t,e,n,r){var i=t.maxUploadRetryTime,o=new Cd(n,"POST",(function(t){var e=qd(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(Mp){Od(!1)}n||Od(!1);var i=Number(n);return Od(!isNaN(i)),new Vd(i,r.size(),"final"===e)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=Ld(e),o}(t._ref.storage,t._ref._location,e,t._blob),o=t._ref.storage._makeRequest(i,n,r);t._request=o,o.getPromise().then((function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()}),t._errorHandler)}))},t.prototype._continueUpload=function(){var t=this,e=Bd*this._chunkMultiplier,n=new Vd(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,o){var a;try{a=Gd(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(Mp){return t._error=Mp,void t._transition("error")}var s=t._ref.storage._makeRequest(a,i,o);t._request=s,s.getPromise().then((function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()}),t._errorHandler)}))},t.prototype._increaseMultiplier=function(){Bd*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken((function(e,n){var r=Ud(t._ref.storage,t._ref._location,t._mappings),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._transition("success")}),t._metadataErrorHandler)}))},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken((function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();a["Content-Type"]="multipart/related; boundary="+s;var u=jd(e,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Rd(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",h="\r\n--"+s+"--",l=wd.getBlob(c,r,h);if(null===l)throw Kp();var f={name:u.fullPath},p=dd(o,t.host),d=t.maxUploadRetryTime,v=new Cd(p,"POST",xd(t,n),d);return v.urlParams=f,v.headers=a,v.body=l.uploadData(),v.errorHandler=Ld(e),v}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")}),t._errorHandler)}))},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=Gp(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=od(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new Kd(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach((function(e){t._notifyObserver(e)}))},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(od(this._state)){case id.SUCCESS:Hd(this._resolve.bind(null,this.snapshot))();break;case id.CANCELED:case id.ERROR:Hd(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(od(this._state)){case id.RUNNING:case id.PAUSED:t.next&&Hd(t.next.bind(t,this.snapshot))();break;case id.SUCCESS:t.complete&&Hd(t.complete.bind(t))();break;case id.CANCELED:case id.ERROR:t.error&&Hd(t.error.bind(t,this._error))();break;default:t.error&&Hd(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),Wd=function(){function t(t,e){this._service=t,this._location=e instanceof ud?e:ud.makeFromUrl(e,t.host)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new ud(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return Id(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new ud(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw Wp(t)},t}();function Jd(t){var e={prefixes:[],items:[]};return Xd(t,e).then((function(){return e}))}function Xd(t,e,n){return(0,o.mG)(this,void 0,void 0,(function(){var r,i,a;return(0,o.Jh)(this,(function(o){switch(o.label){case 0:return[4,Qd(t,{pageToken:n})];case 1:return r=o.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(a=e.items).push.apply(a,r.items),null==r.nextPageToken?[3,3]:[4,Xd(t,e,r.nextPageToken)];case 2:o.sent(),o.label=3;case 3:return[2]}}))}))}function Qd(t,e){return(0,o.mG)(this,void 0,void 0,(function(){var n,r;return(0,o.Jh)(this,(function(i){switch(i.label){case 0:return null!=e&&"number"===typeof e.maxResults&&pd("options.maxResults",1,1e3,e.maxResults),n=e||{},r=Fd(t.storage,t._location,"/",n.pageToken,n.maxResults),[4,t.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}}))}))}function Zd(t,e){return(0,o.mG)(this,void 0,void 0,(function(){var n;return(0,o.Jh)(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("updateMetadata"),n=function(t,e,n,r){var i=dd(e.fullServerUrl(),t.host),o=Rd(n,r),a=t.maxOperationRetryTime,s=new Cd(i,"PATCH",xd(t,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=o,s.errorHandler=Md(e),s}(t.storage,t._location,e,Ad()),[4,t.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}}))}))}function Yd(t){return(0,o.mG)(this,void 0,void 0,(function(){var e;return(0,o.Jh)(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getDownloadURL"),e=function(t,e,n){var r=dd(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new Cd(r,"GET",Pd(t,n),i);return o.errorHandler=Md(e),o}(t.storage,t._location,Ad()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise().then((function(t){if(null===t)throw new Vp("no-download-url","The given file does not have any download URLs.");return t}))]}}))}))}function $d(t){return(0,o.mG)(this,void 0,void 0,(function(){var e;return(0,o.Jh)(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("deleteObject"),e=function(t,e){var n=dd(e.fullServerUrl(),t.host),r=t.maxOperationRetryTime,i=new Cd(n,"DELETE",(function(t,e){}),r);return i.successCodes=[200,204],i.errorHandler=Md(e),i}(t.storage,t._location),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}function tv(t,e){var n=function(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new ud(t._location.bucket,n);return new Wd(t.storage,r)}function ev(t){return/^[A-Za-z]+:\/\//.test(t)}function nv(t,e){if(t instanceof ov){var n=t;if(null==n._bucket)throw new Vp("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new Wd(n,n._bucket);return null!=e?nv(r,e):r}return void 0!==e?tv(t,e):t}function rv(t,e){if(e&&ev(e)){if(t instanceof ov)return new Wd(t,e);throw Hp("To use ref(service, url), the first argument must be a Storage instance.")}return nv(t,e)}function iv(t,e){var n=null===e||void 0===e?void 0:e.storageBucket;return null==n?null:ud.makeFromBucketSpec(n,t)}var ov=function(){function t(t,e,n,r,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=jp,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ud.makeFromBucketSpec(i,this._host):iv(this._host,this.app.options)}return Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,null!=this._url?this._bucket=ud.makeFromBucketSpec(this._url,t):this._bucket=iv(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){pd("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){pd("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return(0,o.mG)(this,void 0,void 0,(function(){var t,e;return(0,o.Jh)(this,(function(n){switch(n.label){case 0:return this._overrideAuthToken?[2,this._overrideAuthToken]:(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype._getAppCheckToken=function(){return(0,o.mG)(this,void 0,void 0,(function(){var t;return(0,o.Jh)(this,(function(e){switch(e.label){case 0:return(t=this._appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}}))}))},t.prototype._delete=function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(t){return t.cancel()})),this._requests.clear()),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new Wd(this,t)},t.prototype._makeRequest=function(t,e,n){var r=this;if(this._deleted)return new cd(zp());var i=function(t,e,n,r,i,o){var a=vd(t.urlParams),s=t.url+a,u=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(u,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(u,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!==e&&void 0!==e?e:"AppManager")}(u,o),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(u,r),new gd(s,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}(t,this._appId,e,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then((function(){return r._requests.delete(i)}),(function(){return r._requests.delete(i)})),i},t.prototype.makeRequestWithTokens=function(t){return(0,o.mG)(this,void 0,void 0,(function(){var e,n,r;return(0,o.Jh)(this,(function(i){switch(i.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return e=i.sent(),n=e[0],r=e[1],[2,this._makeRequest(t,n,r)]}}))}))},t}();function av(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new zd(t,new wd(e),n)}(t=(0,a.m9)(t),e,n)}function sv(t){return function(t){return(0,o.mG)(this,void 0,void 0,(function(){var e;return(0,o.Jh)(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getMetadata"),e=Ud(t.storage,t._location,Ad()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}(t=(0,a.m9)(t))}function uv(t,e){return rv(t=(0,a.m9)(t),e)}function cv(t,e,n,r){void 0===r&&(r={}),function(t,e,n,r){void 0===r&&(r={}),t.host="http://"+e+":"+n;var i=r.mockUserToken;i&&(t._overrideAuthToken="string"===typeof i?i:(0,a.Sg)(i,t.app.options.projectId))}(t,e,n,r)}var hv=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),lv=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new hv(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then((function(e){if(t)return t(new hv(e,n,n._ref))}),e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"===typeof e?function(t){return e(new hv(t,i,i._ref))}:{next:e.next?function(t){return e.next(new hv(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),fv=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map((function(e){return new pv(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map((function(e){return new pv(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),pv=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(function(t,e){return tv(t,e)}(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new lv(av(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=Qp.RAW),this._throwIfRoot("putString");var r=Yp(e,t),i=(0,o.pi)({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new lv(new zd(this._delegate,new wd(r.data,!0),i),this)},t.prototype.listAll=function(){var t=this;return function(t){return Jd(t=(0,a.m9)(t))}(this._delegate).then((function(e){return new fv(e,t.storage)}))},t.prototype.list=function(t){var e=this;return function(t,e){return Qd(t=(0,a.m9)(t),e)}(this._delegate,t||void 0).then((function(t){return new fv(t,e.storage)}))},t.prototype.getMetadata=function(){return sv(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return Zd(t=(0,a.m9)(t),e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return function(t){return Yd(t=(0,a.m9)(t))}(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),function(t){return $d(t=(0,a.m9)(t))}(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw Wp(t)},t}(),dv=function(){function t(t,e){this.app=t,this._delegate=e}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(ev(t))throw Hp("ref() expected a child path but got a URL, use refFromURL instead.");return new pv(uv(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!ev(t))throw Hp("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ud.makeFromUrl(t,this._delegate.host)}catch(Mp){throw Hp("refFromUrl() expected a valid full URL but got an invalid one.")}return new pv(uv(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),cv(this._delegate,t,e,n)},t}();function vv(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),o=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal");return new dv(r,new ov(r,o,a,new sd,n,i.Z.SDK_VERSION))}!function(t){var e={TaskState:id,TaskEvent:rd,StringFormat:Qp,Storage:ov,Reference:pv};t.INTERNAL.registerComponent(new Up.wA("storage",vv,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage","0.7.1")}(i.Z);r.Z.apps.length||r.Z.initializeApp({apiKey:"AIzaSyDRbuRDNRvnrV0JsyMifvP36zt0wfq2UYk",authDomain:"nextadminglobe.firebaseapp.com",projectId:"nextadminglobe",storageBucket:"nextadminglobe.appspot.com",messagingSenderId:"54987627753",appId:"1:54987627753:web:205fae9348277c1b37e478",measurementId:"G-TV63T0ZKSH"});var gv=r.Z.auth(),mv=new r.Z.auth.GoogleAuthProvider,yv=r.Z.firestore(),bv=r.Z.firestore.FieldValue.serverTimestamp,wv=r.Z.firestore.Timestamp.fromMillis,_v=r.Z.firestore.FieldValue.increment,Iv=r.Z.storage(),Tv=r.Z.storage.TaskEvent.STATE_CHANGED},8418:function(t,e,n){"use strict";function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}e.default=void 0;var i,o=(i=n(7294))&&i.__esModule?i:{default:i},a=n(6273),s=n(387),u=n(7190);var c={};function h(t,e,n,r){if(t&&a.isLocalURL(e)){t.prefetch(e,n,r).catch((function(t){0}));var i=r&&"undefined"!==typeof r.locale?r.locale:t&&t.locale;c[e+"%"+n+(i?"%"+i:"")]=!0}}var l=function(t){var e,n=!1!==t.prefetch,i=s.useRouter(),l=o.default.useMemo((function(){var e=r(a.resolveHref(i,t.href,!0),2),n=e[0],o=e[1];return{href:n,as:t.as?a.resolveHref(i,t.as):o||n}}),[i,t.href,t.as]),f=l.href,p=l.as,d=t.children,v=t.replace,g=t.shallow,m=t.scroll,y=t.locale;"string"===typeof d&&(d=o.default.createElement("a",null,d));var b=(e=o.default.Children.only(d))&&"object"===typeof e&&e.ref,w=r(u.useIntersection({rootMargin:"200px"}),2),_=w[0],I=w[1],T=o.default.useCallback((function(t){_(t),b&&("function"===typeof b?b(t):"object"===typeof b&&(b.current=t))}),[b,_]);o.default.useEffect((function(){var t=I&&n&&a.isLocalURL(f),e="undefined"!==typeof y?y:i&&i.locale,r=c[f+"%"+p+(e?"%"+e:"")];t&&!r&&h(i,f,p,{locale:e})}),[p,f,I,y,n,i]);var E={ref:T,onClick:function(t){e.props&&"function"===typeof e.props.onClick&&e.props.onClick(t),t.defaultPrevented||function(t,e,n,r,i,o,s,u){("A"!==t.currentTarget.nodeName||!function(t){var e=t.currentTarget.target;return e&&"_self"!==e||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||t.nativeEvent&&2===t.nativeEvent.which}(t)&&a.isLocalURL(n))&&(t.preventDefault(),null==s&&r.indexOf("#")>=0&&(s=!1),e[i?"replace":"push"](n,r,{shallow:o,locale:u,scroll:s}))}(t,i,f,p,v,g,m,y)},onMouseEnter:function(t){a.isLocalURL(f)&&(e.props&&"function"===typeof e.props.onMouseEnter&&e.props.onMouseEnter(t),h(i,f,p,{priority:!0}))}};if(t.passHref||"a"===e.type&&!("href"in e.props)){var S="undefined"!==typeof y?y:i&&i.locale,A=i&&i.isLocaleDomain&&a.getDomainLocale(p,S,i&&i.locales,i&&i.domainLocales);E.href=A||a.addBasePath(a.addLocale(p,S,i&&i.defaultLocale))}return o.default.cloneElement(e,E)};e.default=l},7190:function(t,e,n){"use strict";function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}Object.defineProperty(e,"__esModule",{value:!0}),e.useIntersection=function(t){var e=t.rootMargin,n=t.disabled||!a,u=i.useRef(),c=r(i.useState(!1),2),h=c[0],l=c[1],f=i.useCallback((function(t){u.current&&(u.current(),u.current=void 0),n||h||t&&t.tagName&&(u.current=function(t,e,n){var r=function(t){var e=t.rootMargin||"",n=s.get(e);if(n)return n;var r=new Map,i=new IntersectionObserver((function(t){t.forEach((function(t){var e=r.get(t.target),n=t.isIntersecting||t.intersectionRatio>0;e&&n&&e(n)}))}),t);return s.set(e,n={id:e,observer:i,elements:r}),n}(n),i=r.id,o=r.observer,a=r.elements;return a.set(t,e),o.observe(t),function(){a.delete(t),o.unobserve(t),0===a.size&&(o.disconnect(),s.delete(i))}}(t,(function(t){return t&&l(t)}),{rootMargin:e}))}),[n,e,h]);return i.useEffect((function(){if(!a&&!h){var t=o.requestIdleCallback((function(){return l(!0)}));return function(){return o.cancelIdleCallback(t)}}}),[h]),[f,h]};var i=n(7294),o=n(9311),a="undefined"!==typeof IntersectionObserver;var s=new Map},5376:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return y}});var r=n(5893),i=(n(355),n(1664)),o=n(1163),a=n(7294),s=n(9863),u=n(8773);function c(){var t=(0,a.useContext)(s.S),e=t.user,n=t.username,c=(0,o.useRouter)();return(0,r.jsx)("nav",{className:"navbar",children:(0,r.jsxs)("ul",{children:[(0,r.jsx)("li",{children:(0,r.jsx)(i.default,{href:"/",children:(0,r.jsx)("button",{className:"btn-logo",children:"Blockonomics"})})}),n&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("li",{className:"push-left",children:(0,r.jsx)("button",{onClick:function(){u.I8.signOut(),c.reload()},children:"Sign Out"})}),(0,r.jsx)("li",{children:(0,r.jsx)(i.default,{href:"/admin",children:(0,r.jsx)("button",{className:"btn-blue",children:"Write Posts"})})}),(0,r.jsx)("li",{children:(0,r.jsx)(i.default,{href:"/".concat(n),children:(0,r.jsx)("img",{src:(null===e||void 0===e?void 0:e.photoURL)||"/hacker.png"})})}),(0,r.jsx)("li",{children:(0,r.jsx)(i.default,{href:"/".concat(n),children:(0,r.jsx)("label",{className:"text",children:"".concat(n)||"Anonymus"})})})]}),!n&&(0,r.jsx)("li",{children:(0,r.jsx)(i.default,{href:"/enter",children:(0,r.jsx)("button",{className:"btn-blue",children:"Log in"})})})]})})}var h=function(){return(h=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},l=function(t){return{loading:void 0===t||null===t,value:t}},f=function(t){var e=t?t():void 0,n=(0,a.useReducer)((function(t,e){switch(e.type){case"error":return h({},t,{error:e.error,loading:!1,value:void 0});case"reset":return l(e.defaultValue);case"value":return h({},t,{error:void 0,loading:!1,value:e.value});default:return t}}),l(e)),r=n[0],i=n[1];return{error:r.error,loading:r.loading,reset:function(){var e=t?t():void 0;i({type:"reset",defaultValue:e})},setError:function(t){i({type:"error",error:t})},setValue:function(t){i({type:"value",value:t})},value:r.value}};function p(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function d(){var t=p(function(t){var e=f((function(){return t.currentUser})),n=e.error,r=e.loading,i=e.setError,o=e.setValue,s=e.value;return(0,a.useEffect)((function(){var e=t.onAuthStateChanged(o,i);return function(){e()}}),[t]),[s,r,n]}(u.I8),1)[0],e=(0,a.useState)(null),n=e[0],r=e[1];return(0,a.useEffect)((function(){var e;t?e=u.RZ.collection("users").doc(t.uid).onSnapshot((function(t){var e;r(null===(e=t.data())||void 0===e?void 0:e.username)})):r(null);return e}),[t]),{user:t,username:n}}var v=n(4931);function g(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){g(t,e,n[e])}))}return t}var y=function(t){var e=t.Component,n=t.pageProps,i=d();return(0,r.jsxs)(s.S.Provider,{value:i,children:[(0,r.jsx)(c,{}),(0,r.jsx)(e,m({},n)),(0,r.jsx)(v.x7,{})]})}},355:function(){},1664:function(t,e,n){t.exports=n(8418)},1163:function(t,e,n){t.exports=n(387)},4931:function(t,e,n){"use strict";n.d(e,{x7:function(){return vt},ZP:function(){return gt}});var r=n(7294);let i={data:""},o=t=>"object"==typeof window?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||i,a=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,s=/\/\*[^]*?\*\/|  +/g,u=/\n+/g,c=(t,e)=>{let n="",r="",i="";for(let o in t){let a=t[o];"@"==o[0]?"i"==o[1]?n=o+" "+a+";":r+="f"==o[1]?c(a,o):o+"{"+c(a,"k"==o[1]?"":e)+"}":"object"==typeof a?r+=c(a,e?e.replace(/([^,])+/g,(t=>o.replace(/(^:.*)|([^,])+/g,(e=>/&/.test(e)?e.replace(/&/g,t):t?t+" "+e:e)))):o):null!=a&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=c.p?c.p(o,a):o+":"+a+";")}return n+(e&&i?e+"{"+i+"}":i)+r},h={},l=t=>{if("object"==typeof t){let e="";for(let n in t)e+=n+l(t[n]);return e}return t},f=(t,e,n,r,i)=>{let o=l(t),f=h[o]||(h[o]=(t=>{let e=0,n=11;for(;e<t.length;)n=101*n+t.charCodeAt(e++)>>>0;return"go"+n})(o));if(!h[f]){let e=o!==t?t:(t=>{let e,n,r=[{}];for(;e=a.exec(t.replace(s,""));)e[4]?r.shift():e[3]?(n=e[3].replace(u," ").trim(),r.unshift(r[0][n]=r[0][n]||{})):r[0][e[1]]=e[2].replace(u," ").trim();return r[0]})(t);h[f]=c(i?{["@keyframes "+f]:e}:e,n?"":"."+f)}return((t,e,n)=>{-1==e.data.indexOf(t)&&(e.data=n?t+e.data:e.data+t)})(h[f],e,r),f},p=(t,e,n)=>t.reduce(((t,r,i)=>{let o=e[i];if(o&&o.call){let t=o(n),e=t&&t.props&&t.props.className||/^go/.test(t)&&t;o=e?"."+e:t&&"object"==typeof t?t.props?"":c(t,""):!1===t?"":t}return t+r+(null==o?"":o)}),"");function d(t){let e=this||{},n=t.call?t(e.p):t;return f(n.unshift?n.raw?p(n,[].slice.call(arguments,1),e.p):n.reduce(((t,n)=>Object.assign(t,n&&n.call?n(e.p):n)),{}):n,o(e.target),e.g,e.o,e.k)}d.bind({g:1});let v,g,m,y=d.bind({k:1});function b(t,e){let n=this||{};return function(){let r=arguments;function i(o,a){let s=Object.assign({},o),u=s.className||i.className;n.p=Object.assign({theme:g&&g()},s),n.o=/ *go\d+/.test(u),s.className=d.apply(n,r)+(u?" "+u:""),e&&(s.ref=a);let c=t;return t[0]&&(c=s.as||t,delete s.as),m&&c[0]&&m(s),v(c,s)}return e?e(i):i}}function w(){return(w=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function _(t,e){return e||(e=t.slice(0)),t.raw=e,t}var I,T=function(t,e){return function(t){return"function"===typeof t}(t)?t(e):t},E=function(){var t=0;return function(){return(++t).toString()}}();!function(t){t[t.ADD_TOAST=0]="ADD_TOAST",t[t.UPDATE_TOAST=1]="UPDATE_TOAST",t[t.UPSERT_TOAST=2]="UPSERT_TOAST",t[t.DISMISS_TOAST=3]="DISMISS_TOAST",t[t.REMOVE_TOAST=4]="REMOVE_TOAST",t[t.START_PAUSE=5]="START_PAUSE",t[t.END_PAUSE=6]="END_PAUSE"}(I||(I={}));var S=function t(e,n){switch(n.type){case I.ADD_TOAST:return w({},e,{toasts:[n.toast].concat(e.toasts).slice(0,20)});case I.UPDATE_TOAST:return w({},e,{toasts:e.toasts.map((function(t){return t.id===n.toast.id?w({},t,n.toast):t}))});case I.UPSERT_TOAST:var r=n.toast;return e.toasts.find((function(t){return t.id===r.id}))?t(e,{type:I.UPDATE_TOAST,toast:r}):t(e,{type:I.ADD_TOAST,toast:r});case I.DISMISS_TOAST:return w({},e,{toasts:e.toasts.map((function(t){return t.id===n.toastId||void 0===n.toastId?w({},t,{visible:!1}):t}))});case I.REMOVE_TOAST:return void 0===n.toastId?w({},e,{toasts:[]}):w({},e,{toasts:e.toasts.filter((function(t){return t.id!==n.toastId}))});case I.START_PAUSE:return w({},e,{pausedAt:n.time});case I.END_PAUSE:var i=n.time-(e.pausedAt||0);return w({},e,{pausedAt:void 0,toasts:e.toasts.map((function(t){return w({},t,{pauseDuration:t.pauseDuration+i})}))})}},A=[],k={toasts:[],pausedAt:void 0},N=function(t){k=S(k,t),A.forEach((function(t){t(k)}))},R={blank:4e3,error:4e3,success:2e3,loading:3e4},D=function(t){return function(e,n){var r=function(t,e,n){return void 0===e&&(e="blank"),w({id:(null==n?void 0:n.id)||E(),createdAt:Date.now(),visible:!0,type:e,role:"status",ariaLive:"polite",message:t,pauseDuration:0},n)}(e,t,n);return N({type:I.UPSERT_TOAST,toast:r}),r.id}},C=function(t,e){return D("blank")(t,e)};C.error=D("error"),C.success=D("success"),C.loading=D("loading"),C.dismiss=function(t){N({type:I.DISMISS_TOAST,toastId:t}),setTimeout((function(){N({type:I.REMOVE_TOAST,toastId:t})}),1e3)},C.remove=function(t){return N({type:I.REMOVE_TOAST,toastId:t})},C.promise=function(t,e,n){var r=C.loading(e.loading,w({},n,null==n?void 0:n.loading));return t.then((function(t){return C.success(T(e.success,t),w({id:r},n,null==n?void 0:n.success)),t})).catch((function(t){C.error(T(e.error,t),w({id:r},n,null==n?void 0:n.error))})),t};var O=function(t){var e=function(t){void 0===t&&(t={});var e=(0,r.useState)(k),n=e[0],i=e[1];(0,r.useEffect)((function(){return A.push(i),function(){var t=A.indexOf(i);t>-1&&A.splice(t,1)}}),[n]);var o=n.toasts.map((function(e){var n,r,i;return w({},t,t[e.type],e,{duration:e.duration||(null==(n=t[e.type])?void 0:n.duration)||(null==(r=t)?void 0:r.duration)||R[e.type],style:w({},t.style,null==(i=t[e.type])?void 0:i.style,e.style)})}));return w({},n,{toasts:o})}(t),n=e.toasts,i=e.pausedAt,o=n.filter((function(t){return t.visible}));(0,r.useEffect)((function(){if(!i){var t=Date.now(),e=n.map((function(e){var n=(e.duration||0)+e.pauseDuration-(t-e.createdAt);if(!(n<0))return setTimeout((function(){return C.dismiss(e.id)}),n);e.visible&&C.dismiss(e.id)}));return function(){e.forEach((function(t){return t&&clearTimeout(t)}))}}}),[n,i]);var a=(0,r.useMemo)((function(){return{startPause:function(){N({type:I.START_PAUSE,time:Date.now()})},endPause:function(){i&&N({type:I.END_PAUSE,time:Date.now()})},updateHeight:function(t,e){return N({type:I.UPDATE_TOAST,toast:{id:t,height:e}})},calculateOffset:function(t,e){var n=e||{},r=n.reverseOrder,i=void 0!==r&&r,a=n.margin,s=void 0===a?8:a,u=o.findIndex((function(e){return e.id===t}));return-1!==u?o.slice.apply(o,i?[u+1]:[0,u]).reduce((function(t,e){return t+(e.height||0)+s}),0):0}}}),[o,i]);return{toasts:n,visibleToasts:o,handlers:a}};function x(){var t=_(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n\n  &:after,\n  &:before {\n    content: '';\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 150ms;\n    position: absolute;\n    border-radius: 3px;\n    opacity: 0;\n    background: ",";\n    bottom: 9px;\n    left: 4px;\n    height: 2px;\n    width: 12px;\n  }\n\n  &:before {\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 180ms;\n    transform: rotate(90deg);\n  }\n"]);return x=function(){return t},t}function P(){var t=_(["\n  from {\n    transform: scale(0) rotate(90deg);\n\t opacity: 0;\n  }\n\n  to {\n    transform: scale(1) rotate(90deg);\n\t opacity: 1;\n  }\n"]);return P=function(){return t},t}function L(){var t=_(["\n  from {\n    transform: scale(0);\n\t opacity: 0;\n  }\n\n  to {\n    transform: scale(1);\n\t opacity: 1;\n  }\n"]);return L=function(){return t},t}function M(){var t=_(["\n  from {\n    transform: scale(0) rotate(45deg);\n\t opacity: 0;\n  }\n\n  to {\n    transform: scale(1) rotate(45deg);\n\t opacity: 1;\n  }\n"]);return M=function(){return t},t}var U=y(M()),F=y(L()),j=y(P()),V=b("div")(x(),(function(t){return t.primary||"#ff4b4b"}),U,F,(function(t){return t.secondary||"#fff"}),j);function q(){var t=_(["\n  width: 12px;\n  height: 12px;\n  box-sizing: border-box;\n  border: 2px solid;\n  border-radius: 100%;\n  border-color: ",";\n  border-right-color: ",";\n  animation: "," 1s linear infinite;\n"]);return q=function(){return t},t}function B(){var t=_(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]);return B=function(){return t},t}var G=y(B()),K=b("div")(q(),(function(t){return t.secondary||"#e0e0e0"}),(function(t){return t.primary||"#616161"}),G);function H(){var t=_(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n  &:after {\n    content: '';\n    box-sizing: border-box;\n    animation: "," 0.2s ease-out forwards;\n    opacity: 0;\n    animation-delay: 200ms;\n    position: absolute;\n    border-right: 2px solid;\n    border-bottom: 2px solid;\n    border-color: ",";\n    bottom: 6px;\n    left: 6px;\n    height: 10px;\n    width: 6px;\n  }\n"]);return H=function(){return t},t}function z(){var t=_(["\n  0% {\n\t\theight: 0;\n\t\twidth: 0;\n\t\topacity: 0;\n  }\n\n  40% {\n\t\theight: 0;\n\t\twidth: 6px;\n\t\topacity: 1;\n  }\n\n  100% {\n    opacity: 1;\n\t\theight: 10px;\n  }\n"]);return z=function(){return t},t}function W(){var t=_(["\n  from {\n    transform: scale(0) rotate(45deg);\n\t opacity: 0;\n  }\n\n  to {\n    transform: scale(1) rotate(45deg);\n\t opacity: 1;\n  }\n"]);return W=function(){return t},t}var J=y(W()),X=y(z()),Q=b("div")(H(),(function(t){return t.primary||"#61d345"}),J,X,(function(t){return t.secondary||"#fff"}));function Z(){var t=_(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-width: 20px;\n  min-height: 20px;\n"]);return Z=function(){return t},t}function Y(){var t=_(["\n  position: absolute;\n"]);return Y=function(){return t},t}var $=b("div")(Y()),tt=b("div")(Z()),et=function(t){var e=t.type,n=t.theme;return"blank"===e?null:(0,r.createElement)(tt,null,(0,r.createElement)(K,Object.assign({},n)),"loading"!==e&&(0,r.createElement)($,null,"error"===e?(0,r.createElement)(V,Object.assign({},n)):(0,r.createElement)(Q,Object.assign({},n))))};function nt(){var t=_(["\n  position: relative;\n  transform: scale(0.6);\n  opacity: 0.4;\n  min-width: 20px;\n  animation: "," 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n"]);return nt=function(){return t},t}function rt(){var t=_(["\nfrom {\n  transform: scale(0.6);\n  opacity: 0.4;\n}\n\nto {\n  transform: scale(1);\n  opacity: 1;\n}\n"]);return rt=function(){return t},t}var it=y(rt()),ot=b("div")(nt(),it);function at(){var t=_(["",""]);return at=function(){return t},t}function st(){var t=_(["",""]);return st=function(){return t},t}function ut(){var t=_(["\n  display: flex;\n  justify-content: center;\n  margin: 4px 10px;\n  color: inherit;\n  flex: 1;\n"]);return ut=function(){return t},t}function ct(){var t=_(["\n  display: flex;\n  align-items: center;\n  background: #fff;\n  color: #363636;\n  line-height: 1.3;\n  will-change: transform;\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);\n  max-width: 350px;\n  margin: 16px;\n  pointer-events: auto;\n  padding: 8px 10px;\n  border-radius: 8px;\n"]);return ct=function(){return t},t}var ht=function(t){return"\n0% {transform: translate3d(0,"+-80*t+"px,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n"},lt=function(t){return"\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,"+-130*t+"px,-1px) scale(.5); opacity:0;}\n"},ft=b("div",r.forwardRef)(ct()),pt=b("div")(ut()),dt=(0,r.memo)((function(t){var e=t.toast,n=t.position,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,["toast","position"]),o=(0,r.useCallback)((function(t){t&&setTimeout((function(){var e=t.getBoundingClientRect();i.onHeight(e.height)}))}),[]),a=function(t,e){var n=t.includes("top");return w({position:"fixed",transition:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:"translateY("+e*(n?1:-1)+"px)"},n?{top:0}:{bottom:0},t.includes("left")?{left:0}:t.includes("right")?{right:0}:{left:0,pointerEvents:"none",right:0,justifyContent:"center"})}(n,i.offset),s=null!=e&&e.height?function(t,e){var n=t.includes("top")?1:-1;return e?{animation:y(st(),ht(n))+" 0.35s cubic-bezier(.21,1.02,.73,1) forwards"}:{animation:y(at(),lt(n))+" 0.8s forwards cubic-bezier(.06,.71,.55,1)",pointerEvents:"none"}}(n,e.visible):{opacity:0};return(0,r.createElement)("div",{style:w({display:"flex",zIndex:e.visible?9999:void 0},a)},(0,r.createElement)(ft,{ref:o,className:e.className,style:w({},s,e.style)},function(){var t=e.icon,n=e.type,i=e.iconTheme;return void 0!==t?"string"===typeof t?(0,r.createElement)(ot,null,t):t:(0,r.createElement)(et,{theme:i,type:n})}(),(0,r.createElement)(pt,{role:e.role,"aria-live":e.ariaLive},T(e.message,e))))}));!function(t,e,n,r){c.p=e,v=t,g=n,m=r}(r.createElement);var vt=function(t){var e=t.reverseOrder,n=t.position,i=void 0===n?"top-center":n,o=t.containerStyle,a=t.toastOptions,s=O(a),u=s.toasts,c=s.handlers;return(0,r.createElement)("div",{style:w({position:"fixed",zIndex:9999},o),onMouseEnter:c.startPause,onMouseLeave:c.endPause},u.map((function(t){return(0,r.createElement)(dt,{key:t.id,onHeight:function(e){return c.updateHeight(t.id,e)},toast:t,offset:c.calculateOffset(t.id,{reverseOrder:e}),position:i})})))},gt=C},655:function(t,e,n){"use strict";n.d(e,{ZT:function(){return i},pi:function(){return o},mG:function(){return a},Jh:function(){return s},XA:function(){return u},CR:function(){return c},ev:function(){return h}});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function s(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}Object.create;function u(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function h(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}Object.create}},function(t){var e=function(e){return t(t.s=e)};t.O(0,[774,179],(function(){return e(1780),e(387)}));var n=t.O();_N_E=n}]);